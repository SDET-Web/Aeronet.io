!function(t){function e(e){var n=e||window.event,o=[].slice.call(arguments,1),i=0,a=0,r=0;return e=t.event.fix(n),e.type="mousewheel",n.wheelDelta&&(i=n.wheelDelta/120),n.detail&&(i=-n.detail/3),r=i,void 0!==n.axis&&n.axis===n.HORIZONTAL_AXIS&&(r=0,a=-1*i),void 0!==n.wheelDeltaY&&(r=n.wheelDeltaY/120),void 0!==n.wheelDeltaX&&(a=-1*n.wheelDeltaX/120),o.unshift(e,i,a,r),(t.event.dispatch||t.event.handle).apply(this,o)}var n=["DOMMouseScroll","mousewheel"];if(t.event.fixHooks)for(var o=n.length;o;)t.event.fixHooks[n[--o]]=t.event.mouseHooks;t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=n.length;t;)this.addEventListener(n[--t],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var t=n.length;t;)this.removeEventListener(n[--t],e,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}(jQuery),function(t){var e={init:function(e){var n={set_width:!1,set_height:!1,horizontalScroll:!1,scrollInertia:950,mouseWheel:!0,mouseWheelPixels:"auto",autoDraggerLength:!0,autoHideScrollbar:!1,snapAmount:null,snapOffset:0,scrollButtons:{enable:!1,scrollType:"continuous",scrollSpeed:"auto",scrollAmount:40},advanced:{updateOnBrowserResize:!0,updateOnContentResize:!1,autoExpandHorizontalScroll:!1,autoScrollOnFocus:!0,normalizeMouseWheelDelta:!1},contentTouchScroll:!0,callbacks:{onScrollStart:function(){},onScroll:function(){},onTotalScroll:function(){},onTotalScrollBack:function(){},onTotalScrollOffset:0,onTotalScrollBackOffset:0,whileScrolling:function(){}},theme:"light"},e=t.extend(!0,n,e);return this.each(function(){var n=t(this);if(e.set_width&&n.css("width",e.set_width),e.set_height&&n.css("height",e.set_height),t(document).data("mCustomScrollbar-index")){var o=parseInt(t(document).data("mCustomScrollbar-index"));t(document).data("mCustomScrollbar-index",o+1)}else t(document).data("mCustomScrollbar-index","1");n.wrapInner("<div class='mCustomScrollBox mCS-"+e.theme+"' id='mCSB_"+t(document).data("mCustomScrollbar-index")+"' style='position:relative; height:100%; overflow:hidden; max-width:100%;' />").addClass("mCustomScrollbar _mCS_"+t(document).data("mCustomScrollbar-index"));var i=n.children(".mCustomScrollBox");if(e.horizontalScroll){i.addClass("mCSB_horizontal").wrapInner("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />");var a=i.children(".mCSB_h_wrapper");a.wrapInner("<div class='mCSB_container' style='position:absolute; left:0;' />").children(".mCSB_container").css({width:a.children().outerWidth(),position:"relative"}).unwrap()}else i.wrapInner("<div class='mCSB_container' style='position:relative; top:0;' />");var r=i.children(".mCSB_container");t.support.touch&&r.addClass("mCS_touch"),r.after("<div class='mCSB_scrollTools' style='position:absolute;'><div class='mCSB_draggerContainer'><div class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' style='position:relative;'></div></div><div class='mCSB_draggerRail'></div></div></div>");var s=i.children(".mCSB_scrollTools"),l=s.children(".mCSB_draggerContainer").children(".mCSB_dragger");if(e.horizontalScroll?l.data("minDraggerWidth",l.width()):l.data("minDraggerHeight",l.height()),e.scrollButtons.enable&&(e.horizontalScroll?s.prepend("<a class='mCSB_buttonLeft' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonRight' oncontextmenu='return false;'></a>"):s.prepend("<a class='mCSB_buttonUp' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonDown' oncontextmenu='return false;'></a>")),i.bind("scroll",function(){n.is(".mCS_disabled")||i.scrollTop(0).scrollLeft(0)}),n.data({mCS_Init:!0,mCustomScrollbarIndex:t(document).data("mCustomScrollbar-index"),horizontalScroll:e.horizontalScroll,scrollInertia:e.scrollInertia,scrollEasing:"mcsEaseOut",mouseWheel:e.mouseWheel,mouseWheelPixels:e.mouseWheelPixels,autoDraggerLength:e.autoDraggerLength,autoHideScrollbar:e.autoHideScrollbar,snapAmount:e.snapAmount,snapOffset:e.snapOffset,scrollButtons_enable:e.scrollButtons.enable,scrollButtons_scrollType:e.scrollButtons.scrollType,scrollButtons_scrollSpeed:e.scrollButtons.scrollSpeed,scrollButtons_scrollAmount:e.scrollButtons.scrollAmount,autoExpandHorizontalScroll:e.advanced.autoExpandHorizontalScroll,autoScrollOnFocus:e.advanced.autoScrollOnFocus,normalizeMouseWheelDelta:e.advanced.normalizeMouseWheelDelta,contentTouchScroll:e.contentTouchScroll,onScrollStart_Callback:e.callbacks.onScrollStart,onScroll_Callback:e.callbacks.onScroll,onTotalScroll_Callback:e.callbacks.onTotalScroll,onTotalScrollBack_Callback:e.callbacks.onTotalScrollBack,onTotalScroll_Offset:e.callbacks.onTotalScrollOffset,onTotalScrollBack_Offset:e.callbacks.onTotalScrollBackOffset,whileScrolling_Callback:e.callbacks.whileScrolling,bindEvent_scrollbar_drag:!1,bindEvent_content_touch:!1,bindEvent_scrollbar_click:!1,bindEvent_mousewheel:!1,bindEvent_buttonsContinuous_y:!1,bindEvent_buttonsContinuous_x:!1,bindEvent_buttonsPixels_y:!1,bindEvent_buttonsPixels_x:!1,bindEvent_focusin:!1,bindEvent_autoHideScrollbar:!1,mCSB_buttonScrollRight:!1,mCSB_buttonScrollLeft:!1,mCSB_buttonScrollDown:!1,mCSB_buttonScrollUp:!1}),e.horizontalScroll)"none"!==n.css("max-width")&&(e.advanced.updateOnContentResize||(e.advanced.updateOnContentResize=!0));else if("none"!==n.css("max-height")){var c=!1,u=parseInt(n.css("max-height"));n.css("max-height").indexOf("%")>=0&&(c=u,u=n.parent().height()*c/100),n.css("overflow","hidden"),i.css("max-height",u)}if(n.mCustomScrollbar("update"),e.advanced.updateOnBrowserResize){var d,h=t(window).width(),f=t(window).height();t(window).bind("resize."+n.data("mCustomScrollbarIndex"),function(){d&&clearTimeout(d),d=setTimeout(function(){if(!n.is(".mCS_disabled")&&!n.is(".mCS_destroyed")){var e=t(window).width(),o=t(window).height();h===e&&f===o||("none"!==n.css("max-height")&&c&&i.css("max-height",n.parent().height()*c/100),n.mCustomScrollbar("update"),h=e,f=o)}},150)})}if(e.advanced.updateOnContentResize){if(e.horizontalScroll)p=r.outerWidth();else var p=r.outerHeight();setInterval(function(){if(e.horizontalScroll){e.advanced.autoExpandHorizontalScroll&&r.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:r.outerWidth(),position:"relative"}).unwrap();t=r.outerWidth()}else var t=r.outerHeight();t!=p&&(n.mCustomScrollbar("update"),p=t)},300)}})},update:function(){var e=t(this),n=e.children(".mCustomScrollBox"),o=n.children(".mCSB_container");o.removeClass("mCS_no_scrollbar"),e.removeClass("mCS_disabled mCS_destroyed"),n.scrollTop(0).scrollLeft(0);var i=n.children(".mCSB_scrollTools"),a=i.children(".mCSB_draggerContainer"),r=a.children(".mCSB_dragger");if(e.data("horizontalScroll")){var s=i.children(".mCSB_buttonLeft"),l=i.children(".mCSB_buttonRight"),c=n.width();e.data("autoExpandHorizontalScroll")&&o.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:o.outerWidth(),position:"relative"}).unwrap();var u=o.outerWidth()}else var d=i.children(".mCSB_buttonUp"),h=i.children(".mCSB_buttonDown"),f=n.height(),p=o.outerHeight();if(p>f&&!e.data("horizontalScroll")){i.css("display","block");var m=a.height();if(e.data("autoDraggerLength")){var g=Math.round(f/p*m),v=r.data("minDraggerHeight");if(g<=v)r.css({height:v});else if(g>=m-10){var b=m-10;r.css({height:b})}else r.css({height:g});r.children(".mCSB_dragger_bar").css({"line-height":r.height()+"px"})}x=(p-f)/(m-r.height());e.data("scrollAmount",x).mCustomScrollbar("scrolling",n,o,a,r,d,h,s,l);_=Math.abs(o.position().top);e.mCustomScrollbar("scrollTo",_,{scrollInertia:0,trigger:"internal"})}else if(u>c&&e.data("horizontalScroll")){i.css("display","block");var y=a.width();if(e.data("autoDraggerLength")){var w=Math.round(c/u*y),C=r.data("minDraggerWidth");if(w<=C)r.css({width:C});else if(w>=y-10){var S=y-10;r.css({width:S})}else r.css({width:w})}var x=(u-c)/(y-r.width());e.data("scrollAmount",x).mCustomScrollbar("scrolling",n,o,a,r,d,h,s,l);var _=Math.abs(o.position().left);e.mCustomScrollbar("scrollTo",_,{scrollInertia:0,trigger:"internal"})}else n.unbind("mousewheel focusin"),e.data("horizontalScroll")?r.add(o).css("left",0):r.add(o).css("top",0),i.css("display","none"),o.addClass("mCS_no_scrollbar"),e.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1})},scrolling:function(e,o,i,a,r,s,l,c){function u(t,e,n,o){f.data("horizontalScroll")?f.mCustomScrollbar("scrollTo",a.position().left-e+o,{moveDragger:!0,trigger:"internal"}):f.mCustomScrollbar("scrollTo",a.position().top-t+n,{moveDragger:!0,trigger:"internal"})}function d(t){a.data("preventAction")||(a.data("preventAction",!0),f.mCustomScrollbar("scrollTo",t,{trigger:"internal"}))}function h(){var t=f.data("scrollButtons_scrollSpeed");return"auto"===f.data("scrollButtons_scrollSpeed")&&(t=Math.round((f.data("scrollInertia")+100)/40)),t}var f=t(this);if(!f.data("bindEvent_scrollbar_drag")){var p,m;t.support.msPointer?(a.bind("MSPointerDown",function(e){e.preventDefault(),f.data({on_drag:!0}),a.addClass("mCSB_dragger_onDrag");var n=t(this),o=n.offset(),i=e.originalEvent.pageX-o.left,r=e.originalEvent.pageY-o.top;i<n.width()&&i>0&&r<n.height()&&r>0&&(p=r,m=i)}),t(document).bind("MSPointerMove."+f.data("mCustomScrollbarIndex"),function(t){if(t.preventDefault(),f.data("on_drag")){var e=a.offset(),n=t.originalEvent.pageX-e.left,o=t.originalEvent.pageY-e.top;u(p,m,o,n)}}).bind("MSPointerUp."+f.data("mCustomScrollbarIndex"),function(t){f.data({on_drag:!1}),a.removeClass("mCSB_dragger_onDrag")})):(a.bind("mousedown touchstart",function(e){e.preventDefault(),e.stopImmediatePropagation();var n,o,i=t(this),r=i.offset();if("touchstart"===e.type){var s=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];n=s.pageX-r.left,o=s.pageY-r.top}else f.data({on_drag:!0}),a.addClass("mCSB_dragger_onDrag"),n=e.pageX-r.left,o=e.pageY-r.top;n<i.width()&&n>0&&o<i.height()&&o>0&&(p=o,m=n)}).bind("touchmove",function(e){e.preventDefault(),e.stopImmediatePropagation();var n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],o=t(this).offset(),i=n.pageX-o.left,a=n.pageY-o.top;u(p,m,a,i)}),t(document).bind("mousemove."+f.data("mCustomScrollbarIndex"),function(t){if(f.data("on_drag")){var e=a.offset(),n=t.pageX-e.left,o=t.pageY-e.top;u(p,m,o,n)}}).bind("mouseup."+f.data("mCustomScrollbarIndex"),function(t){f.data({on_drag:!1}),a.removeClass("mCSB_dragger_onDrag")})),f.data({bindEvent_scrollbar_drag:!0})}if(t.support.touch&&f.data("contentTouchScroll")&&!f.data("bindEvent_content_touch")){var g,v,b,y,w,C,S;o.bind("touchstart",function(e){e.stopImmediatePropagation(),g=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],v=t(this),b=v.offset(),w=g.pageX-b.left,y=g.pageY-b.top,C=y,S=w}),o.bind("touchmove",function(e){e.preventDefault(),e.stopImmediatePropagation(),g=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],v=t(this).parent(),b=v.offset(),w=g.pageX-b.left,y=g.pageY-b.top,f.data("horizontalScroll")?f.mCustomScrollbar("scrollTo",S-w,{trigger:"internal"}):f.mCustomScrollbar("scrollTo",C-y,{trigger:"internal"})})}if(f.data("bindEvent_scrollbar_click")||(i.bind("click",function(e){var n=(e.pageY-i.offset().top)*f.data("scrollAmount"),o=t(e.target);f.data("horizontalScroll")&&(n=(e.pageX-i.offset().left)*f.data("scrollAmount")),(o.hasClass("mCSB_draggerContainer")||o.hasClass("mCSB_draggerRail"))&&f.mCustomScrollbar("scrollTo",n,{trigger:"internal",scrollEasing:"draggerRailEase"})}),f.data({bindEvent_scrollbar_click:!0})),f.data("mouseWheel")&&(f.data("bindEvent_mousewheel")||(e.bind("mousewheel",function(t,e){var n,r=f.data("mouseWheelPixels"),s=Math.abs(o.position().top),l=a.position().top,c=i.height()-a.height();f.data("normalizeMouseWheelDelta")&&(e=e<0?-1:1),"auto"===r&&(r=100+Math.round(f.data("scrollAmount")/2)),f.data("horizontalScroll")&&(l=a.position().left,c=i.width()-a.width(),s=Math.abs(o.position().left)),(e>0&&0!==l||e<0&&l!==c)&&(t.preventDefault(),t.stopImmediatePropagation()),n=s-e*r,f.mCustomScrollbar("scrollTo",n,{trigger:"internal"})}),f.data({bindEvent_mousewheel:!0}))),f.data("scrollButtons_enable"))if("pixels"===f.data("scrollButtons_scrollType"))f.data("horizontalScroll")?(c.add(l).unbind("mousedown touchstart MSPointerDown mouseup MSPointerUp mouseout MSPointerOut touchend",x,_),f.data({bindEvent_buttonsContinuous_x:!1}),f.data("bindEvent_buttonsPixels_x")||(c.bind("click",function(t){t.preventDefault(),d(Math.abs(o.position().left)+f.data("scrollButtons_scrollAmount"))}),l.bind("click",function(t){t.preventDefault(),d(Math.abs(o.position().left)-f.data("scrollButtons_scrollAmount"))}),f.data({bindEvent_buttonsPixels_x:!0}))):(s.add(r).unbind("mousedown touchstart MSPointerDown mouseup MSPointerUp mouseout MSPointerOut touchend",x,_),f.data({bindEvent_buttonsContinuous_y:!1}),f.data("bindEvent_buttonsPixels_y")||(s.bind("click",function(t){t.preventDefault(),d(Math.abs(o.position().top)+f.data("scrollButtons_scrollAmount"))}),r.bind("click",function(t){t.preventDefault(),d(Math.abs(o.position().top)-f.data("scrollButtons_scrollAmount"))}),f.data({bindEvent_buttonsPixels_y:!0})));else if(f.data("horizontalScroll")){if(c.add(l).unbind("click"),f.data({bindEvent_buttonsPixels_x:!1}),!f.data("bindEvent_buttonsContinuous_x")){c.bind("mousedown touchstart MSPointerDown",function(t){t.preventDefault();var e=h();f.data({mCSB_buttonScrollRight:setInterval(function(){f.mCustomScrollbar("scrollTo",Math.abs(o.position().left)+e,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var x=function(t){t.preventDefault(),clearInterval(f.data("mCSB_buttonScrollRight"))};c.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",x),l.bind("mousedown touchstart MSPointerDown",function(t){t.preventDefault();var e=h();f.data({mCSB_buttonScrollLeft:setInterval(function(){f.mCustomScrollbar("scrollTo",Math.abs(o.position().left)-e,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var _=function(t){t.preventDefault(),clearInterval(f.data("mCSB_buttonScrollLeft"))};l.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",_),f.data({bindEvent_buttonsContinuous_x:!0})}}else if(s.add(r).unbind("click"),f.data({bindEvent_buttonsPixels_y:!1}),!f.data("bindEvent_buttonsContinuous_y")){s.bind("mousedown touchstart MSPointerDown",function(t){t.preventDefault();var e=h();f.data({mCSB_buttonScrollDown:setInterval(function(){f.mCustomScrollbar("scrollTo",Math.abs(o.position().top)+e,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var T=function(t){t.preventDefault(),clearInterval(f.data("mCSB_buttonScrollDown"))};s.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",T),r.bind("mousedown touchstart MSPointerDown",function(t){t.preventDefault();var e=h();f.data({mCSB_buttonScrollUp:setInterval(function(){f.mCustomScrollbar("scrollTo",Math.abs(o.position().top)-e,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var D=function(t){t.preventDefault(),clearInterval(f.data("mCSB_buttonScrollUp"))};r.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",D),f.data({bindEvent_buttonsContinuous_y:!0})}f.data("autoScrollOnFocus")&&(f.data("bindEvent_focusin")||(e.bind("focusin",function(){e.scrollTop(0).scrollLeft(0);var n=t(document.activeElement);if(n.is("input,textarea,select,button,a[tabindex],area,object")){var i=o.position().top,a=n.position().top,r=e.height()-n.outerHeight();f.data("horizontalScroll")&&(i=o.position().left,a=n.position().left,r=e.width()-n.outerWidth()),(i+a<0||i+a>r)&&f.mCustomScrollbar("scrollTo",a,{trigger:"internal"})}}),f.data({bindEvent_focusin:!0}))),f.data("autoHideScrollbar")&&(f.data("bindEvent_autoHideScrollbar")||(e.bind("mouseenter",function(t){e.addClass("mCS-mouse-over"),n.showScrollbar.call(e.children(".mCSB_scrollTools"))}).bind("mouseleave touchend",function(t){e.removeClass("mCS-mouse-over"),"mouseleave"===t.type&&n.hideScrollbar.call(e.children(".mCSB_scrollTools"))}),f.data({bindEvent_autoHideScrollbar:!0})))},scrollTo:function(e,o){function i(t){switch(this.mcs={top:f.position().top,left:f.position().left,draggerTop:g.position().top,draggerLeft:g.position().left,topPct:Math.round(100*Math.abs(f.position().top)/Math.abs(f.outerHeight()-h.height())),leftPct:Math.round(100*Math.abs(f.position().left)/Math.abs(f.outerWidth()-h.width()))},t){case"onScrollStart":u.data("mCS_tweenRunning",!0).data("onScrollStart_Callback").call(u,this.mcs);break;case"whileScrolling":u.data("whileScrolling_Callback").call(u,this.mcs);break;case"onScroll":u.data("onScroll_Callback").call(u,this.mcs);break;case"onTotalScrollBack":u.data("onTotalScrollBack_Callback").call(u,this.mcs);break;case"onTotalScroll":u.data("onTotalScroll_Callback").call(u,this.mcs)}}var a,r,s,l,c,u=t(this),d={moveDragger:!1,trigger:"external",callbacks:!0,scrollInertia:u.data("scrollInertia"),scrollEasing:u.data("scrollEasing")},o=t.extend(d,o),h=u.children(".mCustomScrollBox"),f=h.children(".mCSB_container"),p=h.children(".mCSB_scrollTools"),m=p.children(".mCSB_draggerContainer"),g=m.children(".mCSB_dragger"),v=draggerSpeed=o.scrollInertia;if(!f.hasClass("mCS_no_scrollbar")&&(u.data({mCS_trigger:o.trigger}),u.data("mCS_Init")&&(o.callbacks=!1),e||0===e)){if("number"==typeof e)o.moveDragger?(a=e,e=u.data("horizontalScroll")?g.position().left*u.data("scrollAmount"):g.position().top*u.data("scrollAmount"),draggerSpeed=0):a=e/u.data("scrollAmount");else if("string"==typeof e){var b;a=1===(b="top"===e?0:"bottom"!==e||u.data("horizontalScroll")?"left"===e?0:"right"===e&&u.data("horizontalScroll")?f.outerWidth()-h.width():"first"===e?u.find(".mCSB_container").find(":first"):"last"===e?u.find(".mCSB_container").find(":last"):u.find(e):f.outerHeight()-h.height()).length?(e=u.data("horizontalScroll")?b.position().left:b.position().top)/u.data("scrollAmount"):e=b}if(u.data("horizontalScroll"))u.data("onTotalScrollBack_Offset")&&(s=-u.data("onTotalScrollBack_Offset")),u.data("onTotalScroll_Offset")&&(c=h.width()-f.outerWidth()+u.data("onTotalScroll_Offset")),a<0?(a=e=0,clearInterval(u.data("mCSB_buttonScrollLeft")),s||(r=!0)):a>=m.width()-g.width()?(a=m.width()-g.width(),e=h.width()-f.outerWidth(),clearInterval(u.data("mCSB_buttonScrollRight")),c||(l=!0)):e=-e,(y=u.data("snapAmount"))&&(e=Math.round(e/y)*y-u.data("snapOffset")),n.mTweenAxis.call(this,g[0],"left",Math.round(a),draggerSpeed,o.scrollEasing),n.mTweenAxis.call(this,f[0],"left",Math.round(e),v,o.scrollEasing,{onStart:function(){o.callbacks&&!u.data("mCS_tweenRunning")&&i("onScrollStart"),u.data("autoHideScrollbar")&&n.showScrollbar.call(p)},onUpdate:function(){o.callbacks&&i("whileScrolling")},onComplete:function(){o.callbacks&&(i("onScroll"),(r||s&&f.position().left>=s)&&i("onTotalScrollBack"),(l||c&&f.position().left<=c)&&i("onTotalScroll")),g.data("preventAction",!1),u.data("mCS_tweenRunning",!1),u.data("autoHideScrollbar")&&(h.hasClass("mCS-mouse-over")||n.hideScrollbar.call(p))}});else{u.data("onTotalScrollBack_Offset")&&(s=-u.data("onTotalScrollBack_Offset")),u.data("onTotalScroll_Offset")&&(c=h.height()-f.outerHeight()+u.data("onTotalScroll_Offset")),a<0?(a=e=0,clearInterval(u.data("mCSB_buttonScrollUp")),s||(r=!0)):a>=m.height()-g.height()?(a=m.height()-g.height(),e=h.height()-f.outerHeight(),clearInterval(u.data("mCSB_buttonScrollDown")),c||(l=!0)):e=-e;var y=u.data("snapAmount");y&&(e=Math.round(e/y)*y-u.data("snapOffset")),n.mTweenAxis.call(this,g[0],"top",Math.round(a),draggerSpeed,o.scrollEasing),n.mTweenAxis.call(this,f[0],"top",Math.round(e),v,o.scrollEasing,{onStart:function(){o.callbacks&&!u.data("mCS_tweenRunning")&&i("onScrollStart"),u.data("autoHideScrollbar")&&n.showScrollbar.call(p)},onUpdate:function(){o.callbacks&&i("whileScrolling")},onComplete:function(){o.callbacks&&(i("onScroll"),(r||s&&f.position().top>=s)&&i("onTotalScrollBack"),(l||c&&f.position().top<=c)&&i("onTotalScroll")),g.data("preventAction",!1),u.data("mCS_tweenRunning",!1),u.data("autoHideScrollbar")&&(h.hasClass("mCS-mouse-over")||n.hideScrollbar.call(p))}})}u.data("mCS_Init")&&u.data({mCS_Init:!1})}},stop:function(){var e=t(this),o=e.children().children(".mCSB_container"),i=e.children().children().children().children(".mCSB_dragger");n.mTweenAxisStop.call(this,o[0]),n.mTweenAxisStop.call(this,i[0])},disable:function(e){var n=t(this),o=n.children(".mCustomScrollBox"),i=o.children(".mCSB_container"),a=o.children(".mCSB_scrollTools"),r=a.children().children(".mCSB_dragger");o.unbind("mousewheel focusin mouseenter mouseleave touchend"),i.unbind("touchstart touchmove"),e&&(n.data("horizontalScroll")?r.add(i).css("left",0):r.add(i).css("top",0)),a.css("display","none"),i.addClass("mCS_no_scrollbar"),n.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1,bindEvent_content_touch:!1,bindEvent_autoHideScrollbar:!1}).addClass("mCS_disabled")},destroy:function(){var e=t(this);e.removeClass("mCustomScrollbar _mCS_"+e.data("mCustomScrollbarIndex")).addClass("mCS_destroyed").children().children(".mCSB_container").unwrap().children().unwrap().siblings(".mCSB_scrollTools").remove(),t(document).unbind("mousemove."+e.data("mCustomScrollbarIndex")+" mouseup."+e.data("mCustomScrollbarIndex")+" MSPointerMove."+e.data("mCustomScrollbarIndex")+" MSPointerUp."+e.data("mCustomScrollbarIndex")),t(window).unbind("resize."+e.data("mCustomScrollbarIndex"))}},n={showScrollbar:function(){this.stop().animate({opacity:1},"fast")},hideScrollbar:function(){this.stop().animate({opacity:0},"fast")},mTweenAxis:function(t,e,n,o,i,a){function r(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()}function s(){m||d.call(),m=r()-p,l(),m>=t._time&&(t._time=m>t._time?m+u-(m-t._time):m+u-1,t._time<m+1&&(t._time=m+1)),t._time<o?t._id=_request(s):f.call()}function l(){o>0?(t.currVal=c(t._time,g,b,o,i),v[e]=Math.round(t.currVal)+"px"):v[e]=n+"px",h.call()}function c(t,e,n,o,i){switch(i){case"linear":return n*t/o+e;case"easeOutQuad":return t/=o,-n*t*(t-2)+e;case"easeInOutQuad":return(t/=o/2)<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e);case"easeOutCubic":return t/=o,t--,n*(t*t*t+1)+e;case"easeOutQuart":return t/=o,t--,-n*(t*t*t*t-1)+e;case"easeOutQuint":return t/=o,t--,n*(t*t*t*t*t+1)+e;case"easeOutCirc":return t/=o,t--,n*Math.sqrt(1-t*t)+e;case"easeOutSine":return n*Math.sin(t/o*(Math.PI/2))+e;case"easeOutExpo":return n*(1-Math.pow(2,-10*t/o))+e;case"mcsEaseOut":var a=(t/=o)*t,r=a*t;return e+n*(.499999999999997*r*a+-2.5*a*a+5.5*r+-6.5*a+4*t);case"draggerRailEase":return(t/=o/2)<1?n/2*t*t*t+e:(t-=2,n/2*(t*t*t+2)+e)}}var u,d=(a=a||{}).onStart||function(){},h=a.onUpdate||function(){},f=a.onComplete||function(){},p=r(),m=0,g=t.offsetTop,v=t.style;"left"===e&&(g=t.offsetLeft);var b=n-g;!function(){null!=t._id&&(window.requestAnimationFrame?window.cancelAnimationFrame(t._id):clearTimeout(t._id),t._id=null)}(),function(){u=1e3/60,t._time=m+u,_request=window.requestAnimationFrame?window.requestAnimationFrame:function(t){return l(),setTimeout(t,.01)},t._id=_request(s)}()},mTweenAxisStop:function(t){null!=t._id&&(window.requestAnimationFrame?window.cancelAnimationFrame(t._id):clearTimeout(t._id),t._id=null)},rafPolyfill:function(){for(var t=["ms","moz","webkit","o"],e=t.length;--e>-1&&!window.requestAnimationFrame;)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"]}};n.rafPolyfill.call(),t.support.touch=!!("ontouchstart"in window),t.support.msPointer=window.navigator.msPointerEnabled;var o="https:"==document.location.protocol?"https:":"http:";t.event.special.mousewheel||document.write('<script src="'+o+'//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.0.6/jquery.mousewheel.min.js"><\/script>'),t.fn.mCustomScrollbar=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist"):e.init.apply(this,arguments)}}(jQuery),function(t){var e=function(e,n){e=t(e);var o=this,i=t.extend({},t.fn.bootstrapWizard.defaults,n),a=null,r=null;this.rebindClick=function(t,e){t.unbind("click",e).bind("click",e)},this.fixNavigationButtons=function(){if(a.length||(r.find("a:first").tab("show"),a=r.find('li:has([data-toggle="tab"]):first')),t(i.previousSelector,e).toggleClass("disabled",o.firstIndex()>=o.currentIndex()),t(i.nextSelector,e).toggleClass("disabled",o.currentIndex()>=o.navigationLength()),o.rebindClick(t(i.nextSelector,e),o.next),o.rebindClick(t(i.previousSelector,e),o.previous),o.rebindClick(t(i.lastSelector,e),o.last),o.rebindClick(t(i.firstSelector,e),o.first),i.onTabShow&&"function"==typeof i.onTabShow&&!1===i.onTabShow(a,r,o.currentIndex()))return!1},this.next=function(t){if(e.hasClass("last")||i.onNext&&"function"==typeof i.onNext&&!1===i.onNext(a,r,o.nextIndex()))return!1;$index=o.nextIndex(),$index>o.navigationLength()||r.find('li:has([data-toggle="tab"]):eq('+$index+") a").tab("show")},this.previous=function(t){if(e.hasClass("first")||i.onPrevious&&"function"==typeof i.onPrevious&&!1===i.onPrevious(a,r,o.previousIndex()))return!1;$index=o.previousIndex(),0>$index||r.find('li:has([data-toggle="tab"]):eq('+$index+") a").tab("show")},this.first=function(t){if(i.onFirst&&"function"==typeof i.onFirst&&!1===i.onFirst(a,r,o.firstIndex())||e.hasClass("disabled"))return!1;r.find('li:has([data-toggle="tab"]):eq(0) a').tab("show")},this.last=function(t){if(i.onLast&&"function"==typeof i.onLast&&!1===i.onLast(a,r,o.lastIndex())||e.hasClass("disabled"))return!1;r.find('li:has([data-toggle="tab"]):eq('+o.navigationLength()+") a").tab("show")},this.currentIndex=function(){return r.find('li:has([data-toggle="tab"])').index(a)},this.firstIndex=function(){return 0},this.lastIndex=function(){return o.navigationLength()},this.getIndex=function(t){return r.find('li:has([data-toggle="tab"])').index(t)},this.nextIndex=function(){return r.find('li:has([data-toggle="tab"])').index(a)+1},this.previousIndex=function(){return r.find('li:has([data-toggle="tab"])').index(a)-1},this.navigationLength=function(){return r.find('li:has([data-toggle="tab"])').length-1},this.activeTab=function(){return a},this.nextTab=function(){return r.find('li:has([data-toggle="tab"]):eq('+(o.currentIndex()+1)+")").length?r.find('li:has([data-toggle="tab"]):eq('+(o.currentIndex()+1)+")"):null},this.previousTab=function(){return 0>=o.currentIndex()?null:r.find('li:has([data-toggle="tab"]):eq('+parseInt(o.currentIndex()-1)+")")},this.show=function(t){return e.find('li:has([data-toggle="tab"]):eq('+t+") a").tab("show")},this.disable=function(t){r.find('li:has([data-toggle="tab"]):eq('+t+")").addClass("disabled")},this.enable=function(t){r.find('li:has([data-toggle="tab"]):eq('+t+")").removeClass("disabled")},this.hide=function(t){r.find('li:has([data-toggle="tab"]):eq('+t+")").hide()},this.display=function(t){r.find('li:has([data-toggle="tab"]):eq('+t+")").show()},this.remove=function(e){var n=void 0!==e[1]&&e[1];e=r.find('li:has([data-toggle="tab"]):eq('+e[0]+")"),n&&(n=e.find("a").attr("href"),t(n).remove()),e.remove()},r=e.find("ul:first",e),a=r.find('li:has([data-toggle="tab"]).active',e),r.hasClass(i.tabClass)||r.addClass(i.tabClass),i.onInit&&"function"==typeof i.onInit&&i.onInit(a,r,0),i.onShow&&"function"==typeof i.onShow&&i.onShow(a,r,o.nextIndex()),o.fixNavigationButtons(),t('a[data-toggle="tab"]',r).on("click",function(e){if(e=r.find('li:has([data-toggle="tab"])').index(t(e.currentTarget).parent('li:has([data-toggle="tab"])')),i.onTabClick&&"function"==typeof i.onTabClick&&!1===i.onTabClick(a,r,o.currentIndex(),e))return!1}),t('a[data-toggle="tab"]',r).on("shown shown.bs.tab",function(e){if($element=t(e.target).parent(),e=r.find('li:has([data-toggle="tab"])').index($element),$element.hasClass("disabled")||i.onTabChange&&"function"==typeof i.onTabChange&&!1===i.onTabChange(a,r,o.currentIndex(),e))return!1;a=$element,o.fixNavigationButtons()})};t.fn.bootstrapWizard=function(n){if("string"==typeof n){var o=Array.prototype.slice.call(arguments,1);return 1===o.length&&o.toString(),this.data("bootstrapWizard")[n](o)}return this.each(function(o){if(!(o=t(this)).data("bootstrapWizard")){var i=new e(o,n);o.data("bootstrapWizard",i)}})},t.fn.bootstrapWizard.defaults={tabClass:"nav nav-pills",nextSelector:".wizard li.next",previousSelector:".wizard li.previous",firstSelector:".wizard li.first",lastSelector:".wizard li.last",onShow:null,onInit:null,onNext:null,onPrevious:null,onLast:null,onFirst:null,onTabChange:null,onTabClick:null,onTabShow:null}}(jQuery),function(){var t=[].slice;!function(e,n){"use strict";var o;o=function(){function t(t,n){null==n&&(n={}),this.$element=e(t),this.options=e.extend({},e.fn.bootstrapSwitch.defaults,n,{state:this.$element.is(":checked"),size:this.$element.data("size"),animate:this.$element.data("animate"),disabled:this.$element.is(":disabled"),readonly:this.$element.is("[readonly]"),onColor:this.$element.data("on-color"),offColor:this.$element.data("off-color"),onText:this.$element.data("on-text"),offText:this.$element.data("off-text"),labelText:this.$element.data("label-text"),baseClass:this.$element.data("base-class"),wrapperClass:this.$element.data("wrapper-class")}),this.$wrapper=e("<div>",{class:function(t){return function(){var e;return(e=[""+t.options.baseClass].concat(t._getClasses(t.options.wrapperClass))).push(t.options.state?t.options.baseClass+"-on":t.options.baseClass+"-off"),null!=t.options.size&&e.push(t.options.baseClass+"-"+t.options.size),t.options.animate&&e.push(t.options.baseClass+"-animate"),t.options.disabled&&e.push(t.options.baseClass+"-disabled"),t.options.readonly&&e.push(t.options.baseClass+"-readonly"),t.$element.attr("id")&&e.push(t.options.baseClass+"-id-"+t.$element.attr("id")),e.join(" ")}}(this)()}),this.$container=e("<div>",{class:this.options.baseClass+"-container"}),this.$on=e("<span>",{html:this.options.onText,class:this.options.baseClass+"-handle-on "+this.options.baseClass+"-"+this.options.onColor}),this.$off=e("<span>",{html:this.options.offText,class:this.options.baseClass+"-handle-off "+this.options.baseClass+"-"+this.options.offColor}),this.$label=e("<label>",{for:this.$element.attr("id"),html:this.options.labelText,class:this.options.baseClass+"-label"}),this.$element.on("init.bootstrapSwitch",function(e){return function(){return e.options.onInit.apply(t,arguments)}}(this)),this.$element.on("switchChange.bootstrapSwitch",function(e){return function(){return e.options.onSwitchChange.apply(t,arguments)}}(this)),this.$container=this.$element.wrap(this.$container).parent(),this.$wrapper=this.$container.wrap(this.$wrapper).parent(),this.$element.before(this.$on).before(this.$label).before(this.$off).trigger("init.bootstrapSwitch"),this._elementHandlers(),this._handleHandlers(),this._labelHandlers(),this._formHandler()}return t.prototype._constructor=t,t.prototype.state=function(t,e){return void 0===t?this.options.state:this.options.disabled||this.options.readonly?this.$element:(t=!!t,this.$element.prop("checked",t).trigger("change.bootstrapSwitch",e),this.$element)},t.prototype.toggleState=function(t){return this.options.disabled||this.options.readonly?this.$element:this.$element.prop("checked",!this.options.state).trigger("change.bootstrapSwitch",t)},t.prototype.size=function(t){return void 0===t?this.options.size:(null!=this.options.size&&this.$wrapper.removeClass(this.options.baseClass+"-"+this.options.size),t&&this.$wrapper.addClass(this.options.baseClass+"-"+t),this.options.size=t,this.$element)},t.prototype.animate=function(t){return void 0===t?this.options.animate:(t=!!t,this.$wrapper[t?"addClass":"removeClass"](this.options.baseClass+"-animate"),this.options.animate=t,this.$element)},t.prototype.disabled=function(t){return void 0===t?this.options.disabled:(t=!!t,this.$wrapper[t?"addClass":"removeClass"](this.options.baseClass+"-disabled"),this.$element.prop("disabled",t),this.options.disabled=t,this.$element)},t.prototype.toggleDisabled=function(){return this.$element.prop("disabled",!this.options.disabled),this.$wrapper.toggleClass(this.options.baseClass+"-disabled"),this.options.disabled=!this.options.disabled,this.$element},t.prototype.readonly=function(t){return void 0===t?this.options.readonly:(t=!!t,this.$wrapper[t?"addClass":"removeClass"](this.options.baseClass+"-readonly"),this.$element.prop("readonly",t),this.options.readonly=t,this.$element)},t.prototype.toggleReadonly=function(){return this.$element.prop("readonly",!this.options.readonly),this.$wrapper.toggleClass(this.options.baseClass+"-readonly"),this.options.readonly=!this.options.readonly,this.$element},t.prototype.onColor=function(t){var e;return e=this.options.onColor,void 0===t?e:(null!=e&&this.$on.removeClass(this.options.baseClass+"-"+e),this.$on.addClass(this.options.baseClass+"-"+t),this.options.onColor=t,this.$element)},t.prototype.offColor=function(t){var e;return e=this.options.offColor,void 0===t?e:(null!=e&&this.$off.removeClass(this.options.baseClass+"-"+e),this.$off.addClass(this.options.baseClass+"-"+t),this.options.offColor=t,this.$element)},t.prototype.onText=function(t){return void 0===t?this.options.onText:(this.$on.html(t),this.options.onText=t,this.$element)},t.prototype.offText=function(t){return void 0===t?this.options.offText:(this.$off.html(t),this.options.offText=t,this.$element)},t.prototype.labelText=function(t){return void 0===t?this.options.labelText:(this.$label.html(t),this.options.labelText=t,this.$element)},t.prototype.baseClass=function(){return this.options.baseClass},t.prototype.wrapperClass=function(t){return void 0===t?this.options.wrapperClass:(t||(t=e.fn.bootstrapSwitch.defaults.wrapperClass),this.$wrapper.removeClass(this._getClasses(this.options.wrapperClass).join(" ")),this.$wrapper.addClass(this._getClasses(t).join(" ")),this.options.wrapperClass=t,this.$element)},t.prototype.destroy=function(){var t;return(t=this.$element.closest("form")).length&&t.off("reset.bootstrapSwitch").removeData("bootstrap-switch"),this.$container.children().not(this.$element).remove(),this.$element.unwrap().unwrap().off(".bootstrapSwitch").removeData("bootstrap-switch"),this.$element},t.prototype._elementHandlers=function(){return this.$element.on({"change.bootstrapSwitch":function(t){return function(n,o){var i;return n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),i=t.$element.is(":checked"),i!==t.options.state?(t.options.state=i,t.$wrapper.removeClass(i?t.options.baseClass+"-off":t.options.baseClass+"-on").addClass(i?t.options.baseClass+"-on":t.options.baseClass+"-off"),o?void 0:(t.$element.is(":radio")&&e("[name='"+t.$element.attr("name")+"']").not(t.$element).prop("checked",!1).trigger("change.bootstrapSwitch",!0),t.$element.trigger("switchChange.bootstrapSwitch",[i]))):void 0}}(this),"focus.bootstrapSwitch":function(t){return function(e){return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.$wrapper.addClass(t.options.baseClass+"-focused")}}(this),"blur.bootstrapSwitch":function(t){return function(e){return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.$wrapper.removeClass(t.options.baseClass+"-focused")}}(this),"keydown.bootstrapSwitch":function(t){return function(e){if(e.which&&!t.options.disabled&&!t.options.readonly)switch(e.which){case 32:return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.toggleState();case 37:return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.state(!1);case 39:return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.state(!0)}}}(this)})},t.prototype._handleHandlers=function(){return this.$on.on("click.bootstrapSwitch",function(t){return function(){return t.state(!1),t.$element.trigger("focus.bootstrapSwitch")}}(this)),this.$off.on("click.bootstrapSwitch",function(t){return function(){return t.state(!0),t.$element.trigger("focus.bootstrapSwitch")}}(this))},t.prototype._labelHandlers=function(){return this.$label.on({"mousemove.bootstrapSwitch touchmove.bootstrapSwitch":function(t){return function(e){var n,o,i,a;if(t.drag)return e.preventDefault(),o=e.pageX||e.originalEvent.touches[0].pageX,i=(o-t.$wrapper.offset().left)/t.$wrapper.width()*100,n=25,a=75,n>i?i=n:i>a&&(i=a),t.$container.css("margin-left",i-a+"%"),t.$element.trigger("focus.bootstrapSwitch")}}(this),"mousedown.bootstrapSwitch touchstart.bootstrapSwitch":function(t){return function(e){return t.drag||t.options.disabled||t.options.readonly?void 0:(e.preventDefault(),t.drag=!0,t.options.animate&&t.$wrapper.removeClass(t.options.baseClass+"-animate"),t.$element.trigger("focus.bootstrapSwitch"))}}(this),"mouseup.bootstrapSwitch touchend.bootstrapSwitch":function(t){return function(e){return t.drag?(e.preventDefault(),t.drag=!1,t.$element.prop("checked",parseInt(t.$container.css("margin-left"),10)>-t.$container.width()/6).trigger("change.bootstrapSwitch"),t.$container.css("margin-left",""),t.options.animate?t.$wrapper.addClass(t.options.baseClass+"-animate"):void 0):void 0}}(this),"mouseleave.bootstrapSwitch":function(t){return function(){return t.$label.trigger("mouseup.bootstrapSwitch")}}(this)})},t.prototype._formHandler=function(){var t;return t=this.$element.closest("form"),t.data("bootstrap-switch")?void 0:t.on("reset.bootstrapSwitch",function(){return n.setTimeout(function(){return t.find("input").filter(function(){return e(this).data("bootstrap-switch")}).each(function(){return e(this).bootstrapSwitch("state",this.checked)})},1)}).data("bootstrap-switch",!0)},t.prototype._getClasses=function(t){var n,o,i,a;if(!e.isArray(t))return[this.options.baseClass+"-"+t];for(o=[],i=0,a=t.length;a>i;i++)n=t[i],o.push(this.options.baseClass+"-"+n);return o},t}(),e.fn.bootstrapSwitch=function(){var n,i,a;return i=arguments[0],n=2<=arguments.length?t.call(arguments,1):[],a=this,this.each(function(){var t,r;return t=e(this),(r=t.data("bootstrap-switch"))||t.data("bootstrap-switch",r=new o(this,i)),"string"==typeof i?a=r[i].apply(r,n):void 0}),a},e.fn.bootstrapSwitch.Constructor=o,e.fn.bootstrapSwitch.defaults={state:!0,size:null,animate:!0,disabled:!1,readonly:!1,onColor:"primary",offColor:"default",onText:"ON",offText:"OFF",labelText:"&nbsp;",baseClass:"bootstrap-switch",wrapperClass:"wrapper",onInit:function(){},onSwitchChange:function(){}}}(window.jQuery,window)}.call(this),function(t,e,n){var o=function(o){function i(t){var e,n,a={};o.each(t,function(o){(e=o.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(e[1]+" ")&&(n=o.replace(e[0],e[2].toLowerCase()),a[n]=o,"o"===e[1]&&i(t[o]))}),t._hungarianMap=a}function a(t,e,r){t._hungarianMap||i(t);var s;o.each(e,function(i){(s=t._hungarianMap[i])===n||!r&&e[s]!==n||("o"===s.charAt(0)?(e[s]||(e[s]={}),o.extend(!0,e[s],e[i]),a(t[s],e[s],r)):e[s]=e[i])})}function r(t){var e=qt.defaults.oLanguage,n=t.sZeroRecords;!t.sEmptyTable&&n&&"No data available in table"===e.sEmptyTable&&Ft(t,t,"sZeroRecords","sEmptyTable"),!t.sLoadingRecords&&n&&"Loading..."===e.sLoadingRecords&&Ft(t,t,"sZeroRecords","sLoadingRecords"),t.sInfoThousands&&(t.sThousands=t.sInfoThousands),(t=t.sDecimal)&&Wt(t)}function s(t){ue(t,"ordering","bSort"),ue(t,"orderMulti","bSortMulti"),ue(t,"orderClasses","bSortClasses"),ue(t,"orderCellsTop","bSortCellsTop"),ue(t,"order","aaSorting"),ue(t,"orderFixed","aaSortingFixed"),ue(t,"paging","bPaginate"),ue(t,"pagingType","sPaginationType"),ue(t,"pageLength","iDisplayLength"),ue(t,"searching","bFilter")}function l(t){ue(t,"orderable","bSortable"),ue(t,"orderData","aDataSort"),ue(t,"orderSequence","asSorting"),ue(t,"orderDataType","sortDataType")}function c(t){var t=t.oBrowser,e=o("<div/>").css({position:"absolute",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(o("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(o('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),n=e.find(".test");t.bScrollOversize=100===n[0].offsetWidth,t.bScrollbarLeft=1!==n.offset().left,e.remove()}function u(t,e,o,i,a,r){var s,l=!1;for(o!==n&&(s=o,l=!0);i!==a;)t.hasOwnProperty(i)&&(s=l?e(s,t[i],i,t):t[i],l=!0,i+=r);return s}function d(t,n){var i=qt.defaults.column,a=t.aoColumns.length,i=o.extend({},qt.models.oColumn,i,{nTh:n||e.createElement("th"),sTitle:i.sTitle?i.sTitle:n?n.innerHTML:"",aDataSort:i.aDataSort?i.aDataSort:[a],mData:i.mData?i.mData:a,idx:a});t.aoColumns.push(i),(i=t.aoPreSearchCols)[a]=o.extend({},qt.models.oSearch,i[a]),h(t,a,null)}function h(t,e,i){var r=t.aoColumns[e],e=t.oClasses,s=o(r.nTh);r.sWidthOrig||(r.sWidthOrig=s.attr("width")||null,(d=(s.attr("style")||"").match(/width:\s*(\d+[pxem%])/))&&(r.sWidthOrig=d[1])),i!==n&&null!==i&&(l(i),a(qt.defaults.column,i),i.mDataProp!==n&&!i.mData&&(i.mData=i.mDataProp),i.sType&&(r._sManualType=i.sType),i.className&&!i.sClass&&(i.sClass=i.className),o.extend(r,i),Ft(r,i,"sWidth","sWidthOrig"),"number"==typeof i.iDataSort&&(r.aDataSort=[i.iDataSort]),Ft(r,i,"aDataSort"));var c=T(i=r.mData),u=r.mRender?T(r.mRender):null,d=function(t){return"string"==typeof t&&-1!==t.indexOf("@")};r._bAttrSrc=o.isPlainObject(i)&&(d(i.sort)||d(i.type)||d(i.filter)),r.fnGetData=function(t,e){var n=c(t,e);return r.mRender&&e&&""!==e?u(n,e,t):n},r.fnSetData=D(i),t.oFeatures.bSort||(r.bSortable=!1,s.addClass(e.sSortableNone)),t=-1!==o.inArray("asc",r.asSorting),s=-1!==o.inArray("desc",r.asSorting),r.bSortable&&(t||s)?t&&!s?(r.sSortingClass=e.sSortableAsc,r.sSortingClassJUI=e.sSortJUIAscAllowed):!t&&s?(r.sSortingClass=e.sSortableDesc,r.sSortingClassJUI=e.sSortJUIDescAllowed):(r.sSortingClass=e.sSortable,r.sSortingClassJUI=e.sSortJUI):(r.sSortingClass=e.sSortableNone,r.sSortingClassJUI="")}function f(t){if(!1!==t.oFeatures.bAutoWidth){var e=t.aoColumns;pt(t);for(var n=0,o=e.length;n<o;n++)e[n].nTh.style.width=e[n].sWidth}(""!==(e=t.oScroll).sY||""!==e.sX)&&ht(t),Bt(t,null,"column-sizing",[t])}function p(t,e){var n=v(t,"bVisible");return"number"==typeof n[e]?n[e]:null}function m(t,e){var n=v(t,"bVisible");return-1!==(n=o.inArray(e,n))?n:null}function g(t){return v(t,"bVisible").length}function v(t,e){var n=[];return o.map(t.aoColumns,function(t,o){t[e]&&n.push(o)}),n}function b(t){var e,o,i,a,r,s,l,c,u,d=t.aoColumns,h=t.aoData,f=qt.ext.type.detect;for(e=0,o=d.length;e<o;e++)if(l=d[e],u=[],!l.sType&&l._sManualType)l.sType=l._sManualType;else if(!l.sType){for(i=0,a=f.length;i<a;i++){for(r=0,s=h.length;r<s&&(u[r]===n&&(u[r]=S(t,r,e,"type")),!(!(c=f[i](u[r],t))||"html"===c));r++);if(c){l.sType=c;break}}l.sType||(l.sType="string")}}function y(t,e,i,a){var r,s,l,c,u,h,f=t.aoColumns;if(e)for(r=e.length-1;0<=r;r--){var p=(h=e[r]).targets!==n?h.targets:h.aTargets;for(o.isArray(p)||(p=[p]),s=0,l=p.length;s<l;s++)if("number"==typeof p[s]&&0<=p[s]){for(;f.length<=p[s];)d(t);a(p[s],h)}else if("number"==typeof p[s]&&0>p[s])a(f.length+p[s],h);else if("string"==typeof p[s])for(c=0,u=f.length;c<u;c++)("_all"==p[s]||o(f[c].nTh).hasClass(p[s]))&&a(c,h)}if(i)for(r=0,t=i.length;r<t;r++)a(r,i[r])}function w(t,e,n,i){var a=t.aoData.length;(r=o.extend(!0,{},qt.models.oRow,{src:n?"dom":"data"}))._aData=e,t.aoData.push(r);for(var r=0,s=(e=t.aoColumns).length;r<s;r++)n&&x(t,a,r,S(t,a,r)),e[r].sType=null;return t.aiDisplayMaster.push(a),t.oFeatures.bDeferRender||k(t,a,n,i),a}function C(t,e){var n;return e instanceof o||(e=o(e)),e.map(function(e,o){return n=I(t,o),w(t,n.data,o,n.cells)})}function S(t,e,o,i){var o=t.aoColumns[o],a=t.aoData[e]._aData,r=o.fnGetData(a,i);if(r===n)return t.iDrawError!=t.iDraw&&null===o.sDefaultContent&&(kt(t,0,"Requested unknown parameter "+("function"==typeof o.mData?"{function}":"'"+o.mData+"'")+" for row "+e,4),t.iDrawError=t.iDraw),o.sDefaultContent;if(r!==a&&null!==r||null===o.sDefaultContent){if("function"==typeof r)return r()}else r=o.sDefaultContent;return null===r&&"display"==i?"":r}function x(t,e,n,o){t.aoColumns[n].fnSetData(t.aoData[e]._aData,o)}function _(t){return o.map(t.match(/(\\.|[^\.])+/g),function(t){return t.replace("\\.",".")})}function T(t){if(o.isPlainObject(t)){var e={};return o.each(t,function(t,n){n&&(e[t]=T(n))}),function(t,o,i){var a=e[o]||e._;return a!==n?a(t,o,i):t}}if(null===t)return function(t){return t};if("function"==typeof t)return function(e,n,o){return t(e,n,o)};if("string"==typeof t&&(-1!==t.indexOf(".")||-1!==t.indexOf("[")||-1!==t.indexOf("("))){var i=function(t,e,o){var a,r;if(""!==o)for(var s=0,l=(r=_(o)).length;s<l;s++){if(o=r[s].match(de),a=r[s].match(he),o){for(r[s]=r[s].replace(de,""),""!==r[s]&&(t=t[r[s]]),a=[],r.splice(0,s+1),r=r.join("."),s=0,l=t.length;s<l;s++)a.push(i(t[s],e,r));t=""===(t=o[0].substring(1,o[0].length-1))?a:a.join(t);break}if(a)r[s]=r[s].replace(he,""),t=t[r[s]]();else{if(null===t||t[r[s]]===n)return n;t=t[r[s]]}}return t};return function(e,n){return i(e,n,t)}}return function(e){return e[t]}}function D(t){if(o.isPlainObject(t))return D(t._);if(null===t)return function(){};if("function"==typeof t)return function(e,n){t(e,"set",n)};if("string"==typeof t&&(-1!==t.indexOf(".")||-1!==t.indexOf("[")||-1!==t.indexOf("("))){var e=function(t,o,i){var a;a=(i=_(i))[i.length-1];for(var r,s,l=0,c=i.length-1;l<c;l++){if(r=i[l].match(de),s=i[l].match(he),r){for(i[l]=i[l].replace(de,""),t[i[l]]=[],(a=i.slice()).splice(0,l+1),r=a.join("."),s=0,c=o.length;s<c;s++)a={},e(a,o[s],r),t[i[l]].push(a);return}s&&(i[l]=i[l].replace(he,""),t=t[i[l]](o)),null!==t[i[l]]&&t[i[l]]!==n||(t[i[l]]={}),t=t[i[l]]}a.match(he)?t[a.replace(he,"")](o):t[a.replace(de,"")]=o};return function(n,o){return e(n,o,t)}}return function(e,n){e[t]=n}}function E(t){return re(t.aoData,"_aData")}function N(t){t.aoData.length=0,t.aiDisplayMaster.length=0,t.aiDisplay.length=0}function A(t,e,o){for(var i=-1,a=0,r=t.length;a<r;a++)t[a]==e?i=a:t[a]>e&&t[a]--;-1!=i&&o===n&&t.splice(i,1)}function R(t,e,o,i){var a,r=t.aoData[e];if("dom"!==o&&(o&&"auto"!==o||"dom"!==r.src)){var s=r.anCells;if(s)for(o=0,a=s.length;o<a;o++)s[o].innerHTML=S(t,e,o,"display")}else r._aData=I(t,r).data;if(r._aSortData=null,r._aFilterData=null,t=t.aoColumns,i!==n)t[i].sType=null;else for(o=0,a=t.length;o<a;o++)t[o].sType=null;F(r)}function I(t,e){var n,i,a,r,s=[],l=[],c=e.firstChild,u=0,d=t.aoColumns,h=function(t,e,n){"string"==typeof t&&-1!==(e=t.indexOf("@"))&&(t=t.substring(e+1),a["@"+t]=n.getAttribute(t))},f=function(t){i=d[u],r=o.trim(t.innerHTML),i&&i._bAttrSrc?(a={display:r},h(i.mData.sort,a,t),h(i.mData.type,a,t),h(i.mData.filter,a,t),s.push(a)):s.push(r),l.push(t),u++};if(c)for(;c;)("TD"==(n=c.nodeName.toUpperCase())||"TH"==n)&&f(c),c=c.nextSibling;else for(c=0,n=(l=e.anCells).length;c<n;c++)f(l[c]);return{data:s,cells:l}}function k(t,n,o,i){var a,r,s,l,c,u=t.aoData[n],d=u._aData,h=[];if(null===u.nTr){for(a=o||e.createElement("tr"),u.nTr=a,u.anCells=h,a._DT_RowIndex=n,F(u),l=0,c=t.aoColumns.length;l<c;l++)s=t.aoColumns[l],r=o?i[l]:e.createElement(s.sCellType),h.push(r),o&&!s.mRender&&s.mData===l||(r.innerHTML=S(t,n,l,"display")),s.sClass&&(r.className+=" "+s.sClass),s.bVisible&&!o?a.appendChild(r):!s.bVisible&&o&&r.parentNode.removeChild(r),s.fnCreatedCell&&s.fnCreatedCell.call(t.oInstance,r,S(t,n,l,"display"),d,n,l);Bt(t,"aoRowCreatedCallback",null,[a,d,n])}u.nTr.setAttribute("role","row")}function F(t){var e=t.nTr,n=t._aData;if(e){if(n.DT_RowId&&(e.id=n.DT_RowId),n.DT_RowClass){var i=n.DT_RowClass.split(" ");t.__rowc=t.__rowc?ce(t.__rowc.concat(i)):i,o(e).removeClass(t.__rowc.join(" ")).addClass(n.DT_RowClass)}n.DT_RowData&&o(e).data(n.DT_RowData)}}function O(t){var e,n,i,a,r,s=t.nTHead,l=t.nTFoot,c=0===o("th, td",s).length,u=t.oClasses,d=t.aoColumns;for(c&&(a=o("<tr/>").appendTo(s)),e=0,n=d.length;e<n;e++)r=d[e],i=o(r.nTh).addClass(r.sClass),c&&i.appendTo(a),t.oFeatures.bSort&&(i.addClass(r.sSortingClass),!1!==r.bSortable&&(i.attr("tabindex",t.iTabIndex).attr("aria-controls",t.sTableId),Dt(t,r.nTh,e))),r.sTitle!=i.html()&&i.html(r.sTitle),Ht(t,"header")(t,i,r,u);if(c&&H(t.aoHeader,s),o(s).find(">tr").attr("role","row"),o(s).find(">tr>th, >tr>td").addClass(u.sHeaderTH),o(l).find(">tr>th, >tr>td").addClass(u.sFooterTH),null!==l)for(e=0,n=(t=t.aoFooter[0]).length;e<n;e++)r=d[e],r.nTf=t[e].cell,r.sClass&&o(r.nTf).addClass(r.sClass)}function L(t,e,i){var a,r,s,l,c=[],u=[],d=t.aoColumns.length;if(e){for(i===n&&(i=!1),a=0,r=e.length;a<r;a++){for(c[a]=e[a].slice(),c[a].nTr=e[a].nTr,s=d-1;0<=s;s--)!t.aoColumns[s].bVisible&&!i&&c[a].splice(s,1);u.push([])}for(a=0,r=c.length;a<r;a++){if(t=c[a].nTr)for(;s=t.firstChild;)t.removeChild(s);for(s=0,e=c[a].length;s<e;s++)if(l=d=1,u[a][s]===n){for(t.appendChild(c[a][s].cell),u[a][s]=1;c[a+d]!==n&&c[a][s].cell==c[a+d][s].cell;)u[a+d][s]=1,d++;for(;c[a][s+l]!==n&&c[a][s].cell==c[a][s+l].cell;){for(i=0;i<d;i++)u[a+i][s+l]=1;l++}o(c[a][s].cell).attr("rowspan",d).attr("colspan",l)}}}}function P(t){e=Bt(t,"aoPreDrawCallback","preDraw",[t]);if(-1!==o.inArray(!1,e))ut(t,!1);else{var e=[],i=0,a=t.asStripeClasses,r=a.length,s=t.oLanguage,l=t.iInitDisplayStart,c="ssp"==jt(t),u=t.aiDisplay;t.bDrawing=!0,l!==n&&-1!==l&&(t._iDisplayStart=c?l:l>=t.fnRecordsDisplay()?0:l,t.iInitDisplayStart=-1);var l=t._iDisplayStart,d=t.fnDisplayEnd();if(t.bDeferLoading)t.bDeferLoading=!1,t.iDraw++,ut(t,!1);else if(c){if(!t.bDestroying&&!W(t))return}else t.iDraw++;if(0!==u.length)for(s=c?t.aoData.length:d,c=c?0:l;c<s;c++){var h=u[c],f=t.aoData[h];if(null===f.nTr&&k(t,h),h=f.nTr,0!==r){var p=a[i%r];f._sRowStripe!=p&&(o(h).removeClass(f._sRowStripe).addClass(p),f._sRowStripe=p)}Bt(t,"aoRowCallback",null,[h,f._aData,i,c]),e.push(h),i++}else i=s.sZeroRecords,1==t.iDraw&&"ajax"==jt(t)?i=s.sLoadingRecords:s.sEmptyTable&&0===t.fnRecordsTotal()&&(i=s.sEmptyTable),e[0]=o("<tr/>",{class:r?a[0]:""}).append(o("<td />",{valign:"top",colSpan:g(t),class:t.oClasses.sRowEmpty}).html(i))[0];Bt(t,"aoHeaderCallback","header",[o(t.nTHead).children("tr")[0],E(t),l,d,u]),Bt(t,"aoFooterCallback","footer",[o(t.nTFoot).children("tr")[0],E(t),l,d,u]),(a=o(t.nTBody)).children().detach(),a.append(o(e)),Bt(t,"aoDrawCallback","draw",[t]),t.bSorted=!1,t.bFiltered=!1,t.bDrawing=!1}}function B(t,e){var n=t.oFeatures,o=n.bFilter;n.bSort&&xt(t),o?X(t,t.oPreviousSearch):t.aiDisplay=t.aiDisplayMaster.slice(),!0!==e&&(t._iDisplayStart=0),P(t)}function M(t){var e=t.oClasses,n=o(t.nTable),n=o("<div/>").insertBefore(n),i=t.oFeatures,a=o("<div/>",{id:t.sTableId+"_wrapper",class:e.sWrapper+(t.nTFoot?"":" "+e.sNoFooter)});t.nHolding=n[0],t.nTableWrapper=a[0],t.nTableReinsertBefore=t.nTable.nextSibling;for(var r,s,l,c,u,d,h=t.sDom.split(""),f=0;f<h.length;f++){if(r=null,"<"==(s=h[f])){if(l=o("<div/>")[0],"'"==(c=h[f+1])||'"'==c){for(u="",d=2;h[f+d]!=c;)u+=h[f+d],d++;"H"==u?u=e.sJUIHeader:"F"==u&&(u=e.sJUIFooter),-1!=u.indexOf(".")?(c=u.split("."),l.id=c[0].substr(1,c[0].length-1),l.className=c[1]):"#"==u.charAt(0)?l.id=u.substr(1,u.length-1):l.className=u,f+=d}a.append(l),a=o(l)}else if(">"==s)a=a.parent();else if("l"==s&&i.bPaginate&&i.bLengthChange)r=rt(t);else if("f"==s&&i.bFilter)r=U(t);else if("r"==s&&i.bProcessing)r=ct(t);else if("t"==s)r=dt(t);else if("i"==s&&i.bInfo)r=tt(t);else if("p"==s&&i.bPaginate)r=st(t);else if(0!==qt.ext.feature.length)for(d=0,c=(l=qt.ext.feature).length;d<c;d++)if(s==l[d].cFeature){r=l[d].fnInit(t);break}r&&((l=t.aanFeatures)[s]||(l[s]=[]),l[s].push(r),a.append(r))}n.replaceWith(a)}function H(t,e){var n,i,a,r,s,l,c,u,d,h,f=o(e).children("tr");for(t.splice(0,t.length),a=0,l=f.length;a<l;a++)t.push([]);for(a=0,l=f.length;a<l;a++)for(i=(n=f[a]).firstChild;i;){if("TD"==i.nodeName.toUpperCase()||"TH"==i.nodeName.toUpperCase()){for(u=1*i.getAttribute("colspan"),d=1*i.getAttribute("rowspan"),u=u&&0!==u&&1!==u?u:1,d=d&&0!==d&&1!==d?d:1,r=0,s=t[a];s[r];)r++;for(c=r,h=1===u,s=0;s<u;s++)for(r=0;r<d;r++)t[a+r][c+s]={cell:i,unique:h},t[a+r].nTr=n}i=i.nextSibling}}function j(t,e,n){var o=[];n||(n=t.aoHeader,e&&(n=[],H(n,e)));for(var e=0,i=n.length;e<i;e++)for(var a=0,r=n[e].length;a<r;a++)!n[e][a].unique||o[a]&&t.bSortCellsTop||(o[a]=n[e][a].cell);return o}function $(t,e,n){if(Bt(t,"aoServerParams","serverParams",[e]),e&&o.isArray(e)){var i={},a=/(.*?)\[\]$/;o.each(e,function(t,e){var n=e.name.match(a);n?(n=n[0],i[n]||(i[n]=[]),i[n].push(e.value)):i[e.name]=e.value}),e=i}var r,s=t.ajax,l=t.oInstance;if(o.isPlainObject(s)&&s.data){r=s.data;var c=o.isFunction(r)?r(e):r,e=o.isFunction(r)&&c?c:o.extend(!0,e,c);delete s.data}c={data:e,success:function(e){var o=e.error||e.sError;o&&t.oApi._fnLog(t,0,o),t.json=e,Bt(t,null,"xhr",[t,e]),n(e)},dataType:"json",cache:!1,type:t.sServerMethod,error:function(e,n){var o=t.oApi._fnLog;"parsererror"==n?o(t,0,"Invalid JSON response",1):4===e.readyState&&o(t,0,"Ajax error",7),ut(t,!1)}},t.oAjaxData=e,Bt(t,null,"preXhr",[t,e]),t.fnServerData?t.fnServerData.call(l,t.sAjaxSource,o.map(e,function(t,e){return{name:e,value:t}}),n,t):t.sAjaxSource||"string"==typeof s?t.jqXHR=o.ajax(o.extend(c,{url:s||t.sAjaxSource})):o.isFunction(s)?t.jqXHR=s.call(l,e,n,t):(t.jqXHR=o.ajax(o.extend(c,s)),s.data=r)}function W(t){if(t.bAjaxDataGet){t.iDraw++,ut(t,!0);var e=z(t);return $(t,e,function(e){q(t,e)},t),!1}return!0}function z(t){var e,n,i,a,r=t.aoColumns,s=r.length,l=t.oFeatures,c=t.oPreviousSearch,u=t.aoPreSearchCols,d=[],h=St(t);e=t._iDisplayStart,n=!1!==l.bPaginate?t._iDisplayLength:-1;var f=function(t,e){d.push({name:t,value:e})};f("sEcho",t.iDraw),f("iColumns",s),f("sColumns",re(r,"sName").join(",")),f("iDisplayStart",e),f("iDisplayLength",n);var p={draw:t.iDraw,columns:[],order:[],start:e,length:n,search:{value:c.sSearch,regex:c.bRegex}};for(e=0;e<s;e++)i=r[e],a=u[e],n="function"==typeof i.mData?"function":i.mData,p.columns.push({data:n,name:i.sName,searchable:i.bSearchable,orderable:i.bSortable,search:{value:a.sSearch,regex:a.bRegex}}),f("mDataProp_"+e,n),l.bFilter&&(f("sSearch_"+e,a.sSearch),f("bRegex_"+e,a.bRegex),f("bSearchable_"+e,i.bSearchable)),l.bSort&&f("bSortable_"+e,i.bSortable);return l.bFilter&&(f("sSearch",c.sSearch),f("bRegex",c.bRegex)),l.bSort&&(o.each(h,function(t,e){p.order.push({column:e.col,dir:e.dir}),f("iSortCol_"+t,e.col),f("sSortDir_"+t,e.dir)}),f("iSortingCols",h.length)),r=qt.ext.legacy.ajax,null===r?t.sAjaxSource?d:p:r?d:p}function q(t,e){var o=e.sEcho!==n?e.sEcho:e.draw,i=e.iTotalRecords!==n?e.iTotalRecords:e.recordsTotal,a=e.iTotalDisplayRecords!==n?e.iTotalDisplayRecords:e.recordsFiltered;if(o){if(1*o<t.iDraw)return;t.iDraw=1*o}for(N(t),t._iRecordsTotal=parseInt(i,10),t._iRecordsDisplay=parseInt(a,10),i=0,a=(o=V(t,e)).length;i<a;i++)w(t,o[i]);t.aiDisplay=t.aiDisplayMaster.slice(),t.bAjaxDataGet=!1,P(t),t._bInitComplete||it(t,e),t.bAjaxDataGet=!0,ut(t,!1)}function V(t,e){var i=o.isPlainObject(t.ajax)&&t.ajax.dataSrc!==n?t.ajax.dataSrc:t.sAjaxDataProp;return"data"===i?e.aaData||e[i]:""!==i?T(i)(e):e}function U(t){var n=t.oClasses,i=t.sTableId,a=t.oPreviousSearch,r=t.aanFeatures,s='<input type="search" class="'+n.sFilterInput+'"/>',l=(l=t.oLanguage.sSearch).match(/_INPUT_/)?l.replace("_INPUT_",s):l+s,n=o("<div/>",{id:r.f?null:i+"_filter",class:n.sFilter}).append(o("<label/>").append(l)),r=function(){var e=this.value?this.value:"";e!=a.sSearch&&(X(t,{sSearch:e,bRegex:a.bRegex,bSmart:a.bSmart,bCaseInsensitive:a.bCaseInsensitive}),t._iDisplayStart=0,P(t))},c=o("input",n).val(a.sSearch.replace('"',"&quot;")).bind("keyup.DT search.DT input.DT paste.DT cut.DT","ssp"===jt(t)?mt(r,400):r).bind("keypress.DT",function(t){if(13==t.keyCode)return!1}).attr("aria-controls",i);return o(t.nTable).on("filter.DT",function(){try{c[0]!==e.activeElement&&c.val(a.sSearch)}catch(t){}}),n[0]}function X(t,e,o){var i=t.oPreviousSearch,a=t.aoPreSearchCols,r=function(t){i.sSearch=t.sSearch,i.bRegex=t.bRegex,i.bSmart=t.bSmart,i.bCaseInsensitive=t.bCaseInsensitive};if(b(t),"ssp"!=jt(t)){for(J(t,e.sSearch,o,e.bEscapeRegex!==n?!e.bEscapeRegex:e.bRegex,e.bSmart,e.bCaseInsensitive),r(e),e=0;e<a.length;e++)Y(t,a[e].sSearch,e,a[e].bEscapeRegex!==n?!a[e].bEscapeRegex:a[e].bRegex,a[e].bSmart,a[e].bCaseInsensitive);G(t)}else r(e);t.bFiltered=!0,Bt(t,null,"search",[t])}function G(t){for(var e,n,o=qt.ext.search,i=t.aiDisplay,a=0,r=o.length;a<r;a++)for(var s=i.length-1;0<=s;s--)n=i[s],e=t.aoData[n],o[a](t,e._aFilterData,n,e._aData)||i.splice(s,1)}function Y(t,e,n,o,i,a){if(""!==e)for(var r=t.aiDisplay,o=K(e,o,i,a),i=r.length-1;0<=i;i--)e=t.aoData[r[i]]._aFilterData[n],o.test(e)||r.splice(i,1)}function J(t,e,n,o,i,a){var r,o=K(e,o,i,a),i=t.oPreviousSearch.sSearch,a=t.aiDisplayMaster;if(0!==qt.ext.search.length&&(n=!0),r=Z(t),0>=e.length)t.aiDisplay=a.slice();else for((r||n||i.length>e.length||0!==e.indexOf(i)||t.bSorted)&&(t.aiDisplay=a.slice()),n=(e=t.aiDisplay).length-1;0<=n;n--)o.test(t.aoData[e[n]]._sFilterRow)||e.splice(n,1)}function K(t,e,n,i){return t=e?t:Q(t),n&&(t="^(?=.*?"+o.map(t.match(/"[^"]+"|[^ ]+/g)||"",function(t){return'"'===t.charAt(0)?t.match(/^"(.*)"$/)[1]:t}).join(")(?=.*?")+").*$"),RegExp(t,i?"i":"")}function Q(t){return t.replace(Zt,"\\$1")}function Z(t){var e,n,o,i,a,r,s,l,c=t.aoColumns,u=qt.ext.type.search;for(e=!1,n=0,i=t.aoData.length;n<i;n++)if(!(l=t.aoData[n])._aFilterData){for(r=[],o=0,a=c.length;o<a;o++)e=c[o],e.bSearchable?(s=S(t,n,o,"filter"),s=u[e.sType]?u[e.sType](s):null!==s?s:""):s="",s.indexOf&&-1!==s.indexOf("&")&&(fe.innerHTML=s,s=pe?fe.textContent:fe.innerText),s.replace&&(s=s.replace(/[\r\n]/g,"")),r.push(s);l._aFilterData=r,l._sFilterRow=r.join("  "),e=!0}return e}function tt(t){var e=t.sTableId,n=t.aanFeatures.i,i=o("<div/>",{class:t.oClasses.sInfo,id:n?null:e+"_info"});return n||(t.aoDrawCallback.push({fn:et,sName:"information"}),i.attr("role","status").attr("aria-live","polite"),o(t.nTable).attr("aria-describedby",e+"_info")),i[0]}function et(t){var e=t.aanFeatures.i;if(0!==e.length){var n=t.oLanguage,i=t._iDisplayStart+1,a=t.fnDisplayEnd(),r=t.fnRecordsTotal(),s=t.fnRecordsDisplay(),l=s?n.sInfo:n.sInfoEmpty;s!==r&&(l+=" "+n.sInfoFiltered),l=nt(t,l+=n.sInfoPostFix),null!==(n=n.fnInfoCallback)&&(l=n.call(t.oInstance,t,i,a,r,s,l)),o(e).html(l)}}function nt(t,e){var n=t.fnFormatNumber,o=t._iDisplayStart+1,i=t._iDisplayLength,a=t.fnRecordsDisplay(),r=-1===i;return e.replace(/_START_/g,n.call(t,o)).replace(/_END_/g,n.call(t,t.fnDisplayEnd())).replace(/_MAX_/g,n.call(t,t.fnRecordsTotal())).replace(/_TOTAL_/g,n.call(t,a)).replace(/_PAGE_/g,n.call(t,r?1:Math.ceil(o/i))).replace(/_PAGES_/g,n.call(t,r?1:Math.ceil(a/i)))}function ot(t){var e,n,o,i=t.iInitDisplayStart,a=t.aoColumns;if(n=t.oFeatures,t.bInitialised){for(M(t),O(t),L(t,t.aoHeader),L(t,t.aoFooter),ut(t,!0),n.bAutoWidth&&pt(t),e=0,n=a.length;e<n;e++)(o=a[e]).sWidth&&(o.nTh.style.width=wt(o.sWidth));B(t),"ssp"!=(a=jt(t))&&("ajax"==a?$(t,[],function(n){var o=V(t,n);for(e=0;e<o.length;e++)w(t,o[e]);t.iInitDisplayStart=i,B(t),ut(t,!1),it(t,n)},t):(ut(t,!1),it(t)))}else setTimeout(function(){ot(t)},200)}function it(t,e){t._bInitComplete=!0,e&&f(t),Bt(t,"aoInitComplete","init",[t,e])}function at(t,e){var n=parseInt(e,10);t._iDisplayLength=n,Mt(t),Bt(t,null,"length",[t,n])}function rt(t){for(var e=t.oClasses,n=t.sTableId,i=t.aLengthMenu,a=(r=o.isArray(i[0]))?i[0]:i,r=r?i[1]:i,i=o("<select/>",{name:n+"_length","aria-controls":n,class:e.sLengthSelect}),s=0,l=a.length;s<l;s++)i[0][s]=new Option(r[s],a[s]);var c=o("<div><label/></div>").addClass(e.sLength);return t.aanFeatures.l||(c[0].id=n+"_length"),e=t.oLanguage.sLengthMenu.split(/(_MENU_)/),c.children().append(1<e.length?[e[0],i,e[2]]:e[0]),o("select",c).val(t._iDisplayLength).bind("change.DT",function(){at(t,o(this).val()),P(t)}),o(t.nTable).bind("length.dt.DT",function(t,e,n){o("select",c).val(n)}),c[0]}function st(t){var e=t.sPaginationType,n=qt.ext.pager[e],i="function"==typeof n,a=function(t){P(t)},e=o("<div/>").addClass(t.oClasses.sPaging+e)[0],r=t.aanFeatures;return i||n.fnInit(t,e,a),r.p||(e.id=t.sTableId+"_paginate",t.aoDrawCallback.push({fn:function(t){if(i){var e,o=t._iDisplayStart,s=t._iDisplayLength,l=t.fnRecordsDisplay(),o=(c=-1===s)?0:Math.ceil(o/s),s=c?1:Math.ceil(l/s),l=n(o,s),c=0;for(e=r.p.length;c<e;c++)Ht(t,"pageButton")(t,r.p[c],c,l,o,s)}else n.fnUpdate(t,a)},sName:"pagination"})),e}function lt(t,e,n){var o=t._iDisplayStart,i=t._iDisplayLength,a=t.fnRecordsDisplay();return 0===a||-1===i?o=0:"number"==typeof e?(o=e*i)>a&&(o=0):"first"==e?o=0:"previous"==e?0>(o=0<=i?o-i:0)&&(o=0):"next"==e?o+i<a&&(o+=i):"last"==e?o=Math.floor((a-1)/i)*i:kt(t,0,"Unknown paging action: "+e,5),e=t._iDisplayStart!==o,t._iDisplayStart=o,e&&(Bt(t,null,"page",[t]),n&&P(t)),e}function ct(t){return o("<div/>",{id:t.aanFeatures.r?null:t.sTableId+"_processing",class:t.oClasses.sProcessing}).html(t.oLanguage.sProcessing).insertBefore(t.nTable)[0]}function ut(t,e){t.oFeatures.bProcessing&&o(t.aanFeatures.r).css("display",e?"block":"none"),Bt(t,null,"processing",[t,e])}function dt(t){var e=o(t.nTable);e.attr("role","grid");var n=t.oScroll;if(""===n.sX&&""===n.sY)return t.nTable;var i=n.sX,a=n.sY,r=t.oClasses,s=e.children("caption"),l=s.length?s[0]._captionSide:null,c=o(e[0].cloneNode(!1)),u=o(e[0].cloneNode(!1)),d=e.children("tfoot");n.sX&&"100%"===e.attr("width")&&e.removeAttr("width"),d.length||(d=null),n=o("<div/>",{class:r.sScrollWrapper}).append(o("<div/>",{class:r.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:i?i?wt(i):null:"100%"}).append(o("<div/>",{class:r.sScrollHeadInner}).css({"box-sizing":"content-box",width:n.sXInner||"100%"}).append(c.removeAttr("id").css("margin-left",0).append(e.children("thead")))).append("top"===l?s:null)).append(o("<div/>",{class:r.sScrollBody}).css({overflow:"auto",height:a?wt(a):null,width:i?wt(i):null}).append(e)),d&&n.append(o("<div/>",{class:r.sScrollFoot}).css({overflow:"hidden",border:0,width:i?i?wt(i):null:"100%"}).append(o("<div/>",{class:r.sScrollFootInner}).append(u.removeAttr("id").css("margin-left",0).append(e.children("tfoot")))).append("bottom"===l?s:null));var h=(e=n.children())[0],r=e[1],f=d?e[2]:null;return i&&o(r).scroll(function(){var t=this.scrollLeft;h.scrollLeft=t,d&&(f.scrollLeft=t)}),t.nScrollHead=h,t.nScrollBody=r,t.nScrollFoot=f,t.aoDrawCallback.push({fn:ht,sName:"scrolling"}),n[0]}function ht(t){var e,n,i,a,r,s,l=t.oScroll,c=l.sX,u=l.sXInner,d=l.sY,h=l.iBarWidth,f=o(t.nScrollHead),m=f[0].style,g=(b=f.children("div"))[0].style,v=b.children("table"),b=t.nScrollBody,y=o(b),w=b.style,C=o(t.nScrollFoot).children("div"),S=C.children("table"),x=o(t.nTHead),_=o(t.nTable),T=_[0],D=T.style,E=t.nTFoot?o(t.nTFoot):null,N=t.oBrowser,A=N.bScrollOversize,R=[],I=[],k=[],F=function(t){(t=t.style).paddingTop="0",t.paddingBottom="0",t.borderTopWidth="0",t.borderBottomWidth="0",t.height=0};_.children("thead, tfoot").remove(),r=x.clone().prependTo(_),e=x.find("tr"),i=r.find("tr"),r.find("th, td").removeAttr("tabindex"),E&&(a=E.clone().prependTo(_),n=E.find("tr"),a=a.find("tr")),c||(w.width="100%",f[0].style.width="100%"),o.each(j(t,r),function(e,n){s=p(t,e),n.style.width=t.aoColumns[s].sWidth}),E&&ft(function(t){t.style.width=""},a),l.bCollapse&&""!==d&&(w.height=y[0].offsetHeight+x[0].offsetHeight+"px"),f=_.outerWidth(),""===c?(D.width="100%",A&&(_.find("tbody").height()>b.offsetHeight||"scroll"==y.css("overflow-y"))&&(D.width=wt(_.outerWidth()-h))):""!==u?D.width=wt(u):f==y.width()&&y.height()<_.height()?(D.width=wt(f-h),_.outerWidth()>f-h&&(D.width=wt(f))):D.width=wt(f),f=_.outerWidth(),ft(F,i),ft(function(t){k.push(t.innerHTML),R.push(wt(o(t).css("width")))},i),ft(function(t,e){t.style.width=R[e]},e),o(i).height(0),E&&(ft(F,a),ft(function(t){I.push(wt(o(t).css("width")))},a),ft(function(t,e){t.style.width=I[e]},n),o(a).height(0)),ft(function(t,e){t.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+k[e]+"</div>",t.style.width=R[e]},i),E&&ft(function(t,e){t.innerHTML="",t.style.width=I[e]},a),_.outerWidth()<f?(n=b.scrollHeight>b.offsetHeight||"scroll"==y.css("overflow-y")?f+h:f,A&&(b.scrollHeight>b.offsetHeight||"scroll"==y.css("overflow-y"))&&(D.width=wt(n-h)),(""===c||""!==u)&&kt(t,1,"Possible column misalignment",6)):n="100%",w.width=wt(n),m.width=wt(n),E&&(t.nScrollFoot.style.width=wt(n)),!d&&A&&(w.height=wt(T.offsetHeight+h)),d&&l.bCollapse&&(w.height=wt(d),l=c&&T.offsetWidth>b.offsetWidth?h:0,T.offsetHeight<b.offsetHeight&&(w.height=wt(T.offsetHeight+l))),l=_.outerWidth(),v[0].style.width=wt(l),g.width=wt(l),v=_.height()>b.clientHeight||"scroll"==y.css("overflow-y"),g[N="padding"+(N.bScrollbarLeft?"Left":"Right")]=v?h+"px":"0px",E&&(S[0].style.width=wt(l),C[0].style.width=wt(l),C[0].style[N]=v?h+"px":"0px"),y.scroll(),(t.bSorted||t.bFiltered)&&(b.scrollTop=0)}function ft(t,e,n){for(var o,i,a=0,r=0,s=e.length;r<s;){for(o=e[r].firstChild,i=n?n[r].firstChild:null;o;)1===o.nodeType&&(n?t(o,i,a):t(o,a),a++),o=o.nextSibling,i=n?i.nextSibling:null;r++}}function pt(e){var n,i,a=e.nTable,r=e.aoColumns,s=(d=e.oScroll).sY,l=d.sX,c=d.sXInner,u=r.length,d=v(e,"bVisible"),h=o("th",e.nTHead),p=a.getAttribute("width"),m=a.parentNode,b=!1;for(n=0;n<d.length;n++)null!==(i=r[d[n]]).sWidth&&(i.sWidth=gt(i.sWidthOrig,m),b=!0);if(b||l||s||u!=g(e)||u!=h.length){(u=o(a.cloneNode(!1)).css("visibility","hidden").removeAttr("id").append(o(e.nTHead).clone(!1)).append(o(e.nTFoot).clone(!1)).append(o("<tbody><tr/></tbody>"))).find("tfoot th, tfoot td").css("width","");var y=u.find("tbody tr"),h=j(e,u.find("thead")[0]);for(n=0;n<d.length;n++)i=r[d[n]],h[n].style.width=null!==i.sWidthOrig&&""!==i.sWidthOrig?wt(i.sWidthOrig):"";if(e.aoData.length)for(n=0;n<d.length;n++)b=d[n],i=r[b],o(bt(e,b)).clone(!1).append(i.sContentPadding).appendTo(y);if(u.appendTo(m),l&&c?u.width(c):l?(u.css("width","auto"),u.width()<m.offsetWidth&&u.width(m.offsetWidth)):s?u.width(m.offsetWidth):p&&u.width(p),vt(e,u[0]),l){for(n=c=0;n<d.length;n++)i=r[d[n]],s=o(h[n]).outerWidth(),c+=null===i.sWidthOrig?s:parseInt(i.sWidth,10)+s-o(h[n]).width();u.width(wt(c)),a.style.width=wt(c)}for(n=0;n<d.length;n++)i=r[d[n]],(s=o(h[n]).width())&&(i.sWidth=wt(s));a.style.width=wt(u.css("width")),u.remove()}else for(n=0;n<u;n++)r[n].sWidth=wt(h.eq(n).width());p&&(a.style.width=wt(p)),!p&&!l||e._reszEvt||(o(t).bind("resize.DT-"+e.sInstance,mt(function(){f(e)})),e._reszEvt=!0)}function mt(t,e){var o,i,a=e||200;return function(){var e=this,r=+new Date,s=arguments;o&&r<o+a?(clearTimeout(i),i=setTimeout(function(){o=n,t.apply(e,s)},a)):o?(o=r,t.apply(e,s)):o=r}}function gt(t,n){if(!t)return 0;var i=o("<div/>").css("width",wt(t)).appendTo(n||e.body),a=i[0].offsetWidth;return i.remove(),a}function vt(t,e){var n=t.oScroll;(n.sX||n.sY)&&(n=n.sX?0:n.iBarWidth,e.style.width=wt(o(e).outerWidth()-n))}function bt(t,e){var n=yt(t,e);if(0>n)return null;var i=t.aoData[n];return i.nTr?i.anCells[e]:o("<td/>").html(S(t,n,e,"display"))[0]}function yt(t,e){for(var n,o=-1,i=-1,a=0,r=t.aoData.length;a<r;a++)n=S(t,a,e,"display")+"",(n=n.replace(me,"")).length>o&&(o=n.length,i=a);return i}function wt(t){return null===t?"0px":"number"==typeof t?0>t?"0px":t+"px":t.match(/\d$/)?t+"px":t}function Ct(){if(!qt.__scrollbarWidth){var t=o("<p/>").css({width:"100%",height:200,padding:0})[0],e=o("<div/>").css({position:"absolute",top:0,left:0,width:200,height:150,padding:0,overflow:"hidden",visibility:"hidden"}).append(t).appendTo("body"),n=t.offsetWidth;e.css("overflow","scroll"),n===(t=t.offsetWidth)&&(t=e[0].clientWidth),e.remove(),qt.__scrollbarWidth=n-t}return qt.__scrollbarWidth}function St(t){var e,n,i,a,r,s,l=[],c=t.aoColumns;e=t.aaSortingFixed,n=o.isPlainObject(e);var u=[];for(i=function(t){t.length&&!o.isArray(t[0])?u.push(t):u.push.apply(u,t)},o.isArray(e)&&i(e),n&&e.pre&&i(e.pre),i(t.aaSorting),n&&e.post&&i(e.post),t=0;t<u.length;t++)for(e=0,n=(i=c[s=u[t][0]].aDataSort).length;e<n;e++)a=i[e],r=c[a].sType||"string",l.push({src:s,col:a,dir:u[t][1],index:u[t][2],type:r,formatter:qt.ext.type.order[r+"-pre"]});return l}function xt(t){var e,n,o,i,a=[],r=qt.ext.type.order,s=t.aoData,l=0,c=t.aiDisplayMaster;for(b(t),e=0,n=(i=St(t)).length;e<n;e++)(o=i[e]).formatter&&l++,Nt(t,o.col);if("ssp"!=jt(t)&&0!==i.length){for(e=0,n=c.length;e<n;e++)a[c[e]]=e;l===i.length?c.sort(function(t,e){var n,o,r,l,c=i.length,u=s[t]._aSortData,d=s[e]._aSortData;for(r=0;r<c;r++)if(l=i[r],n=u[l.col],o=d[l.col],0!==(n=n<o?-1:n>o?1:0))return"asc"===l.dir?n:-n;return n=a[t],o=a[e],n<o?-1:n>o?1:0}):c.sort(function(t,e){var n,o,l,c,u=i.length,d=s[t]._aSortData,h=s[e]._aSortData;for(l=0;l<u;l++)if(c=i[l],n=d[c.col],o=h[c.col],c=r[c.type+"-"+c.dir]||r["string-"+c.dir],0!==(n=c(n,o)))return n;return n=a[t],o=a[e],n<o?-1:n>o?1:0})}t.bSorted=!0}function _t(t){for(var e,n,o=t.aoColumns,i=St(t),t=t.oLanguage.oAria,a=0,r=o.length;a<r;a++){var s=(n=o[a]).asSorting;e=n.sTitle.replace(/<.*?>/g,"");var l=n.nTh;l.removeAttribute("aria-sort"),n.bSortable&&(0<i.length&&i[0].col==a?(l.setAttribute("aria-sort","asc"==i[0].dir?"ascending":"descending"),n=s[i[0].index+1]||s[0]):n=s[0],e+="asc"===n?t.sSortAscending:t.sSortDescending),l.setAttribute("aria-label",e)}}function Tt(t,e,i,a){var r=t.aaSorting,s=t.aoColumns[e].asSorting,l=function(t){var e=t._idx;return e===n&&(e=o.inArray(t[1],s)),e+1>=s.length?0:e+1};i&&t.oFeatures.bSortMulti?(i=o.inArray(e,re(r,"0")),-1!==i?(e=l(r[i]),r[i][1]=s[e],r[i]._idx=e):(r.push([e,s[0],0]),r[r.length-1]._idx=0)):r.length&&r[0][0]==e?(e=l(r[0]),r.length=1,r[0][1]=s[e],r[0]._idx=e):(r.length=0,r.push([e,s[0]]),r[0]._idx=0),B(t),"function"==typeof a&&a(t)}function Dt(t,e,n,o){var i=t.aoColumns[n];Lt(e,{},function(e){!1!==i.bSortable&&(t.oFeatures.bProcessing?(ut(t,!0),setTimeout(function(){Tt(t,n,e.shiftKey,o),"ssp"!==jt(t)&&ut(t,!1)},0)):Tt(t,n,e.shiftKey,o))})}function Et(t){var e,n,i=t.aLastSort,a=t.oClasses.sSortColumn,r=St(t),s=t.oFeatures;if(s.bSort&&s.bSortClasses){for(s=0,e=i.length;s<e;s++)n=i[s].src,o(re(t.aoData,"anCells",n)).removeClass(a+(2>s?s+1:3));for(s=0,e=r.length;s<e;s++)n=r[s].src,o(re(t.aoData,"anCells",n)).addClass(a+(2>s?s+1:3))}t.aLastSort=r}function Nt(t,e){var n,o=t.aoColumns[e],i=qt.ext.order[o.sSortDataType];i&&(n=i.call(t.oInstance,t,e,m(t,e)));for(var a,r=qt.ext.type.order[o.sType+"-pre"],s=0,l=t.aoData.length;s<l;s++)(o=t.aoData[s])._aSortData||(o._aSortData=[]),(!o._aSortData[e]||i)&&(a=i?n[s]:S(t,s,e,"sort"),o._aSortData[e]=r?r(a):a)}function At(t){if(t.oFeatures.bStateSave&&!t.bDestroying){var e={iCreate:+new Date,iStart:t._iDisplayStart,iLength:t._iDisplayLength,aaSorting:o.extend(!0,[],t.aaSorting),oSearch:o.extend(!0,{},t.oPreviousSearch),aoSearchCols:o.extend(!0,[],t.aoPreSearchCols),abVisCols:re(t.aoColumns,"bVisible")};Bt(t,"aoStateSaveParams","stateSaveParams",[t,e]),t.fnStateSaveCallback.call(t.oInstance,t,e)}}function Rt(t){var e,n,i=t.aoColumns;if(t.oFeatures.bStateSave){var a=t.fnStateLoadCallback.call(t.oInstance,t);if(a&&(e=Bt(t,"aoStateLoadParams","stateLoadParams",[t,a]),-1===o.inArray(!1,e)&&!(0<(e=t.iStateDuration)&&a.iCreate<+new Date-1e3*e)&&i.length===a.aoSearchCols.length)){t.oLoadedState=o.extend(!0,{},a),t._iDisplayStart=a.iStart,t.iInitDisplayStart=a.iStart,t._iDisplayLength=a.iLength,t.aaSorting=o.map(a.aaSorting,function(t){return t[0]>=i.length?[0,t[1]]:t}),o.extend(t.oPreviousSearch,a.oSearch),o.extend(!0,t.aoPreSearchCols,a.aoSearchCols);var r=a.abVisCols;for(e=0,n=r.length;e<n;e++)i[e].bVisible=r[e];Bt(t,"aoStateLoaded","stateLoaded",[t,a])}}}function It(t){var e=qt.settings;return-1!==(t=o.inArray(t,re(e,"nTable")))?e[t]:null}function kt(e,n,o,i){if(o="DataTables warning: "+(null!==e?"table id="+e.sTableId+" - ":"")+o,i&&(o+=". For more information about this error, please see http://datatables.net/tn/"+i),n)t.console&&console.log&&console.log(o);else{if("alert"!=((e=qt.ext).sErrMode||e.errMode))throw Error(o);alert(o)}}function Ft(t,e,i,a){o.isArray(i)?o.each(i,function(n,i){o.isArray(i)?Ft(t,e,i[0],i[1]):Ft(t,e,i)}):(a===n&&(a=i),e[i]!==n&&(t[a]=e[i]))}function Ot(t,e,n){var i,a;for(a in e)e.hasOwnProperty(a)&&(i=e[a],o.isPlainObject(i)?(o.isPlainObject(t[a])||(t[a]={}),o.extend(!0,t[a],i)):t[a]=n&&"data"!==a&&"aaData"!==a&&o.isArray(i)?i.slice():i);return t}function Lt(t,e,n){o(t).bind("click.DT",e,function(e){t.blur(),n(e)}).bind("keypress.DT",e,function(t){13===t.which&&(t.preventDefault(),n(t))}).bind("selectstart.DT",function(){return!1})}function Pt(t,e,n,o){n&&t[e].push({fn:n,sName:o})}function Bt(t,e,n,i){var a=[];return e&&(a=o.map(t[e].slice().reverse(),function(e){return e.fn.apply(t.oInstance,i)})),null!==n&&o(t.nTable).trigger(n+".dt",i),a}function Mt(t){var e=t._iDisplayStart,n=t.fnDisplayEnd(),o=t._iDisplayLength;n===t.fnRecordsDisplay()&&(e=n-o),(-1===o||0>e)&&(e=0),t._iDisplayStart=e}function Ht(t,e){var n=t.renderer,i=qt.ext.renderer[e];return o.isPlainObject(n)&&n[e]?i[n[e]]||i._:"string"==typeof n?i[n]||i._:i._}function jt(t){return t.oFeatures.bServerSide?"ssp":t.ajax||t.sAjaxSource?"ajax":"dom"}function $t(t,e){var n=[],n=Ae.numbers_length,o=Math.floor(n/2);return e<=n?n=le(0,e):t<=o?((n=le(0,n-2)).push("ellipsis"),n.push(e-1)):(t>=e-1-o?n=le(e-(n-2),e):((n=le(t-1,t+2)).push("ellipsis"),n.push(e-1)),n.splice(0,0,"ellipsis"),n.splice(0,0,0)),n.DT_el="span",n}function Wt(t){o.each({num:function(e){return Re(e,t)},"num-fmt":function(e){return Re(e,t,te)},"html-num":function(e){return Re(e,t,Kt)},"html-num-fmt":function(e){return Re(e,t,Kt,te)}},function(e,n){Vt.type.order[e+t+"-pre"]=n})}function zt(t){return function(){var e=[It(this[qt.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return qt.ext.internal[t].apply(this,e)}}var qt,Vt,Ut,Xt,Gt,Yt={},Jt=/[\r\n]/g,Kt=/<.*?>/g,Qt=/^[\d\+\-a-zA-Z]/,Zt=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),te=/[',$\u00a3\u20ac\u00a5%\u2009\u202F]/g,ee=function(t){return!t||"-"===t},ne=function(t){var e=parseInt(t,10);return!isNaN(e)&&isFinite(t)?e:null},oe=function(t,e){return Yt[e]||(Yt[e]=RegExp(Q(e),"g")),"string"==typeof t?t.replace(/\./g,"").replace(Yt[e],"."):t},ie=function(t,e,n){var o="string"==typeof t;return e&&o&&(t=oe(t,e)),n&&o&&(t=t.replace(te,"")),!t||"-"===t||!isNaN(parseFloat(t))&&isFinite(t)},ae=function(t,e,n){return!!ee(t)||(t&&"string"!=typeof t?null:!!ie(t.replace(Kt,""),e,n)||null)},re=function(t,e,o){var i=[],a=0,r=t.length;if(o!==n)for(;a<r;a++)t[a]&&t[a][e]&&i.push(t[a][e][o]);else for(;a<r;a++)t[a]&&i.push(t[a][e]);return i},se=function(t,e,o,i){var a=[],r=0,s=e.length;if(i!==n)for(;r<s;r++)a.push(t[e[r]][o][i]);else for(;r<s;r++)a.push(t[e[r]][o]);return a},le=function(t,e){var o,i=[];e===n?(e=0,o=t):(o=e,e=t);for(var a=e;a<o;a++)i.push(a);return i},ce=function(t){var e,n,o,i=[],a=t.length,r=0;n=0;t:for(;n<a;n++){for(e=t[n],o=0;o<r;o++)if(i[o]===e)continue t;i.push(e),r++}return i},ue=function(t,e,o){t[e]!==n&&(t[o]=t[e])},de=/\[.*?\]$/,he=/\(\)$/,fe=o("<div>")[0],pe=fe.textContent!==n,me=/<.*?>/g;qt=function(t){this.$=function(t,e){return this.api(!0).$(t,e)},this._=function(t,e){return this.api(!0).rows(t,e).data()},this.api=function(t){return new Ut(t?It(this[Vt.iApiIndex]):this)},this.fnAddData=function(t,e){var i=this.api(!0),a=o.isArray(t)&&(o.isArray(t[0])||o.isPlainObject(t[0]))?i.rows.add(t):i.row.add(t);return(e===n||e)&&i.draw(),a.flatten().toArray()},this.fnAdjustColumnSizing=function(t){var e=this.api(!0).columns.adjust(),o=e.settings()[0],i=o.oScroll;t===n||t?e.draw(!1):(""!==i.sX||""!==i.sY)&&ht(o)},this.fnClearTable=function(t){var e=this.api(!0).clear();(t===n||t)&&e.draw()},this.fnClose=function(t){this.api(!0).row(t).child.hide()},this.fnDeleteRow=function(t,e,o){var i=this.api(!0),a=(t=i.rows(t)).settings()[0],r=a.aoData[t[0][0]];return t.remove(),e&&e.call(this,a,r),(o===n||o)&&i.draw(),r},this.fnDestroy=function(t){this.api(!0).destroy(t)},this.fnDraw=function(t){this.api(!0).draw(!t)},this.fnFilter=function(t,e,o,i,a,r){a=this.api(!0),null===e||e===n?a.search(t,o,i,r):a.column(e).search(t,o,i,r),a.draw()},this.fnGetData=function(t,e){var o=this.api(!0);if(t!==n){var i=t.nodeName?t.nodeName.toLowerCase():"";return e!==n||"td"==i||"th"==i?o.cell(t,e).data():o.row(t).data()||null}return o.data().toArray()},this.fnGetNodes=function(t){var e=this.api(!0);return t!==n?e.row(t).node():e.rows().nodes().flatten().toArray()},this.fnGetPosition=function(t){var e=this.api(!0),n=t.nodeName.toUpperCase();return"TR"==n?e.row(t).index():"TD"==n||"TH"==n?(t=e.cell(t).index(),[t.row,t.columnVisible,t.column]):null},this.fnIsOpen=function(t){return this.api(!0).row(t).child.isShown()},this.fnOpen=function(t,e,n){return this.api(!0).row(t).child(e,n).show().child()[0]},this.fnPageChange=function(t,e){var o=this.api(!0).page(t);(e===n||e)&&o.draw(!1)},this.fnSetColumnVis=function(t,e,o){t=this.api(!0).column(t).visible(e),(o===n||o)&&t.columns.adjust().draw()},this.fnSettings=function(){return It(this[Vt.iApiIndex])},this.fnSort=function(t){this.api(!0).order(t).draw()},this.fnSortListener=function(t,e,n){this.api(!0).order.listener(t,e,n)},this.fnUpdate=function(t,e,o,i,a){var r=this.api(!0);return o===n||null===o?r.row(e).data(t):r.cell(e,o).data(t),(a===n||a)&&r.columns.adjust(),(i===n||i)&&r.draw(),0},this.fnVersionCheck=Vt.fnVersionCheck;var e=this,i=t===n,u=this.length;i&&(t={}),this.oApi=this.internal=Vt.internal;for(var f in qt.ext.internal)f&&(this[f]=zt(f));return this.each(function(){var f,p={},m=1<u?Ot(p,t,!0):t,g=0,v=this.getAttribute("id"),p=!1,b=qt.defaults;if("table"!=this.nodeName.toLowerCase())kt(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{s(b),l(b.column),a(b,b,!0),a(b.column,b.column,!0),a(b,m);g=0;for(f=(T=qt.settings).length;g<f;g++){if(T[g].nTable==this){if(f=m.bRetrieve!==n?m.bRetrieve:b.bRetrieve,i||f)return T[g].oInstance;if(m.bDestroy!==n?m.bDestroy:b.bDestroy){T[g].oInstance.fnDestroy();break}return void kt(T[g],0,"Cannot reinitialise DataTable",3)}if(T[g].sTableId==this.id){T.splice(g,1);break}}null!==v&&""!==v||(this.id=v="DataTables_Table_"+qt.ext._unique++);var S=o.extend(!0,{},qt.models.oSettings,{nTable:this,oApi:e.internal,oInit:m,sDestroyWidth:o(this)[0].style.width,sInstance:v,sTableId:v});T.push(S),S.oInstance=1===e.length?e:o(this).dataTable(),s(m),m.oLanguage&&r(m.oLanguage),m.aLengthMenu&&!m.iDisplayLength&&(m.iDisplayLength=o.isArray(m.aLengthMenu[0])?m.aLengthMenu[0][0]:m.aLengthMenu[0]),m=Ot(o.extend(!0,{},b),m),Ft(S.oFeatures,m,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" ")),Ft(S,m,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]),Ft(S.oScroll,m,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),Ft(S.oLanguage,m,"fnInfoCallback"),Pt(S,"aoDrawCallback",m.fnDrawCallback,"user"),Pt(S,"aoServerParams",m.fnServerParams,"user"),Pt(S,"aoStateSaveParams",m.fnStateSaveParams,"user"),Pt(S,"aoStateLoadParams",m.fnStateLoadParams,"user"),Pt(S,"aoStateLoaded",m.fnStateLoaded,"user"),Pt(S,"aoRowCallback",m.fnRowCallback,"user"),Pt(S,"aoRowCreatedCallback",m.fnCreatedRow,"user"),Pt(S,"aoHeaderCallback",m.fnHeaderCallback,"user"),Pt(S,"aoFooterCallback",m.fnFooterCallback,"user"),Pt(S,"aoInitComplete",m.fnInitComplete,"user"),Pt(S,"aoPreDrawCallback",m.fnPreDrawCallback,"user"),v=S.oClasses,m.bJQueryUI?(o.extend(v,qt.ext.oJUIClasses,m.oClasses),m.sDom===b.sDom&&"lfrtip"===b.sDom&&(S.sDom='<"H"lfr>t<"F"ip>'),S.renderer?o.isPlainObject(S.renderer)&&!S.renderer.header&&(S.renderer.header="jqueryui"):S.renderer="jqueryui"):o.extend(v,qt.ext.classes,m.oClasses),o(this).addClass(v.sTable),""===S.oScroll.sX&&""===S.oScroll.sY||(S.oScroll.iBarWidth=Ct()),!0===S.oScroll.sX&&(S.oScroll.sX="100%"),S.iInitDisplayStart===n&&(S.iInitDisplayStart=m.iDisplayStart,S._iDisplayStart=m.iDisplayStart),null!==m.iDeferLoading&&(S.bDeferLoading=!0,g=o.isArray(m.iDeferLoading),S._iRecordsDisplay=g?m.iDeferLoading[0]:m.iDeferLoading,S._iRecordsTotal=g?m.iDeferLoading[1]:m.iDeferLoading),""!==m.oLanguage.sUrl?(S.oLanguage.sUrl=m.oLanguage.sUrl,o.getJSON(S.oLanguage.sUrl,null,function(t){r(t),a(b.oLanguage,t),o.extend(!0,S.oLanguage,m.oLanguage,t),ot(S)}),p=!0):o.extend(!0,S.oLanguage,m.oLanguage),null===m.asStripeClasses&&(S.asStripeClasses=[v.sStripeOdd,v.sStripeEven]);var g=S.asStripeClasses,x=o("tbody tr:eq(0)",this);-1!==o.inArray(!0,o.map(g,function(t){return x.hasClass(t)}))&&(o("tbody tr",this).removeClass(g.join(" ")),S.asDestroyStripes=g.slice());var _,T=[];if(0!==(g=this.getElementsByTagName("thead")).length&&(H(S.aoHeader,g[0]),T=j(S)),null===m.aoColumns)for(_=[],g=0,f=T.length;g<f;g++)_.push(null);else _=m.aoColumns;for(g=0,f=_.length;g<f;g++)d(S,T?T[g]:null);if(y(S,m.aoColumnDefs,_,function(t,e){h(S,t,e)}),x.length){var D=function(t,e){return t.getAttribute("data-"+e)?e:null};o.each(I(S,x[0]).cells,function(t,e){var o=S.aoColumns[t];if(o.mData===t){var i=D(e,"sort")||D(e,"order"),a=D(e,"filter")||D(e,"search");null===i&&null===a||(o.mData={_:t+".display",sort:null!==i?t+".@data-"+i:n,type:null!==i?t+".@data-"+i:n,filter:null!==a?t+".@data-"+a:n},h(S,t))}})}var E=S.oFeatures;if(m.bStateSave&&(E.bStateSave=!0,Rt(S),Pt(S,"aoDrawCallback",At,"state_save")),m.aaSorting===n)for(g=0,f=(T=S.aaSorting).length;g<f;g++)T[g][1]=S.aoColumns[g].asSorting[0];if(Et(S),E.bSort&&Pt(S,"aoDrawCallback",function(){if(S.bSorted){var t=St(S),e={};o.each(t,function(t,n){e[n.src]=n.dir}),Bt(S,null,"order",[S,t,e]),_t(S)}}),Pt(S,"aoDrawCallback",function(){(S.bSorted||"ssp"===jt(S)||E.bDeferRender)&&Et(S)},"sc"),c(S),g=o(this).children("caption").each(function(){this._captionSide=o(this).css("caption-side")}),0===(f=o(this).children("thead")).length&&(f=o("<thead/>").appendTo(this)),S.nTHead=f[0],0===(f=o(this).children("tbody")).length&&(f=o("<tbody/>").appendTo(this)),S.nTBody=f[0],0===(f=o(this).children("tfoot")).length&&0<g.length&&(""!==S.oScroll.sX||""!==S.oScroll.sY)&&(f=o("<tfoot/>").appendTo(this)),0===f.length||0===f.children().length?o(this).addClass(v.sNoFooter):0<f.length&&(S.nTFoot=f[0],H(S.aoFooter,S.nTFoot)),m.aaData)for(g=0;g<m.aaData.length;g++)w(S,m.aaData[g]);else(S.bDeferLoading||"dom"==jt(S))&&C(S,o(S.nTBody).children("tr"));S.aiDisplay=S.aiDisplayMaster.slice(),S.bInitialised=!0,!1===p&&ot(S)}}),e=null,this};var ge=[],ve=Array.prototype,be=function(t){var e,n,i=qt.settings,a=o.map(i,function(t){return t.nTable});return t?t.nTable&&t.oApi?[t]:t.nodeName&&"table"===t.nodeName.toLowerCase()?(e=o.inArray(t,a),-1!==e?[i[e]]:null):t&&"function"==typeof t.settings?t.settings().toArray():("string"==typeof t?n=o(t):t instanceof o&&(n=t),n?n.map(function(){return e=o.inArray(this,a),-1!==e?i[e]:null}).toArray():void 0):[]};qt.Api=Ut=function(t,e){if(!this instanceof Ut)throw"DT API must be constructed as a new object";var n=[],i=function(t){(t=be(t))&&n.push.apply(n,t)};if(o.isArray(t))for(var a=0,r=t.length;a<r;a++)i(t[a]);else i(t);this.context=ce(n),e&&this.push.apply(this,e.toArray?e.toArray():e),this.selector={rows:null,cols:null,opts:null},Ut.extend(this,this,ge)},Ut.prototype={concat:ve.concat,context:[],each:function(t){if(ve.forEach)ve.forEach.call(this,t,this);else for(var e=0,n=this.length;e<n;e++)t.call(this,this[e],e,this);return this},eq:function(t){var e=this.context;return e.length>t?new Ut(e[t],this[t]):null},filter:function(t){var e=[];if(ve.filter)e=ve.filter.call(this,t,this);else for(var n=0,o=this.length;n<o;n++)t.call(this,this[n],n,this)&&e.push(this[n]);return new Ut(this.context,e)},flatten:function(){var t=[];return new Ut(this.context,t.concat.apply(t,this.toArray()))},join:ve.join,indexOf:ve.indexOf||function(t,e){for(var n=e||0,o=this.length;n<o;n++)if(this[n]===t)return n;return-1},iterator:function(t,e,o){var i,a,r,s,l,c,u,d=[],h=this.context,f=this.selector;for("string"==typeof t&&(o=e,e=t,t=!1),a=0,r=h.length;a<r;a++)if("table"===e)(i=o(h[a],a))!==n&&d.push(i);else if("columns"===e||"rows"===e)(i=o(h[a],this[a],a))!==n&&d.push(i);else if("column"===e||"column-rows"===e||"row"===e||"cell"===e)for(u=this[a],"column-rows"===e&&(c=xe(h[a],f.opts)),s=0,l=u.length;s<l;s++)i=u[s],(i="cell"===e?o(h[a],i.row,i.column,a,s):o(h[a],i,a,s,c))!==n&&d.push(i);return d.length?(t=new Ut(h,t?d.concat.apply([],d):d),e=t.selector,e.rows=f.rows,e.cols=f.cols,e.opts=f.opts,t):this},lastIndexOf:ve.lastIndexOf||function(t,e){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(t){var e=[];if(ve.map)e=ve.map.call(this,t,this);else for(var n=0,o=this.length;n<o;n++)e.push(t.call(this,this[n],n));return new Ut(this.context,e)},pluck:function(t){return this.map(function(e){return e[t]})},pop:ve.pop,push:ve.push,reduce:ve.reduce||function(t,e){return u(this,t,e,0,this.length,1)},reduceRight:ve.reduceRight||function(t,e){return u(this,t,e,this.length-1,-1,-1)},reverse:ve.reverse,selector:null,shift:ve.shift,sort:ve.sort,splice:ve.splice,toArray:function(){return ve.slice.call(this)},to$:function(){return o(this)},toJQuery:function(){return o(this)},unique:function(){return new Ut(this.context,ce(this))},unshift:ve.unshift},Ut.extend=function(t,e,n){if(e&&(e instanceof Ut||e.__dt_wrapper)){var i,a,r;for(i=0,a=n.length;i<a;i++)r=n[i],e[r.name]="function"==typeof r.val?function(e,n){return function(){var o=e.apply(t,arguments);return Ut.extend(o,o,n.methodExt),o}}(r.val,r):o.isPlainObject(r.val)?{}:r.val,e[r.name].__dt_wrapper=!0,Ut.extend(t,e[r.name],r.propExt)}},Ut.register=Xt=function(t,e){if(o.isArray(t))for(var n=0,i=t.length;n<i;n++)Ut.register(t[n],e);else{for(var a,r,s=t.split("."),l=ge,n=0,i=s.length;n<i;n++){a=(r=-1!==s[n].indexOf("()"))?s[n].replace("()",""):s[n];var c;t:{c=0;for(var u=l.length;c<u;c++)if(l[c].name===a){c=l[c];break t}c=null}c||(c={name:a,val:{},methodExt:[],propExt:[]},l.push(c)),n===i-1?c.val=e:l=r?c.methodExt:c.propExt}Ut.ready&&qt.api.build()}},Ut.registerPlural=Gt=function(t,e,i){Ut.register(t,i),Ut.register(e,function(){var t=i.apply(this,arguments);return t===this?this:t instanceof Ut?t.length?o.isArray(t[0])?new Ut(t.context,t[0]):t[0]:n:t})},Xt("tables()",function(t){var e;if(t){e=Ut;var n=this.context;if("number"==typeof t)t=[n[t]];else var i=o.map(n,function(t){return t.nTable}),t=o(i).filter(t).map(function(){var t=o.inArray(this,i);return n[t]}).toArray();e=new e(t)}else e=this;return e}),Xt("table()",function(t){var e=(t=this.tables(t)).context;return e.length?new Ut(e[0]):t}),Gt("tables().nodes()","table().node()",function(){return this.iterator("table",function(t){return t.nTable})}),Gt("tables().body()","table().body()",function(){return this.iterator("table",function(t){return t.nTBody})}),Gt("tables().header()","table().header()",function(){return this.iterator("table",function(t){return t.nTHead})}),Gt("tables().footer()","table().footer()",function(){return this.iterator("table",function(t){return t.nTFoot})}),Xt("draw()",function(t){return this.iterator("table",function(e){B(e,!1===t)})}),Xt("page()",function(t){return t===n?this.page.info().page:this.iterator("table",function(e){lt(e,t)})}),Xt("page.info()",function(){if(0===this.context.length)return n;var t=this.context[0],e=t._iDisplayStart,o=t._iDisplayLength,i=t.fnRecordsDisplay(),a=-1===o;return{page:a?0:Math.floor(e/o),pages:a?1:Math.ceil(i/o),start:e,end:t.fnDisplayEnd(),length:o,recordsTotal:t.fnRecordsTotal(),recordsDisplay:i}}),Xt("page.len()",function(t){return t===n?0!==this.context.length?this.context[0]._iDisplayLength:n:this.iterator("table",function(e){at(e,t)})});var ye=function(t,e,n){if("ssp"==jt(t)?B(t,e):(ut(t,!0),$(t,[],function(n){N(t);for(var o=0,i=(n=V(t,n)).length;o<i;o++)w(t,n[o]);B(t,e),ut(t,!1)})),n){var o=new Ut(t);o.one("draw",function(){n(o.ajax.json())})}};Xt("ajax.json()",function(){var t=this.context;if(0<t.length)return t[0].json}),Xt("ajax.params()",function(){var t=this.context;if(0<t.length)return t[0].oAjaxData}),Xt("ajax.reload()",function(t,e){return this.iterator("table",function(n){ye(n,!1===e,t)})}),Xt("ajax.url()",function(t){var e=this.context;return t===n?0===e.length?n:(e=e[0],e.ajax?o.isPlainObject(e.ajax)?e.ajax.url:e.ajax:e.sAjaxSource):this.iterator("table",function(e){o.isPlainObject(e.ajax)?e.ajax.url=t:e.ajax=t})}),Xt("ajax.url().load()",function(t,e){return this.iterator("table",function(n){ye(n,!1===e,t)})});var we=function(t,e){var i,a,r,s,l,c,u=[];for(t&&"string"!=typeof t&&t.length!==n||(t=[t]),r=0,s=t.length;r<s;r++)for(l=0,c=(a=t[r]&&t[r].split?t[r].split(","):[t[r]]).length;l<c;l++)(i=e("string"==typeof a[l]?o.trim(a[l]):a[l]))&&i.length&&u.push.apply(u,i);return u},Ce=function(t){return t||(t={}),t.filter&&!t.search&&(t.search=t.filter),{search:t.search||"none",order:t.order||"current",page:t.page||"all"}},Se=function(t){for(var e=0,n=t.length;e<n;e++)if(0<t[e].length)return t[0]=t[e],t.length=1,t.context=[t.context[e]],t;return t.length=0,t},xe=function(t,e){var n,i,a,r=[],s=t.aiDisplay;n=t.aiDisplayMaster;var l=e.search;if(i=e.order,a=e.page,"ssp"==jt(t))return"removed"===l?[]:le(0,n.length);if("current"==a)for(n=t._iDisplayStart,i=t.fnDisplayEnd();n<i;n++)r.push(s[n]);else if("current"==i||"applied"==i)r="none"==l?n.slice():"applied"==l?s.slice():o.map(n,function(t){return-1===o.inArray(t,s)?t:null});else if("index"==i||"original"==i)for(n=0,i=t.aoData.length;n<i;n++)"none"==l?r.push(n):(-1===(a=o.inArray(n,s))&&"removed"==l||1===a&&"applied"==l)&&r.push(n);return r};Xt("rows()",function(t,e){t===n?t="":o.isPlainObject(t)&&(e=t,t="");var e=Ce(e),i=this.iterator("table",function(n){var i=e;return we(t,function(t){if(null!==(a=ne(t))&&!i)return[a];var e=xe(n,i);if(null!==a&&-1!==o.inArray(a,e))return[a];if(!t)return e;for(var a=[],r=0,s=e.length;r<s;r++)a.push(n.aoData[e[r]].nTr);return t.nodeName&&-1!==o.inArray(t,a)?[t._DT_RowIndex]:o(a).filter(t).map(function(){return this._DT_RowIndex}).toArray()})});return i.selector.rows=t,i.selector.opts=e,i}),Xt("rows().nodes()",function(){return this.iterator("row",function(t,e){return t.aoData[e].nTr||n})}),Xt("rows().data()",function(){return this.iterator(!0,"rows",function(t,e){return se(t.aoData,e,"_aData")})}),Gt("rows().cache()","row().cache()",function(t){return this.iterator("row",function(e,n){var o=e.aoData[n];return"search"===t?o._aFilterData:o._aSortData})}),Gt("rows().invalidate()","row().invalidate()",function(t){return this.iterator("row",function(e,n){R(e,n,t)})}),Gt("rows().indexes()","row().index()",function(){return this.iterator("row",function(t,e){return e})}),Gt("rows().remove()","row().remove()",function(){var t=this;return this.iterator("row",function(e,n,i){var a=e.aoData;a.splice(n,1);for(var r=0,s=a.length;r<s;r++)null!==a[r].nTr&&(a[r].nTr._DT_RowIndex=r);o.inArray(n,e.aiDisplay),A(e.aiDisplayMaster,n),A(e.aiDisplay,n),A(t[i],n,!1),Mt(e)})}),Xt("rows.add()",function(t){var e=this.iterator("table",function(e){var n,o,i,a=[];for(o=0,i=t.length;o<i;o++)n=t[o],n.nodeName&&"TR"===n.nodeName.toUpperCase()?a.push(C(e,n)[0]):a.push(w(e,n));return a}),n=this.rows(-1);return n.pop(),n.push.apply(n,e.toArray()),n}),Xt("row()",function(t,e){return Se(this.rows(t,e))}),Xt("row().data()",function(t){var e=this.context;return t===n?e.length&&this.length?e[0].aoData[this[0]]._aData:n:(e[0].aoData[this[0]]._aData=t,R(e[0],this[0],"data"),this)}),Xt("row().node()",function(){var t=this.context;return t.length&&this.length?t[0].aoData[this[0]].nTr||null:null}),Xt("row.add()",function(t){t instanceof o&&t.length&&(t=t[0]);var e=this.iterator("table",function(e){return t.nodeName&&"TR"===t.nodeName.toUpperCase()?C(e,t)[0]:w(e,t)});return this.row(e[0])});var _e=function(t){var e=this.context;if(e.length&&this.length){var n=e[0].aoData[this[0]];if(n._details){(n._detailsShow=t)?n._details.insertAfter(n.nTr):n._details.remove();var o=e[0],i=new Ut(o);i.off("draw.dt.DT_details column-visibility.dt.DT_details"),0<re(o.aoData,"_details").length&&(i.on("draw.dt.DT_details",function(){i.rows({page:"current"}).eq(0).each(function(t){(t=o.aoData[t])._detailsShow&&t._details.insertAfter(t.nTr)})}),i.on("column-visibility.dt.DT_details",function(t,e){for(var n,o=g(e),i=0,a=e.aoData.length;i<a;i++)(n=e.aoData[i])._details&&n._details.children("td[colspan]").attr("colspan",o)}))}}return this};Xt("row().child()",function(t,e){a=this.context;if(t===n)return a.length&&this.length?a[0].aoData[this[0]]._details:n;if(a.length&&this.length){var i=a[0],a=a[0].aoData[this[0]],r=[],s=function(t,e){if(t.nodeName&&"tr"===t.nodeName.toLowerCase())r.push(t);else{var n=o("<tr><td/></tr>");o("td",n).addClass(e).html(t)[0].colSpan=g(i),r.push(n[0])}};if(o.isArray(t)||t instanceof o)for(var l=0,c=t.length;l<c;l++)s(t[l],e);else s(t,e);a._details&&a._details.remove(),a._details=o(r),a._detailsShow&&a._details.insertAfter(a.nTr)}return this}),Xt(["row().child.show()","row().child().show()"],function(){return _e.call(this,!0),this}),Xt(["row().child.hide()","row().child().hide()"],function(){return _e.call(this,!1),this}),Xt("row().child.isShown()",function(){var t=this.context;return!(!t.length||!this.length)&&(t[0].aoData[this[0]]._detailsShow||!1)});var Te=/^(.*):(name|visIdx|visible)$/;Xt("columns()",function(t,e){t===n?t="":o.isPlainObject(t)&&(e=t,t="");var e=Ce(e),i=this.iterator("table",function(e){var n=t,i=e.aoColumns,a=re(i,"sName"),r=re(i,"nTh");return we(n,function(t){var n=ne(t);if(""===t)return le(i.length);if(null!==n)return[n>=0?n:i.length+n];var s="string"==typeof t?t.match(Te):"";if(!s)return o(r).filter(t).map(function(){return o.inArray(this,r)}).toArray();switch(s[2]){case"visIdx":case"visible":return t=parseInt(s[1],10),t<0?(n=o.map(i,function(t,e){return t.bVisible?e:null}),[n[n.length+t]]):[p(e,t)];case"name":return o.map(a,function(t,e){return t===s[1]?e:null})}})});return i.selector.cols=t,i.selector.opts=e,i}),Gt("columns().header()","column().header()",function(){return this.iterator("column",function(t,e){return t.aoColumns[e].nTh})}),Gt("columns().footer()","column().footer()",function(){return this.iterator("column",function(t,e){return t.aoColumns[e].nTf})}),Gt("columns().data()","column().data()",function(){return this.iterator("column-rows",function(t,e,n,o,i){for(var n=[],o=0,a=i.length;o<a;o++)n.push(S(t,i[o],e,""));return n})}),Gt("columns().cache()","column().cache()",function(t){return this.iterator("column-rows",function(e,n,o,i,a){return se(e.aoData,a,"search"===t?"_aFilterData":"_aSortData",n)})}),Gt("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(t,e,n,o,i){return se(t.aoData,i,"anCells",e)})}),Gt("columns().visible()","column().visible()",function(t){return this.iterator("column",function(e,i){var a;if(t===n)a=e.aoColumns[i].bVisible;else{var r=e.aoColumns;a=r[i];var s,l,c,u=e.aoData;if(t===n)a=a.bVisible;else{if(a.bVisible!==t){if(t){var d=o.inArray(!0,re(r,"bVisible"),i+1);for(s=0,l=u.length;s<l;s++)c=u[s].nTr,r=u[s].anCells,c&&c.insertBefore(r[i],r[d]||null)}else o(re(e.aoData,"anCells",i)).detach(),a.bVisible=!1,L(e,e.aoHeader),L(e,e.aoFooter),At(e);a.bVisible=t,L(e,e.aoHeader),L(e,e.aoFooter),f(e),(e.oScroll.sX||e.oScroll.sY)&&ht(e),Bt(e,null,"column-visibility",[e,i,t]),At(e)}a=void 0}}return a})}),Gt("columns().indexes()","column().index()",function(t){return this.iterator("column",function(e,n){return"visible"===t?m(e,n):n})}),Xt("columns.adjust()",function(){return this.iterator("table",function(t){f(t)})}),Xt("column.index()",function(t,e){if(0!==this.context.length){var n=this.context[0];if("fromVisible"===t||"toData"===t)return p(n,e);if("fromData"===t||"toVisible"===t)return m(n,e)}}),Xt("column()",function(t,e){return Se(this.columns(t,e))}),Xt("cells()",function(t,e,i){if(o.isPlainObject(t)&&(t.row?(i=e,e=null):(i=t,t=null)),o.isPlainObject(e)&&(i=e,e=null),null===e||e===n)return this.iterator("table",function(e){var n,a,r,s,l,c=t,u=Ce(i),d=e.aoData,h=xe(e,u),u=se(d,h,"anCells"),f=o([].concat.apply([],u)),p=e.aoColumns.length;return we(c,function(t){if(!t){for(a=[],r=0,s=h.length;r<s;r++)for(n=h[r],l=0;l<p;l++)a.push({row:n,column:l});return a}return o.isPlainObject(t)?[t]:f.filter(t).map(function(t,e){return n=e.parentNode._DT_RowIndex,{row:n,column:o.inArray(e,d[n].anCells)}}).toArray()})});var a,r,s,l,c,u=this.columns(e,i),d=this.rows(t,i),h=this.iterator("table",function(t,e){for(a=[],r=0,s=d[e].length;r<s;r++)for(l=0,c=u[e].length;l<c;l++)a.push({row:d[e][r],column:u[e][l]});return a});return o.extend(h.selector,{cols:e,rows:t,opts:i}),h}),Gt("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(t,e,n){return t.aoData[e].anCells[n]})}),Xt("cells().data()",function(){return this.iterator("cell",function(t,e,n){return S(t,e,n)})}),Gt("cells().cache()","cell().cache()",function(t){return t="search"===t?"_aFilterData":"_aSortData",this.iterator("cell",function(e,n,o){return e.aoData[n][t][o]})}),Gt("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(t,e,n){return{row:e,column:n,columnVisible:m(t,n)}})}),Xt(["cells().invalidate()","cell().invalidate()"],function(t){var e=this.selector;return this.rows(e.rows,e.opts).invalidate(t),this}),Xt("cell()",function(t,e,n){return Se(this.cells(t,e,n))}),Xt("cell().data()",function(t){var e=this.context,o=this[0];return t===n?e.length&&o.length?S(e[0],o[0].row,o[0].column):n:(x(e[0],o[0].row,o[0].column,t),R(e[0],o[0].row,"data",o[0].column),this)}),Xt("order()",function(t,e){var i=this.context;return t===n?0!==i.length?i[0].aaSorting:n:("number"==typeof t?t=[[t,e]]:o.isArray(t[0])||(t=Array.prototype.slice.call(arguments)),this.iterator("table",function(e){e.aaSorting=t.slice()}))}),Xt("order.listener()",function(t,e,n){return this.iterator("table",function(o){Dt(o,t,e,n)})}),Xt(["columns().order()","column().order()"],function(t){var e=this;return this.iterator("table",function(n,i){var a=[];o.each(e[i],function(e,n){a.push([n,t])}),n.aaSorting=a})}),Xt("search()",function(t,e,i,a){var r=this.context;return t===n?0!==r.length?r[0].oPreviousSearch.sSearch:n:this.iterator("table",function(n){n.oFeatures.bFilter&&X(n,o.extend({},n.oPreviousSearch,{sSearch:t+"",bRegex:null!==e&&e,bSmart:null===i||i,bCaseInsensitive:null===a||a}),1)})}),Xt(["columns().search()","column().search()"],function(t,e,i,a){return this.iterator("column",function(r,s){var l=r.aoPreSearchCols;if(t===n)return l[s].sSearch;r.oFeatures.bFilter&&(o.extend(l[s],{sSearch:t+"",bRegex:null!==e&&e,bSmart:null===i||i,bCaseInsensitive:null===a||a}),X(r,r.oPreviousSearch,1))})}),qt.versionCheck=qt.fnVersionCheck=function(t){for(var e,n,o=qt.version.split("."),i=0,a=(t=t.split(".")).length;i<a;i++)if(e=parseInt(o[i],10)||0,n=parseInt(t[i],10)||0,e!==n)return e>n;return!0},qt.isDataTable=qt.fnIsDataTable=function(t){var e=o(t).get(0),n=!1;return o.each(qt.settings,function(t,o){o.nTable!==e&&o.nScrollHead!==e&&o.nScrollFoot!==e||(n=!0)}),n},qt.tables=qt.fnTables=function(t){return jQuery.map(qt.settings,function(e){if(!t||t&&o(e.nTable).is(":visible"))return e.nTable})},qt.camelToHungarian=a,Xt("$()",function(t,e){var n=this.rows(e).nodes(),n=o(n);return o([].concat(n.filter(t).toArray(),n.find(t).toArray()))}),o.each(["on","one","off"],function(t,e){Xt(e+"()",function(){var t=Array.prototype.slice.call(arguments);-1===t[0].indexOf(".dt")&&(t[0]+=".dt");var n=o(this.tables().nodes());return n[e].apply(n,t),this})}),Xt("clear()",function(){return this.iterator("table",function(t){N(t)})}),Xt("settings()",function(){return new Ut(this.context,this.context)}),Xt("data()",function(){return this.iterator("table",function(t){return re(t.aoData,"_aData")}).flatten()}),Xt("destroy()",function(e){return e=e||!1,this.iterator("table",function(n){var i,a=n.nTableWrapper.parentNode,r=n.oClasses,s=n.nTable,l=n.nTBody,c=n.nTHead,u=n.nTFoot,d=o(s),l=o(l),h=o(n.nTableWrapper),f=o.map(n.aoData,function(t){return t.nTr});n.bDestroying=!0,Bt(n,"aoDestroyCallback","destroy",[n]),e||new Ut(n).columns().visible(!0),h.unbind(".DT").find(":not(tbody *)").unbind(".DT"),o(t).unbind(".DT-"+n.sInstance),s!=c.parentNode&&(d.children("thead").detach(),d.append(c)),u&&s!=u.parentNode&&(d.children("tfoot").detach(),d.append(u)),d.detach(),h.detach(),n.aaSorting=[],n.aaSortingFixed=[],Et(n),o(f).removeClass(n.asStripeClasses.join(" ")),o("th, td",c).removeClass(r.sSortable+" "+r.sSortableAsc+" "+r.sSortableDesc+" "+r.sSortableNone),n.bJUI&&(o("th span."+r.sSortIcon+", td span."+r.sSortIcon,c).detach(),o("th, td",c).each(function(){var t=o("div."+r.sSortJUIWrapper,this);o(this).append(t.contents()),t.detach()})),!e&&a&&a.insertBefore(s,n.nTableReinsertBefore),l.children().detach(),l.append(f),d.css("width",n.sDestroyWidth).removeClass(r.sTable),(i=n.asDestroyStripes.length)&&l.children().each(function(t){o(this).addClass(n.asDestroyStripes[t%i])}),-1!==(a=o.inArray(n,qt.settings))&&qt.settings.splice(a,1)})}),qt.version="1.10.0",qt.settings=[],qt.models={},qt.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},qt.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null},qt.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},qt.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(t){try{return JSON.parse((-1===t.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+t.sInstance+"_"+location.pathname))}catch(t){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(t,e){try{(-1===t.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+t.sInstance+"_"+location.pathname,JSON.stringify(e))}catch(t){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:o.extend({},qt.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null},i(qt.defaults),qt.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},i(qt.defaults.column),qt.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:n,oAjaxData:n,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==jt(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==jt(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var t=this._iDisplayLength,e=this._iDisplayStart,n=e+t,o=this.aiDisplay.length,i=this.oFeatures,a=i.bPaginate;return i.bServerSide?!1===a||-1===t?e+o:Math.min(e+t,this._iRecordsDisplay):!a||n>o||-1===t?o:n},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{}},qt.ext=Vt={classes:{},errMode:"alert",feature:[],search:[],internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:qt.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:qt.version},o.extend(Vt,{afnFiltering:Vt.search,aTypes:Vt.type.detect,ofnSearch:Vt.type.search,oSort:Vt.type.order,afnSortData:Vt.order,aoFeatures:Vt.feature,oApi:Vt.internal,oStdClasses:Vt.classes,oPagination:Vt.pager}),o.extend(qt.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var De="ui-state-default",Ee="css_right ui-icon ui-icon-",Ne="fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";o.extend(qt.ext.oJUIClasses,qt.ext.classes,{sPageButton:"fg-button ui-button "+De,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:De+" sorting_asc",sSortDesc:De+" sorting_desc",sSortable:De+" sorting",sSortableAsc:De+" sorting_asc_disabled",sSortableDesc:De+" sorting_desc_disabled",sSortableNone:De+" sorting_disabled",sSortJUIAsc:Ee+"triangle-1-n",sSortJUIDesc:Ee+"triangle-1-s",sSortJUI:Ee+"carat-2-n-s",sSortJUIAscAllowed:Ee+"carat-1-n",sSortJUIDescAllowed:Ee+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+De,sScrollFoot:"dataTables_scrollFoot "+De,sHeaderTH:De,sFooterTH:De,sJUIHeader:Ne+" ui-corner-tl ui-corner-tr",sJUIFooter:Ne+" ui-corner-bl ui-corner-br"});var Ae=qt.ext.pager;o.extend(Ae,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},simple_numbers:function(t,e){return["previous",$t(t,e),"next"]},full_numbers:function(t,e){return["first","previous",$t(t,e),"next","last"]},_numbers:$t,numbers_length:7}),o.extend(!0,qt.ext.renderer,{pageButton:{_:function(t,n,i,a,r,s){var l,c,u=t.oClasses,d=t.oLanguage.oPaginate,h=0,f=function(e,n){var a,p,m,g,v=function(e){lt(t,e.data.action,!0)};for(a=0,p=n.length;a<p;a++)if(g=n[a],o.isArray(g))m=o("<"+(g.DT_el||"div")+"/>").appendTo(e),f(m,g);else{switch(c=l="",g){case"ellipsis":e.append("<span>&hellip;</span>");break;case"first":l=d.sFirst,c=g+(r>0?"":" "+u.sPageButtonDisabled);break;case"previous":l=d.sPrevious,c=g+(r>0?"":" "+u.sPageButtonDisabled);break;case"next":l=d.sNext,c=g+(r<s-1?"":" "+u.sPageButtonDisabled);break;case"last":l=d.sLast,c=g+(r<s-1?"":" "+u.sPageButtonDisabled);break;default:l=g+1,c=r===g?u.sPageButtonActive:""}l&&(Lt(m=o("<a>",{class:u.sPageButton+" "+c,"aria-controls":t.sTableId,"data-dt-idx":h,tabindex:t.iTabIndex,id:0===i&&"string"==typeof g?t.sTableId+"_"+g:null}).html(l).appendTo(e),{action:g},v),h++)}},p=o(e.activeElement).data("dt-idx");f(o(n).empty(),a),null!==p&&o(n).find("[data-dt-idx="+p+"]").focus()}}});var Re=function(t,e,n,o){return t&&"-"!==t?(e&&(t=oe(t,e)),t.replace&&(n&&(t=t.replace(n,"")),o&&(t=t.replace(o,""))),1*t):-1/0};return o.extend(Vt.type.order,{"date-pre":function(t){return Date.parse(t)||0},"html-pre":function(t){return t?t.replace?t.replace(/<.*?>/g,"").toLowerCase():t+"":""},"string-pre":function(t){return"string"==typeof t?t.toLowerCase():t&&t.toString?t.toString():""},"string-asc":function(t,e){return t<e?-1:t>e?1:0},"string-desc":function(t,e){return t<e?1:t>e?-1:0}}),Wt(""),o.extend(qt.ext.type.detect,[function(t,e){var n=e.oLanguage.sDecimal;return ie(t,n)?"num"+n:null},function(t){if(t&&!Qt.test(t))return null;var e=Date.parse(t);return null!==e&&!isNaN(e)||ee(t)?"date":null},function(t,e){var n=e.oLanguage.sDecimal;return ie(t,n,!0)?"num-fmt"+n:null},function(t,e){var n=e.oLanguage.sDecimal;return ae(t,n)?"html-num"+n:null},function(t,e){var n=e.oLanguage.sDecimal;return ae(t,n,!0)?"html-num-fmt"+n:null},function(t){return ee(t)||"string"==typeof t&&-1!==t.indexOf("<")?"html":null}]),o.extend(qt.ext.type.search,{html:function(t){return ee(t)?"":"string"==typeof t?t.replace(Jt," ").replace(Kt,""):""},string:function(t){return ee(t)?"":"string"==typeof t?t.replace(Jt," "):t}}),o.extend(!0,qt.ext.renderer,{header:{_:function(t,e,n,i){o(t.nTable).on("order.dt.DT",function(t,o,a,r){t=n.idx,e.removeClass(n.sSortingClass+" "+i.sSortAsc+" "+i.sSortDesc).addClass("asc"==r[t]?i.sSortAsc:"desc"==r[t]?i.sSortDesc:n.sSortingClass)})},jqueryui:function(t,e,n,i){var a=n.idx;o("<div/>").addClass(i.sSortJUIWrapper).append(e.contents()).append(o("<span/>").addClass(i.sSortIcon+" "+n.sSortingClassJUI)).appendTo(e),o(t.nTable).on("order.dt.DT",function(t,o,r,s){e.removeClass(i.sSortAsc+" "+i.sSortDesc).addClass("asc"==s[a]?i.sSortAsc:"desc"==s[a]?i.sSortDesc:n.sSortingClass),e.find("span."+i.sSortIcon).removeClass(i.sSortJUIAsc+" "+i.sSortJUIDesc+" "+i.sSortJUI+" "+i.sSortJUIAscAllowed+" "+i.sSortJUIDescAllowed).addClass("asc"==s[a]?i.sSortJUIAsc:"desc"==s[a]?i.sSortJUIDesc:n.sSortingClassJUI)})}}}),qt.render={number:function(t,e,n,o){return{display:function(i){var i=parseFloat(i),a=parseInt(i,10),i=n?(e+(i-a).toFixed(n)).substring(2):"";return(o||"")+a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,t)+i}}}},o.extend(qt.ext.internal,{_fnExternApiFunc:zt,_fnBuildAjax:$,_fnAjaxUpdate:W,_fnAjaxParameters:z,_fnAjaxUpdateDraw:q,_fnAjaxDataSrc:V,_fnAddColumn:d,_fnColumnOptions:h,_fnAdjustColumnSizing:f,_fnVisibleToColumnIndex:p,_fnColumnIndexToVisible:m,_fnVisbleColumns:g,_fnGetColumns:v,_fnColumnTypes:b,_fnApplyColumnDefs:y,_fnHungarianMap:i,_fnCamelToHungarian:a,_fnLanguageCompat:r,_fnBrowserDetect:c,_fnAddData:w,_fnAddTr:C,_fnNodeToDataIndex:function(t,e){return e._DT_RowIndex!==n?e._DT_RowIndex:null},_fnNodeToColumnIndex:function(t,e,n){return o.inArray(n,t.aoData[e].anCells)},_fnGetCellData:S,_fnSetCellData:x,_fnSplitObjNotation:_,_fnGetObjectDataFn:T,_fnSetObjectDataFn:D,_fnGetDataMaster:E,_fnClearTable:N,_fnDeleteIndex:A,_fnInvalidateRow:R,_fnGetRowElements:I,_fnCreateTr:k,_fnBuildHead:O,_fnDrawHead:L,_fnDraw:P,_fnReDraw:B,_fnAddOptionsHtml:M,_fnDetectHeader:H,_fnGetUniqueThs:j,_fnFeatureHtmlFilter:U,_fnFilterComplete:X,_fnFilterCustom:G,_fnFilterColumn:Y,_fnFilter:J,_fnFilterCreateSearch:K,_fnEscapeRegex:Q,_fnFilterData:Z,_fnFeatureHtmlInfo:tt,_fnUpdateInfo:et,_fnInfoMacros:nt,_fnInitialise:ot,_fnInitComplete:it,_fnLengthChange:at,_fnFeatureHtmlLength:rt,_fnFeatureHtmlPaginate:st,_fnPageChange:lt,_fnFeatureHtmlProcessing:ct,_fnProcessingDisplay:ut,_fnFeatureHtmlTable:dt,_fnScrollDraw:ht,_fnApplyToChildren:ft,_fnCalculateColumnWidths:pt,_fnThrottle:mt,_fnConvertToWidth:gt,_fnScrollingWidthAdjust:vt,_fnGetWidestNode:bt,_fnGetMaxLenString:yt,_fnStringToCss:wt,_fnScrollBarWidth:Ct,_fnSortFlatten:St,_fnSort:xt,_fnSortAria:_t,_fnSortListener:Tt,_fnSortAttachListener:Dt,_fnSortingClasses:Et,_fnSortData:Nt,_fnSaveState:At,_fnLoadState:Rt,_fnSettingsFromNode:It,_fnLog:kt,_fnMap:Ft,_fnBindAction:Lt,_fnCallbackReg:Pt,_fnCallbackFire:Bt,_fnLengthOverflow:Mt,_fnRenderer:Ht,_fnDataSource:jt,_fnRowAttributes:F,_fnCalculateEnd:function(){}}),o.fn.dataTable=qt,o.fn.dataTableSettings=qt.settings,o.fn.dataTableExt=qt.ext,o.fn.DataTable=function(t){return o(this).dataTable(t).api()},o.each(qt,function(t,e){o.fn.DataTable[t]=e}),o.fn.dataTable};"function"==typeof define&&define.amd?define("datatables",["jquery"],o):"object"==typeof exports?o(require("jquery")):jQuery&&!jQuery.fn.dataTable&&o(jQuery)}(window,document),function(t,e){"use strict";var n=function(t,e){return{"font-styles":"<li class='dropdown'><a class='btn btn-default dropdown-toggle' data-toggle='dropdown' href='#'><i class='fa fa-font'></i>&nbsp;<span class='current-font'>"+e.font_styles.normal+"</span>&nbsp;<b class='caret'></b></a><ul class='dropdown-menu'><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='div'>"+e.font_styles.normal+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h1'>"+e.font_styles.h1+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h2'>"+e.font_styles.h2+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h3'>"+e.font_styles.h3+"</a></li></ul></li>",emphasis:"<li><div class='btn-group'><a class='btn btn-default' data-wysihtml5-command='bold' title='CTRL+B'>"+e.emphasis.bold+"</a><a class='btn btn-default' data-wysihtml5-command='italic' title='CTRL+I'>"+e.emphasis.italic+"</a><a class='btn btn-default' data-wysihtml5-command='underline' title='CTRL+U'>"+e.emphasis.underline+"</a></div></li>",lists:"<li><div class='btn-group'><a class='btn btn-default' data-wysihtml5-command='insertUnorderedList' title='"+e.lists.unordered+"'><i class='fa fa-list'></i></a><a class='btn btn-default' data-wysihtml5-command='insertOrderedList' title='"+e.lists.ordered+"'><i class='fa fa-th-list'></i></a><a class='btn btn-default' data-wysihtml5-command='Outdent' title='"+e.lists.outdent+"'><i class='fa fa-outdent'></i></a><a class='btn btn-default' data-wysihtml5-command='Indent' title='"+e.lists.indent+"'><i class='fa fa-indent'></i></a></div></li>",link:"<li><div class='bootstrap-wysihtml5-insert-link-modal modal  fade'><div class='modal-dialog'> <div class='modal-content'><div class='modal-header vd_bg-green vd_white'><button aria-hidden='true' data-dismiss='modal' class='close' type='button'><i class='fa fa-times'></i></button><h4 id='myModalLabel' class='modal-title'>"+e.link.insert+"</h4></div><div class='modal-body'><input value='http://' class='bootstrap-wysihtml5-insert-link-url input-border-btm input-lg width-100'></div><div class='modal-footer background-login'><a href='#' class='btn' data-dismiss='modal'>"+e.link.cancel+"</a><a href='#' class='btn vd_btn vd_bg-blue' data-dismiss='modal'>"+e.link.insert+"</a></div></div> </div></div><a class='btn btn-default' data-wysihtml5-command='createLink' title='"+e.link.insert+"'><i class='fa fa-share'></i></a></li>",image:"<li><div class='bootstrap-wysihtml5-insert-image-modal modal fade'><div class='modal-dialog'> <div class='modal-content'><div class='modal-header vd_bg-green vd_white'><button aria-hidden='true' data-dismiss='modal' class='close' type='button'><i class='fa fa-times'></i></button><h4 id='myModalLabel' class='modal-title'>"+e.image.insert+"</h4></div><div class='modal-body'><input   value='http://' class='bootstrap-wysihtml5-insert-image-url input-border-btm input-lg width-100'></div><div class='modal-footer background-login'><a href='#' class='btn' data-dismiss='modal'>"+e.image.cancel+"</a><a href='#' class='btn vd_btn vd_bg-blue' data-dismiss='modal'>"+e.image.insert+"</a></div></div> </div></div><a class='btn btn-default' data-wysihtml5-command='insertImage' title='"+e.image.insert+"'><i class='fa fa-image'></i></a></li>",html:"<li><div class='btn-group'><a class='btn' data-wysihtml5-action='change_view' title='"+e.html.edit+"'><i class='fa fa-pencil'></i></a></div></li>",color:"<li class='dropdown'><a class='btn dropdown-toggle' data-toggle='dropdown' href='#'><span class='current-color'>"+e.colours.black+"</span>&nbsp;<b class='caret'></b></a><ul class='dropdown-menu'><li><div class='wysihtml5-colors' data-wysihtml5-command-value='black'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='black'>"+e.colours.black+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='silver'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='silver'>"+e.colours.silver+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='gray'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='gray'>"+e.colours.gray+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='maroon'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='maroon'>"+e.colours.maroon+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='red'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='red'>"+e.colours.red+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='purple'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='purple'>"+e.colours.purple+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='green'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='green'>"+e.colours.green+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='olive'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='olive'>"+e.colours.olive+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='navy'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='navy'>"+e.colours.navy+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='blue'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='blue'>"+e.colours.blue+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='orange'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='orange'>"+e.colours.orange+"</a></li></ul></li>"}[t]},o=function(e,n){this.el=e,this.toolbar=this.createToolbar(e,n||a),this.editor=this.createEditor(n),window.editor=this.editor,t("iframe.wysihtml5-sandbox").each(function(e,n){t(n.contentWindow).off("focus.wysihtml5").on({"focus.wysihtml5":function(){t("li.dropdown").removeClass("open")}})})};o.prototype={constructor:o,createEditor:function(t){(t=t||{}).toolbar=this.toolbar[0];var n=new e.Editor(this.el[0],t);if(t&&t.events)for(var o in t.events)n.on(o,t.events[o]);return n},createToolbar:function(e,o){var i=this,s=t("<ul/>",{class:"wysihtml5-toolbar",style:"display:none"}),l=o.locale||a.locale||"en";for(var c in a){var u=!1;void 0!==o[c]?!0===o[c]&&(u=!0):u=a[c],!0===u&&(s.append(n(c,r[l])),"html"===c&&this.initHtml(s),"link"===c&&this.initInsertLink(s),"image"===c&&this.initInsertImage(s))}if(o.toolbar)for(c in o.toolbar)s.append(o.toolbar[c]);return s.find("a[data-wysihtml5-command='formatBlock']").click(function(e){var n=e.target||e.srcElement,o=t(n);i.toolbar.find(".current-font").text(o.html())}),s.find("a[data-wysihtml5-command='foreColor']").click(function(e){var n=e.target||e.srcElement,o=t(n);i.toolbar.find(".current-color").text(o.html())}),this.el.before(s),s},initHtml:function(t){t.find("a[data-wysihtml5-action='change_view']").click(function(e){t.find("a.btn").not("a[data-wysihtml5-action='change_view']").toggleClass("disabled")})},initInsertImage:function(e){var n=this,o=e.find(".bootstrap-wysihtml5-insert-image-modal"),i=o.find(".bootstrap-wysihtml5-insert-image-url"),a=o.find("a.btn-primary"),r=i.val(),s=function(){var t=i.val();i.val(r),n.editor.composer.commands.exec("insertImage",t)};i.keypress(function(t){13==t.which&&(s(),o.modal("hide"))}),a.click(s),o.on("shown",function(){i.focus()}),o.on("hide",function(){n.editor.currentView.element.focus()}),e.find("a[data-wysihtml5-command=insertImage]").click(function(){return!!t(this).hasClass("wysihtml5-command-active")||(o.modal("show"),o.on("click.dismiss.modal",'[data-dismiss="modal"]',function(t){t.stopPropagation()}),!1)})},initInsertLink:function(e){var n=this,o=e.find(".bootstrap-wysihtml5-insert-link-modal"),i=o.find(".bootstrap-wysihtml5-insert-link-url"),a=o.find("a.btn-primary"),r=i.val(),s=function(){var t=i.val();i.val(r),n.editor.composer.commands.exec("createLink",{href:t,target:"_blank",rel:"nofollow"})};i.keypress(function(t){13==t.which&&(s(),o.modal("hide"))}),a.click(s),o.on("shown",function(){i.focus()}),o.on("hide",function(){n.editor.currentView.element.focus()}),e.find("a[data-wysihtml5-command=createLink]").click(function(){return!!t(this).hasClass("wysihtml5-command-active")||(o.appendTo("body").modal("show"),o.on("click.dismiss.modal",'[data-dismiss="modal"]',function(t){t.stopPropagation()}),!1)})}};var i={resetDefaults:function(){t.fn.wysihtml5.defaultOptions=t.extend(!0,{},t.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(e){return this.each(function(){var n=t(this);n.data("wysihtml5",new o(n,e))})},shallowExtend:function(e){var n=t.extend({},t.fn.wysihtml5.defaultOptions,e||{}),o=this;return i.bypassDefaults.apply(o,[n])},deepExtend:function(e){var n=t.extend(!0,{},t.fn.wysihtml5.defaultOptions,e||{}),o=this;return i.bypassDefaults.apply(o,[n])},init:function(t){var e=this;return i.shallowExtend.apply(e,[t])}};t.fn.wysihtml5=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.wysihtml5"):i.init.apply(this,arguments)},t.fn.wysihtml5.Constructor=o;var a=t.fn.wysihtml5.defaultOptions={"font-styles":!0,color:!1,emphasis:!0,lists:!0,html:!1,link:!0,image:!0,events:{},parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{b:{},i:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{set_attributes:{target:"_blank",rel:"nofollow"},check_attributes:{href:"url"}},span:1,div:1}},stylesheets:["./plugins/bootstrap-wysiwyg/css/wysiwyg-color.css"],locale:"en"};void 0===t.fn.wysihtml5.defaultOptionsCache&&(t.fn.wysihtml5.defaultOptionsCache=t.extend(!0,{},t.fn.wysihtml5.defaultOptions));var r=t.fn.wysihtml5.locale={en:{font_styles:{normal:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3"},emphasis:{bold:"Bold",italic:"Italic",underline:"Underline"},lists:{unordered:"Unordered list",ordered:"Ordered list",outdent:"Outdent",indent:"Indent"},link:{insert:"Insert link",cancel:"Cancel"},image:{insert:"Insert image",cancel:"Cancel"},html:{edit:"Edit HTML"},colours:{black:"Black",silver:"Silver",gray:"Grey",maroon:"Maroon",red:"Red",purple:"Purple",green:"Green",olive:"Olive",navy:"Navy",blue:"Blue",orange:"Orange"}}}}(window.jQuery,window.wysihtml5),function(t){"use strict";function e(e){var n=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(this).ajaxSubmit(n))}function n(e){var n=e.target,o=t(n);if(!o.is("[type=submit],[type=image]")){var i=o.closest("[type=submit]");if(0===i.length)return;n=i[0]}var a=this;if(a.clk=n,"image"==n.type)if(void 0!==e.offsetX)a.clk_x=e.offsetX,a.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var r=o.offset();a.clk_x=e.pageX-r.left,a.clk_y=e.pageY-r.top}else a.clk_x=e.pageX-n.offsetLeft,a.clk_y=e.pageY-n.offsetTop;setTimeout(function(){a.clk=a.clk_x=a.clk_y=null},100)}function o(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var i={};i.fileapi=void 0!==t("<input type='file'/>").get(0).files,i.formdata=void 0!==window.FormData;var a=!!t.fn.prop;t.fn.attr2=function(){if(!a)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(e){function n(n){var o,i,a=t.param(n,e.traditional).split("&"),r=a.length,s=[];for(o=0;r>o;o++)a[o]=a[o].replace(/\+/g," "),i=a[o].split("="),s.push([decodeURIComponent(i[0]),decodeURIComponent(i[1])]);return s}function r(n){function i(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(t){o("cannot get iframe.contentWindow document: "+t)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(n){o("cannot get iframe.contentDocument: "+n),e=t.document}return e}function r(){function e(){try{var t=i(v).readyState;o("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(t){o("Server abort: ",t," (",t.name,")"),l(D),S&&clearTimeout(S),S=void 0}}var n=u.attr2("target"),a=u.attr2("action");x.setAttribute("target",m),s||x.setAttribute("method","POST"),a!=h.url&&x.setAttribute("action",h.url),h.skipEncodingOverride||s&&!/post/i.test(s)||u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),h.timeout&&(S=setTimeout(function(){C=!0,l(T)},h.timeout));var r=[];try{if(h.extraData)for(var c in h.extraData)h.extraData.hasOwnProperty(c)&&(t.isPlainObject(h.extraData[c])&&h.extraData[c].hasOwnProperty("name")&&h.extraData[c].hasOwnProperty("value")?r.push(t('<input type="hidden" name="'+h.extraData[c].name+'">').val(h.extraData[c].value).appendTo(x)[0]):r.push(t('<input type="hidden" name="'+c+'">').val(h.extraData[c]).appendTo(x)[0]));h.iframeTarget||(g.appendTo("body"),v.attachEvent?v.attachEvent("onload",l):v.addEventListener("load",l,!1)),setTimeout(e,15);try{x.submit()}catch(t){document.createElement("form").submit.apply(x)}}finally{x.setAttribute("action",a),n?x.setAttribute("target",n):u.removeAttr("target"),t(r).remove()}}function l(e){if(!b.aborted&&!I){if((R=i(v))||(o("cannot access response document"),e=D),e===T&&b)return b.abort("timeout"),void _.reject(b,"timeout");if(e==D&&b)return b.abort("server abort"),void _.reject(b,"error","server abort");if(R&&R.location.href!=h.iframeSrc||C){v.detachEvent?v.detachEvent("onload",l):v.removeEventListener("load",l,!1);var n,a="success";try{if(C)throw"timeout";var r="xml"==h.dataType||R.XMLDocument||t.isXMLDoc(R);if(o("isXml="+r),!r&&window.opera&&(null===R.body||!R.body.innerHTML)&&--k)return o("requeing onLoad callback, DOM not available"),void setTimeout(l,250);var s=R.body?R.body:R.documentElement;b.responseText=s?s.innerHTML:null,b.responseXML=R.XMLDocument?R.XMLDocument:R,r&&(h.dataType="xml"),b.getResponseHeader=function(t){return{"content-type":h.dataType}[t]},s&&(b.status=Number(s.getAttribute("status"))||b.status,b.statusText=s.getAttribute("statusText")||b.statusText);var c=(h.dataType||"").toLowerCase(),u=/(json|script|text)/.test(c);if(u||h.textarea){var d=R.getElementsByTagName("textarea")[0];if(d)b.responseText=d.value,b.status=Number(d.getAttribute("status"))||b.status,b.statusText=d.getAttribute("statusText")||b.statusText;else if(u){var p=R.getElementsByTagName("pre")[0],m=R.getElementsByTagName("body")[0];p?b.responseText=p.textContent?p.textContent:p.innerText:m&&(b.responseText=m.textContent?m.textContent:m.innerText)}}else"xml"==c&&!b.responseXML&&b.responseText&&(b.responseXML=F(b.responseText));try{A=L(b,c,h)}catch(t){a="parsererror",b.error=n=t||a}}catch(t){o("error caught: ",t),a="error",b.error=n=t||a}b.aborted&&(o("upload aborted"),a=null),b.status&&(a=b.status>=200&&300>b.status||304===b.status?"success":"error"),"success"===a?(h.success&&h.success.call(h.context,A,"success",b),_.resolve(b.responseText,"success",b),f&&t.event.trigger("ajaxSuccess",[b,h])):a&&(void 0===n&&(n=b.statusText),h.error&&h.error.call(h.context,b,a,n),_.reject(b,"error",n),f&&t.event.trigger("ajaxError",[b,h,n])),f&&t.event.trigger("ajaxComplete",[b,h]),f&&!--t.active&&t.event.trigger("ajaxStop"),h.complete&&h.complete.call(h.context,b,a),I=!0,h.timeout&&clearTimeout(S),setTimeout(function(){h.iframeTarget||g.remove(),b.responseXML=null},100)}}}var c,d,h,f,m,g,v,b,y,w,C,S,x=u[0],_=t.Deferred();if(n)for(d=0;p.length>d;d++)c=t(p[d]),a?c.prop("disabled",!1):c.removeAttr("disabled");if(h=t.extend(!0,{},t.ajaxSettings,e),h.context=h.context||h,m="jqFormIO"+(new Date).getTime(),h.iframeTarget?(g=t(h.iframeTarget),w=g.attr2("name"),w?m=w:g.attr2("name",m)):(g=t('<iframe name="'+m+'" src="'+h.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),v=g[0],b={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var n="timeout"===e?"timeout":"aborted";o("aborting upload... "+n),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(t){}g.attr("src",h.iframeSrc),b.error=n,h.error&&h.error.call(h.context,b,n,e),f&&t.event.trigger("ajaxError",[b,h,n]),h.complete&&h.complete.call(h.context,b,n)}},(f=h.global)&&0==t.active++&&t.event.trigger("ajaxStart"),f&&t.event.trigger("ajaxSend",[b,h]),h.beforeSend&&!1===h.beforeSend.call(h.context,b,h))return h.global&&t.active--,_.reject(),_;if(b.aborted)return _.reject(),_;(y=x.clk)&&(w=y.name)&&!y.disabled&&(h.extraData=h.extraData||{},h.extraData[w]=y.value,"image"==y.type&&(h.extraData[w+".x"]=x.clk_x,h.extraData[w+".y"]=x.clk_y));var T=1,D=2,E=t("meta[name=csrf-token]").attr("content"),N=t("meta[name=csrf-param]").attr("content");N&&E&&(h.extraData=h.extraData||{},h.extraData[N]=E),h.forceSync?r():setTimeout(r,10);var A,R,I,k=50,F=t.parseXML||function(t,e){return window.ActiveXObject?(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},O=t.parseJSON||function(t){return window.eval("("+t+")")},L=function(e,n,o){var i=e.getResponseHeader("content-type")||"",a="xml"===n||!n&&i.indexOf("xml")>=0,r=a?e.responseXML:e.responseText;return a&&"parsererror"===r.documentElement.nodeName&&t.error&&t.error("parsererror"),o&&o.dataFilter&&(r=o.dataFilter(r,n)),"string"==typeof r&&("json"===n||!n&&i.indexOf("json")>=0?r=O(r):("script"===n||!n&&i.indexOf("javascript")>=0)&&t.globalEval(r)),r};return _}if(!this.length)return o("ajaxSubmit: skipping submit process - no element selected"),this;var s,l,c,u=this;"function"==typeof e?e={success:e}:void 0===e&&(e={}),s=e.type||this.attr2("method"),(c=(c="string"==typeof(l=e.url||this.attr2("action"))?t.trim(l):"")||window.location.href||"")&&(c=(c.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:c,success:t.ajaxSettings.success,type:s||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var d={};if(this.trigger("form-pre-serialize",[this,e,d]),d.veto)return o("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&!1===e.beforeSerialize(this,e))return o("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var h=e.traditional;void 0===h&&(h=t.ajaxSettings.traditional);var f,p=[],m=this.formToArray(e.semantic,p);if(e.data&&(e.extraData=e.data,f=t.param(e.data,h)),e.beforeSubmit&&!1===e.beforeSubmit(m,this,e))return o("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[m,this,e,d]),d.veto)return o("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var g=t.param(m,h);f&&(g=g?g+"&"+f:f),"GET"==e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+g,e.data=null):e.data=g;var v=[];if(e.resetForm&&v.push(function(){u.resetForm()}),e.clearForm&&v.push(function(){u.clearForm(e.includeHidden)}),!e.dataType&&e.target){var b=e.success||function(){};v.push(function(n){var o=e.replaceTarget?"replaceWith":"html";t(e.target)[o](n).each(b,arguments)})}else e.success&&v.push(e.success);if(e.success=function(t,n,o){for(var i=e.context||this,a=0,r=v.length;r>a;a++)v[a].apply(i,[t,n,o||u,u])},e.error){var y=e.error;e.error=function(t,n,o){var i=e.context||this;y.apply(i,[t,n,o,u])}}if(e.complete){var w=e.complete;e.complete=function(t,n){var o=e.context||this;w.apply(o,[t,n,u])}}var C=t('input[type=file]:enabled[value!=""]',this).length>0,S="multipart/form-data",x=u.attr("enctype")==S||u.attr("encoding")==S,_=i.fileapi&&i.formdata;o("fileAPI :"+_);var T,D=(C||x)&&!_;!1!==e.iframe&&(e.iframe||D)?e.closeKeepAlive?t.get(e.closeKeepAlive,function(){T=r(m)}):T=r(m):T=(C||x)&&_?function(o){for(var i=new FormData,a=0;o.length>a;a++)i.append(o[a].name,o[a].value);if(e.extraData){var r=n(e.extraData);for(a=0;r.length>a;a++)r[a]&&i.append(r[a][0],r[a][1])}e.data=null;var l=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:s||"POST"});e.uploadProgress&&(l.xhr=function(){var n=t.ajaxSettings.xhr();return n.upload&&n.upload.addEventListener("progress",function(t){var n=0,o=t.loaded||t.position,i=t.total;t.lengthComputable&&(n=Math.ceil(o/i*100)),e.uploadProgress(t,o,i,n)},!1),n}),l.data=null;var c=l.beforeSend;return l.beforeSend=function(t,e){e.data=i,c&&c.call(this,t,e)},t.ajax(l)}(m):t.ajax(e),u.removeData("jqxhr").data("jqxhr",T);for(var E=0;p.length>E;E++)p[E]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(i){if(i=i||{},i.delegation=i.delegation&&t.isFunction(t.fn.on),!i.delegation&&0===this.length){var a={s:this.selector,c:this.context};return!t.isReady&&a.s?(o("DOM not ready, queuing ajaxForm"),t(function(){t(a.s,a.c).ajaxForm(i)}),this):(o("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return i.delegation?(t(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,n).on("submit.form-plugin",this.selector,i,e).on("click.form-plugin",this.selector,i,n),this):this.ajaxFormUnbind().bind("submit.form-plugin",i,e).bind("click.form-plugin",i,n)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,n){var o=[];if(0===this.length)return o;var a=this[0],r=e?a.getElementsByTagName("*"):a.elements;if(!r)return o;var s,l,c,u,d,h,f;for(s=0,h=r.length;h>s;s++)if(d=r[s],(c=d.name)&&!d.disabled)if(e&&a.clk&&"image"==d.type)a.clk==d&&(o.push({name:c,value:t(d).val(),type:d.type}),o.push({name:c+".x",value:a.clk_x},{name:c+".y",value:a.clk_y}));else if((u=t.fieldValue(d,!0))&&u.constructor==Array)for(n&&n.push(d),l=0,f=u.length;f>l;l++)o.push({name:c,value:u[l]});else if(i.fileapi&&"file"==d.type){n&&n.push(d);var p=d.files;if(p.length)for(l=0;p.length>l;l++)o.push({name:c,value:p[l],type:d.type});else o.push({name:c,value:"",type:d.type})}else null!==u&&void 0!==u&&(n&&n.push(d),o.push({name:c,value:u,type:d.type,required:d.required}));if(!e&&a.clk){var m=t(a.clk),g=m[0];(c=g.name)&&!g.disabled&&"image"==g.type&&(o.push({name:c,value:m.val()}),o.push({name:c+".x",value:a.clk_x},{name:c+".y",value:a.clk_y}))}return o},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var n=[];return this.each(function(){var o=this.name;if(o){var i=t.fieldValue(this,e);if(i&&i.constructor==Array)for(var a=0,r=i.length;r>a;a++)n.push({name:o,value:i[a]});else null!==i&&void 0!==i&&n.push({name:this.name,value:i})}}),t.param(n)},t.fn.fieldValue=function(e){for(var n=[],o=0,i=this.length;i>o;o++){var a=this[o],r=t.fieldValue(a,e);null===r||void 0===r||r.constructor==Array&&!r.length||(r.constructor==Array?t.merge(n,r):n.push(r))}return n},t.fieldValue=function(e,n){var o=e.name,i=e.type,a=e.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!o||e.disabled||"reset"==i||"button"==i||("checkbox"==i||"radio"==i)&&!e.checked||("submit"==i||"image"==i)&&e.form&&e.form.clk!=e||"select"==a&&-1==e.selectedIndex))return null;if("select"==a){var r=e.selectedIndex;if(0>r)return null;for(var s=[],l=e.options,c="select-one"==i,u=c?r+1:l.length,d=c?r:0;u>d;d++){var h=l[d];if(h.selected){var f=h.value;if(f||(f=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),c)return f;s.push(f)}}return s}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var o=this.type,i=this.tagName.toLowerCase();n.test(o)||"textarea"==i?this.value="":"checkbox"==o||"radio"==o?this.checked=!1:"select"==i?this.selectedIndex=-1:"file"==o?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(!0===e&&/hidden/.test(o)||"string"==typeof e&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=e;else if("option"==this.tagName.toLowerCase()){var o=t(this).parent("select");e&&o[0]&&"select-one"==o[0].type&&o.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1}(jQuery),function(t){t.extend(t.fn,{validate:function(e){if(this.length){var n=t.data(this[0],"validator");return n||(this.attr("novalidate","novalidate"),n=new t.validator(e,this[0]),t.data(this[0],"validator",n),n.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){n.settings.submitHandler&&(n.submitButton=e.target),t(e.target).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.submit(function(e){function o(){var o;return!n.settings.submitHandler||(n.submitButton&&(o=t("<input type='hidden'/>").attr("name",n.submitButton.name).val(t(n.submitButton).val()).appendTo(n.currentForm)),n.settings.submitHandler.call(n,n.currentForm,e),n.submitButton&&o.remove(),!1)}return n.settings.debug&&e.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,o()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):o():(n.focusInvalid(),!1)})),n)}e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){if(t(this[0]).is("form"))return this.validate().form();var e=!0,n=t(this[0].form).validate();return this.each(function(){e=e&&n.element(this)}),e},removeAttrs:function(e){var n={},o=this;return t.each(e.split(/\s/),function(t,e){n[e]=o.attr(e),o.removeAttr(e)}),n},rules:function(e,n){var o=this[0];if(e){var i=t.data(o.form,"validator").settings,a=i.rules,r=t.validator.staticRules(o);switch(e){case"add":t.extend(r,t.validator.normalizeRule(n)),delete r.messages,a[o.name]=r,n.messages&&(i.messages[o.name]=t.extend(i.messages[o.name],n.messages));break;case"remove":if(!n)return delete a[o.name],r;var s={};return t.each(n.split(/\s/),function(t,e){s[e]=r[e],delete r[e]}),s}}var l=t.validator.normalizeRules(t.extend({},t.validator.classRules(o),t.validator.attributeRules(o),t.validator.dataRules(o),t.validator.staticRules(o)),o);if(l.required){var c=l.required;delete l.required,l=t.extend({required:c},l)}return l}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,n){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=n,this.init()},t.validator.format=function(e,n){return 1===arguments.length?function(){var n=t.makeArray(arguments);return n.unshift(e),t.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!==Array&&(n=t.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),t.each(n,function(t,n){e=e.replace(RegExp("\\{"+t+"\\}","g"),function(){return n})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(t)).hide())},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){(9!==e.which||""!==this.elementValue(t))&&(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,n,o){"radio"===e.type?this.findByName(e.name).addClass(n).removeClass(o):t(e).addClass(n).removeClass(o)},unhighlight:function(e,n,o){"radio"===e.type?this.findByName(e.name).removeClass(n).addClass(o):t(e).removeClass(n).addClass(o)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var n=t.data(this[0].form,"validator"),o="on"+e.type.replace(/^validate/,"");n.settings[o]&&n.settings[o].call(n,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n=this.groups={};t.each(this.settings.groups,function(e,o){"string"==typeof o&&(o=o.split(/\s/)),t.each(o,function(t,o){n[o]=e})});var o=this.settings.rules;t.each(o,function(e,n){o[e]=t.validator.normalizeRule(n)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",e).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){e=this.validationTargetFor(this.clean(e)),this.lastElement=e,this.prepareElement(e),this.currentElements=t(e);var n=!1!==this.check(e);return n?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var n in e)this.errorList.push({message:e[n],element:this.findByName(n)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e=0;for(var n in t)e++;return e},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,n={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in n||!e.objectLength(t(this).rules()))&&(n[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.replace(" ",".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var n=t(e).attr("type"),o=t(e).val();return"radio"===n||"checkbox"===n?t("input[name='"+t(e).attr("name")+"']:checked").val():"string"==typeof o?o.replace(/\r/g,""):o},check:function(e){e=this.validationTargetFor(this.clean(e));var n,o=t(e).rules(),i=!1,a=this.elementValue(e);for(var r in o){var s={method:r,parameters:o[r]};try{if("dependency-mismatch"===(n=t.validator.methods[r].call(this,a,e,s.parameters))){i=!0;continue}if(i=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!n)return this.formatAndAdd(e,s),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+s.method+"' method.",t),t}}return i?void 0:(this.objectLength(o)&&this.successList.push(e),!0)},customDataMessage:function(e,n){return t(e).data("msg-"+n.toLowerCase())||e.attributes&&t(e).attr("data-msg-"+n.toLowerCase())},customMessage:function(t,e){var n=this.settings.messages[t];return n&&(n.constructor===String?n:n[e])},findDefined:function(){for(var t=0;arguments.length>t;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,n){return this.findDefined(this.customMessage(e.name,n),this.customDataMessage(e,n),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[n],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,n){var o=this.defaultMessage(e,n.method),i=/\$?\{(\d+)\}/g;"function"==typeof o?o=o.call(this,n.parameters,e):i.test(o)&&(o=t.validator.format(o.replace(i,"{$1}"),n.parameters)),this.errorList.push({message:o,element:e}),this.errorMap[e.name]=o,this.submitted[e.name]=o},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e;for(t=0;this.errorList[t];t++){var n=this.errorList[t];this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,n){var o=this.errorsFor(e);o.length?(o.removeClass(this.settings.validClass).addClass(this.settings.errorClass),o.html(n)):(o=t("<"+this.settings.errorElement+">").attr("for",this.idOrName(e)).addClass(this.settings.errorClass).html(n||""),this.settings.wrapper&&(o=o.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(o).length||(this.settings.errorPlacement?this.settings.errorPlacement(o,t(e)):o.insertAfter(e))),!n&&this.settings.success&&(o.text(""),"string"==typeof this.settings.success?o.addClass(this.settings.success):this.settings.success(o,e)),this.toShow=this.toShow.add(o)},errorsFor:function(e){var n=this.idOrName(e);return this.errors().filter(function(){return t(this).attr("for")===n})},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]),t},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,n){switch(n.nodeName.toLowerCase()){case"select":return t("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return e.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{boolean:function(t){return t},string:function(e,n){return!!t(e,n.form).length},function:function(t,e){return t(e)}},optional:function(e){var n=this.elementValue(e);return!t.validator.methods.required.call(this,n,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,n){0>--this.pendingRequest&&(this.pendingRequest=0),delete this.pending[e.name],n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,n){e.constructor===String?this.classRuleSettings[e]=n:t.extend(this.classRuleSettings,e)},classRules:function(e){var n={},o=t(e).attr("class");return o&&t.each(o.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(n,t.validator.classRuleSettings[this])}),n},attributeRules:function(e){var n={},o=t(e),i=o[0].getAttribute("type");for(var a in t.validator.methods){var r;"required"===a?(""===(r=o.get(0).getAttribute(a))&&(r=!0),r=!!r):r=o.attr(a),/min|max/.test(a)&&(null===i||/number|range|text/.test(i))&&(r=Number(r)),r?n[a]=r:i===a&&"range"!==i&&(n[a]=!0)}return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},dataRules:function(e){var n,o,i={},a=t(e);for(n in t.validator.methods)void 0!==(o=a.data("rule-"+n.toLowerCase()))&&(i[n]=o);return i},staticRules:function(e){var n={},o=t.data(e.form,"validator");return o.settings.rules&&(n=t.validator.normalizeRule(o.settings.rules[e.name])||{}),n},normalizeRules:function(e,n){return t.each(e,function(o,i){if(!1!==i){if(i.param||i.depends){var a=!0;switch(typeof i.depends){case"string":a=!!t(i.depends,n.form).length;break;case"function":a=i.depends.call(n,n)}a?e[o]=void 0===i.param||i.param:delete e[o]}}else delete e[o]}),t.each(e,function(o,i){e[o]=t.isFunction(i)?i(n):i}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var n;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(n=e[this].split(/[\s,]+/),e[this]=[Number(n[0]),Number(n[1])]))}),t.validator.autoCreateRanges&&(e.min&&e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),e.minlength&&e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var n={};t.each(e.split(/\s/),function(){n[this]=!0}),e=n}return e},addMethod:function(e,n,o){t.validator.methods[e]=n,t.validator.messages[e]=void 0!==o?o:t.validator.messages[e],3>n.length&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,n,o){if(!this.depend(o,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var i=t(n).val();return i&&i.length>0}return this.checkable(n)?this.getLength(e,n)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(""+new Date(t))},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;for(var n=0,o=0,i=!1,a=(t=t.replace(/\D/g,"")).length-1;a>=0;a--){var r=t.charAt(a);o=parseInt(r,10),i&&(o*=2)>9&&(o-=9),n+=o,i=!i}return 0==n%10},minlength:function(e,n,o){var i=t.isArray(e)?e.length:this.getLength(t.trim(e),n);return this.optional(n)||i>=o},maxlength:function(e,n,o){var i=t.isArray(e)?e.length:this.getLength(t.trim(e),n);return this.optional(n)||o>=i},rangelength:function(e,n,o){var i=t.isArray(e)?e.length:this.getLength(t.trim(e),n);return this.optional(n)||i>=o[0]&&o[1]>=i},min:function(t,e,n){return this.optional(e)||t>=n},max:function(t,e,n){return this.optional(e)||n>=t},range:function(t,e,n){return this.optional(e)||t>=n[0]&&n[1]>=t},equalTo:function(e,n,o){var i=t(o);return this.settings.onfocusout&&i.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(n).valid()}),e===i.val()},remote:function(e,n,o){if(this.optional(n))return"dependency-mismatch";var i=this.previousValue(n);if(this.settings.messages[n.name]||(this.settings.messages[n.name]={}),i.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=i.message,o="string"==typeof o&&{url:o}||o,i.old===e)return i.valid;i.old=e;var a=this;this.startRequest(n);var r={};return r[n.name]=e,t.ajax(t.extend(!0,{url:o,mode:"abort",port:"validate"+n.name,dataType:"json",data:r,success:function(o){a.settings.messages[n.name].remote=i.originalMessage;var r=!0===o||"true"===o;if(r){var s=a.formSubmitted;a.prepareElement(n),a.formSubmitted=s,a.successList.push(n),delete a.invalid[n.name],a.showErrors()}else{var l={},c=o||a.defaultMessage(n,"remote");l[n.name]=i.message=t.isFunction(c)?c(e):c,a.invalid[n.name]=!0,a.showErrors(l)}i.valid=r,a.stopRequest(n,r)}},o)),"pending"}}}),t.format=t.validator.format}(jQuery),function(t){var e={};if(t.ajaxPrefilter)t.ajaxPrefilter(function(t,n,o){var i=t.port;"abort"===t.mode&&(e[i]&&e[i].abort(),e[i]=o)});else{var n=t.ajax;t.ajax=function(o){var i=("mode"in o?o:t.ajaxSettings).mode,a=("port"in o?o:t.ajaxSettings).port;return"abort"===i?(e[a]&&e[a].abort(),e[a]=n.apply(this,arguments),e[a]):n.apply(this,arguments)}}}(jQuery),function(t){t.extend(t.fn,{validateDelegate:function(e,n,o){return this.bind(n,function(n){var i=t(n.target);return i.is(e)?o.apply(i,arguments):void 0})}})}(jQuery),function(t){"use strict";function e(t,e){for(var n=0;n<t.length;++n)e(t[n],n)}function n(e,n){this.$select=t(e),this.options=this.mergeOptions(t.extend({},n,this.$select.data())),this.$select.attr("data-placeholder")&&(this.options.nonSelectedText=this.$select.data("placeholder")),this.originalOptions=this.$select.clone()[0].options,this.query="",this.searchTimeout=null,this.lastToggledInput=null,this.options.multiple="multiple"===this.$select.attr("multiple"),this.options.onChange=t.proxy(this.options.onChange,this),this.options.onSelectAll=t.proxy(this.options.onSelectAll,this),this.options.onDeselectAll=t.proxy(this.options.onDeselectAll,this),this.options.onDropdownShow=t.proxy(this.options.onDropdownShow,this),this.options.onDropdownHide=t.proxy(this.options.onDropdownHide,this),this.options.onDropdownShown=t.proxy(this.options.onDropdownShown,this),this.options.onDropdownHidden=t.proxy(this.options.onDropdownHidden,this),this.options.onInitialized=t.proxy(this.options.onInitialized,this),this.options.onFiltering=t.proxy(this.options.onFiltering,this),this.buildContainer(),this.buildButton(),this.buildDropdown(),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(!0),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),this.options.wasDisabled=this.$select.prop("disabled"),this.options.disableIfEmpty&&t("option",this.$select).length<=0&&this.disable(),this.$select.wrap('<span class="multiselect-native-select" />').after(this.$container),this.options.onInitialized(this.$select,this.$container)}"undefined"!=typeof ko&&ko.bindingHandlers&&!ko.bindingHandlers.multiselect&&(ko.bindingHandlers.multiselect={after:["options","value","selectedOptions","enable","disable"],init:function(e,n,o,i,a){var r=t(e),s=ko.toJS(n());if(r.multiselect(s),o.has("options")){var l=o.get("options");ko.isObservable(l)&&ko.computed({read:function(){l(),setTimeout(function(){var t=r.data("multiselect");t&&t.updateOriginalOptions(),r.multiselect("rebuild")},1)},disposeWhenNodeIsRemoved:e})}if(o.has("value")){var c=o.get("value");ko.isObservable(c)&&ko.computed({read:function(){c(),setTimeout(function(){r.multiselect("refresh")},1)},disposeWhenNodeIsRemoved:e}).extend({rateLimit:100,notifyWhenChangesStop:!0})}if(o.has("selectedOptions")){var u=o.get("selectedOptions");ko.isObservable(u)&&ko.computed({read:function(){u(),setTimeout(function(){r.multiselect("refresh")},1)},disposeWhenNodeIsRemoved:e}).extend({rateLimit:100,notifyWhenChangesStop:!0})}var d=function(t){setTimeout(function(){t?r.multiselect("enable"):r.multiselect("disable")})};if(o.has("enable")){var h=o.get("enable");ko.isObservable(h)?ko.computed({read:function(){d(h())},disposeWhenNodeIsRemoved:e}).extend({rateLimit:100,notifyWhenChangesStop:!0}):d(h)}if(o.has("disable")){var f=o.get("disable");ko.isObservable(f)?ko.computed({read:function(){d(!f())},disposeWhenNodeIsRemoved:e}).extend({rateLimit:100,notifyWhenChangesStop:!0}):d(!f)}ko.utils.domNodeDisposal.addDisposeCallback(e,function(){r.multiselect("destroy")})},update:function(e,n,o,i,a){var r=t(e),s=ko.toJS(n());r.multiselect("setOptions",s),r.multiselect("rebuild")}}),n.prototype={defaults:{buttonText:function(e,n){if(this.disabledText.length>0&&(n.prop("disabled")||0==e.length&&this.disableIfEmpty))return this.disabledText;if(0===e.length)return this.nonSelectedText;if(this.allSelectedText&&e.length===t("option",t(n)).length&&1!==t("option",t(n)).length&&this.multiple)return this.selectAllNumber?this.allSelectedText+" ("+e.length+")":this.allSelectedText;if(e.length>this.numberDisplayed)return e.length+" "+this.nSelectedText;var o="",i=this.delimiterText;return e.each(function(){var e=void 0!==t(this).attr("label")?t(this).attr("label"):t(this).text();o+=e+i}),o.substr(0,o.length-this.delimiterText.length)},buttonTitle:function(e,n){if(0===e.length)return this.nonSelectedText;var o="",i=this.delimiterText;return e.each(function(){var e=void 0!==t(this).attr("label")?t(this).attr("label"):t(this).text();o+=e+i}),o.substr(0,o.length-this.delimiterText.length)},checkboxName:function(t){return!1},optionLabel:function(e){return t(e).attr("label")||t(e).text()},optionClass:function(e){return t(e).attr("class")||""},onChange:function(t,e){},onDropdownShow:function(t){},onDropdownHide:function(t){},onDropdownShown:function(t){},onDropdownHidden:function(t){},onSelectAll:function(){},onDeselectAll:function(){},onInitialized:function(t,e){},onFiltering:function(t){},enableHTML:!1,buttonClass:"btn btn-default",inheritClass:!1,buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',dropRight:!1,dropUp:!1,selectedClass:"active",maxHeight:!1,includeSelectAllOption:!1,includeSelectAllIfMoreThan:0,selectAllText:" Select all",selectAllValue:"multiselect-all",selectAllName:!1,selectAllNumber:!0,selectAllJustVisible:!0,enableFiltering:!1,enableCaseInsensitiveFiltering:!1,enableFullValueFiltering:!1,enableClickableOptGroups:!1,enableCollapsibleOptGroups:!1,filterPlaceholder:"Search",filterBehavior:"text",includeFilterClearBtn:!0,preventInputChangeEvent:!1,nonSelectedText:"None selected",nSelectedText:"selected",allSelectedText:"All selected",numberDisplayed:3,disableIfEmpty:!1,disabledText:"",delimiterText:", ",templates:{button:'<button type="button" class="multiselect dropdown-toggle" data-toggle="dropdown"><span class="multiselect-selected-text"></span> <b class="caret"></b></button>',ul:'<ul class="multiselect-container dropdown-menu"></ul>',filter:'<li class="multiselect-item multiselect-filter"><div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span><input class="form-control multiselect-search" type="text"></div></li>',filterClearBtn:'<span class="input-group-btn"><button class="btn btn-default multiselect-clear-filter" type="button"><i class="glyphicon glyphicon-remove-circle"></i></button></span>',li:'<li><a tabindex="0"><label></label></a></li>',divider:'<li class="multiselect-item divider"></li>',liGroup:'<li class="multiselect-item multiselect-group"><label></label></li>'}},constructor:n,buildContainer:function(){this.$container=t(this.options.buttonContainer),this.$container.on("show.bs.dropdown",this.options.onDropdownShow),this.$container.on("hide.bs.dropdown",this.options.onDropdownHide),this.$container.on("shown.bs.dropdown",this.options.onDropdownShown),this.$container.on("hidden.bs.dropdown",this.options.onDropdownHidden)},buildButton:function(){this.$button=t(this.options.templates.button).addClass(this.options.buttonClass),this.$select.attr("class")&&this.options.inheritClass&&this.$button.addClass(this.$select.attr("class")),this.$select.prop("disabled")?this.disable():this.enable(),this.options.buttonWidth&&"auto"!==this.options.buttonWidth&&(this.$button.css({width:"100%",overflow:"hidden","text-overflow":"ellipsis"}),this.$container.css({width:this.options.buttonWidth}));var e=this.$select.attr("tabindex");e&&this.$button.attr("tabindex",e),this.$container.prepend(this.$button)},buildDropdown:function(){if(this.$ul=t(this.options.templates.ul),this.options.dropRight&&this.$ul.addClass("pull-right"),this.options.maxHeight&&this.$ul.css({"max-height":this.options.maxHeight+"px","overflow-y":"auto","overflow-x":"hidden"}),this.options.dropUp){var e=Math.min(this.options.maxHeight,26*t('option[data-role!="divider"]',this.$select).length+19*t('option[data-role="divider"]',this.$select).length+(this.options.includeSelectAllOption?26:0)+(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering?44:0)),n=e+34;this.$ul.css({"max-height":e+"px","overflow-y":"auto","overflow-x":"hidden","margin-top":"-"+n+"px"})}this.$container.append(this.$ul)},buildDropdownOptions:function(){this.$select.children().each(t.proxy(function(e,n){var o=t(n),i=o.prop("tagName").toLowerCase();o.prop("value")!==this.options.selectAllValue&&("optgroup"===i?this.createOptgroup(n):"option"===i&&("divider"===o.data("role")?this.createDivider():this.createOptionValue(n)))},this)),t("li:not(.multiselect-group) input",this.$ul).on("change",t.proxy(function(e){var n=t(e.target),o=n.prop("checked")||!1,i=n.val()===this.options.selectAllValue;this.options.selectedClass&&(o?n.closest("li").addClass(this.options.selectedClass):n.closest("li").removeClass(this.options.selectedClass));var a=n.val(),r=this.getOptionByValue(a),s=t("option",this.$select).not(r),l=t("input",this.$container).not(n);if(i?o?this.selectAll(this.options.selectAllJustVisible,!0):this.deselectAll(this.options.selectAllJustVisible,!0):(o?(r.prop("selected",!0),this.options.multiple?r.prop("selected",!0):(this.options.selectedClass&&t(l).closest("li").removeClass(this.options.selectedClass),t(l).prop("checked",!1),s.prop("selected",!1),this.$button.click()),"active"===this.options.selectedClass&&s.closest("a").css("outline","")):r.prop("selected",!1),this.options.onChange(r,o),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()),this.$select.change(),this.updateButtonText(),this.options.preventInputChangeEvent)return!1},this)),t("li a",this.$ul).on("mousedown",function(t){if(t.shiftKey)return!1}),t("li a",this.$ul).on("touchstart click",t.proxy(function(e){e.stopPropagation();var n=t(e.target);if(e.shiftKey&&this.options.multiple){n.is("label")&&(e.preventDefault(),(n=n.find("input")).prop("checked",!n.prop("checked")));var o=n.prop("checked")||!1;if(null!==this.lastToggledInput&&this.lastToggledInput!==n){var i=n.closest("li").index(),a=this.lastToggledInput.closest("li").index();if(i>a){var r=a;a=i,i=r}++a;var s=this.$ul.find("li").slice(i,a).find("input");s.prop("checked",o),this.options.selectedClass&&s.closest("li").toggleClass(this.options.selectedClass,o);for(var l=0,c=s.length;l<c;l++){var u=t(s[l]);this.getOptionByValue(u.val()).prop("selected",o)}}n.trigger("change")}n.is("input")&&!n.closest("li").is(".multiselect-item")&&(this.lastToggledInput=n),n.blur()},this)),this.$container.off("keydown.multiselect").on("keydown.multiselect",t.proxy(function(e){if(!t('input[type="text"]',this.$container).is(":focus"))if(9===e.keyCode&&this.$container.hasClass("open"))this.$button.click();else{var n=t(this.$container).find("li:not(.divider):not(.disabled) a").filter(":visible");if(!n.length)return;var o=n.index(n.filter(":focus"));38===e.keyCode&&o>0?o--:40===e.keyCode&&o<n.length-1?o++:~o||(o=0);var i=n.eq(o);if(i.focus(),32===e.keyCode||13===e.keyCode){var a=i.find("input");a.prop("checked",!a.prop("checked")),a.change()}e.stopPropagation(),e.preventDefault()}},this)),this.options.enableClickableOptGroups&&this.options.multiple&&t("li.multiselect-group input",this.$ul).on("change",t.proxy(function(e){e.stopPropagation();var n=t(e.target).prop("checked")||!1,o=t(e.target).closest("li"),i=o.nextUntil("li.multiselect-group").not(".multiselect-filter-hidden").not(".disabled").find("input"),a=[];this.options.selectedClass&&(n?o.addClass(this.options.selectedClass):o.removeClass(this.options.selectedClass)),t.each(i,t.proxy(function(e,o){var i=t(o).val(),r=this.getOptionByValue(i);n?(t(o).prop("checked",!0),t(o).closest("li").addClass(this.options.selectedClass),r.prop("selected",!0)):(t(o).prop("checked",!1),t(o).closest("li").removeClass(this.options.selectedClass),r.prop("selected",!1)),a.push(this.getOptionByValue(i))},this)),this.options.onChange(a,n),this.updateButtonText(),this.updateSelectAll()},this)),this.options.enableCollapsibleOptGroups&&this.options.multiple&&(t("li.multiselect-group .caret-container",this.$ul).on("click",t.proxy(function(e){var n=t(e.target).closest("li").nextUntil("li.multiselect-group").not(".multiselect-filter-hidden"),o=!0;n.each(function(){o=o&&t(this).is(":visible")}),o?n.hide().addClass("multiselect-collapsible-hidden"):n.show().removeClass("multiselect-collapsible-hidden")},this)),t("li.multiselect-all",this.$ul).css("background","#f3f3f3").css("border-bottom","1px solid #eaeaea"),t("li.multiselect-all > a > label.checkbox",this.$ul).css("padding","3px 20px 3px 35px"),t("li.multiselect-group > a > input",this.$ul).css("margin","4px 0px 5px -20px"))},createOptionValue:function(e){var n=t(e);n.is(":selected")&&n.prop("selected",!0);var o=this.options.optionLabel(e),i=this.options.optionClass(e),a=n.val(),r=this.options.multiple?"checkbox":"radio",s=t(this.options.templates.li),l=t("label",s);l.addClass(r),s.addClass(i),this.options.enableHTML?l.html(" "+o):l.text(" "+o);var c=t("<input/>").attr("type",r),u=this.options.checkboxName(n);u&&c.attr("name",u),l.prepend(c);var d=n.prop("selected")||!1;c.val(a),a===this.options.selectAllValue&&(s.addClass("multiselect-item multiselect-all"),c.parent().parent().addClass("multiselect-all")),l.attr("title",n.attr("title")),this.$ul.append(s),n.is(":disabled")&&c.attr("disabled","disabled").prop("disabled",!0).closest("a").attr("tabindex","-1").closest("li").addClass("disabled"),c.prop("checked",d),d&&this.options.selectedClass&&c.closest("li").addClass(this.options.selectedClass)},createDivider:function(e){var n=t(this.options.templates.divider);this.$ul.append(n)},createOptgroup:function(e){var n=t(e).attr("label"),o=t(e).attr("value"),i=t('<li class="multiselect-item multiselect-group"><a href="javascript:void(0);"><label><b></b></label></a></li>'),a=this.options.optionClass(e);i.addClass(a),this.options.enableHTML?t("label b",i).html(" "+n):t("label b",i).text(" "+n),this.options.enableCollapsibleOptGroups&&this.options.multiple&&t("a",i).append('<span class="caret-container"><b class="caret"></b></span>'),this.options.enableClickableOptGroups&&this.options.multiple&&t("a label",i).prepend('<input type="checkbox" value="'+o+'"/>'),t(e).is(":disabled")&&i.addClass("disabled"),this.$ul.append(i),t("option",e).each(t.proxy(function(t,e){this.createOptionValue(e)},this))},buildSelectAll:function(){if("number"==typeof this.options.selectAllValue&&(this.options.selectAllValue=this.options.selectAllValue.toString()),!this.hasSelectAll()&&this.options.includeSelectAllOption&&this.options.multiple&&t("option",this.$select).length>this.options.includeSelectAllIfMoreThan){this.options.includeSelectAllDivider&&this.$ul.prepend(t(this.options.templates.divider));var e=t(this.options.templates.li);t("label",e).addClass("checkbox"),this.options.enableHTML?t("label",e).html(" "+this.options.selectAllText):t("label",e).text(" "+this.options.selectAllText),this.options.selectAllName?t("label",e).prepend('<input type="checkbox" name="'+this.options.selectAllName+'" />'):t("label",e).prepend('<input type="checkbox" />');var n=t("input",e);n.val(this.options.selectAllValue),e.addClass("multiselect-item multiselect-all"),n.parent().parent().addClass("multiselect-all"),this.$ul.prepend(e),n.prop("checked",!1)}},buildFilter:function(){if(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering){var e=Math.max(this.options.enableFiltering,this.options.enableCaseInsensitiveFiltering);if(this.$select.find("option").length>=e){if(this.$filter=t(this.options.templates.filter),t("input",this.$filter).attr("placeholder",this.options.filterPlaceholder),this.options.includeFilterClearBtn){var n=t(this.options.templates.filterClearBtn);n.on("click",t.proxy(function(e){clearTimeout(this.searchTimeout),this.$filter.find(".multiselect-search").val(""),t("li",this.$ul).show().removeClass("multiselect-filter-hidden"),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},this)),this.$filter.find(".input-group").append(n)}this.$ul.prepend(this.$filter),this.$filter.val(this.query).on("click",function(t){t.stopPropagation()}).on("input keydown",t.proxy(function(e){13===e.which&&e.preventDefault(),clearTimeout(this.searchTimeout),this.searchTimeout=this.asyncFunction(t.proxy(function(){if(this.query!==e.target.value){this.query=e.target.value;var n,o;t.each(t("li",this.$ul),t.proxy(function(e,i){var a=t("input",i).length>0?t("input",i).val():"",r=t("label",i).text(),s="";if("text"===this.options.filterBehavior?s=r:"value"===this.options.filterBehavior?s=a:"both"===this.options.filterBehavior&&(s=r+"\n"+a),a!==this.options.selectAllValue&&r){var l=!1;if(this.options.enableCaseInsensitiveFiltering&&(s=s.toLowerCase(),this.query=this.query.toLowerCase()),this.options.enableFullValueFiltering&&"both"!==this.options.filterBehavior){var c=s.trim().substring(0,this.query.length);this.query.indexOf(c)>-1&&(l=!0)}else s.indexOf(this.query)>-1&&(l=!0);t(i).toggle(l).toggleClass("multiselect-filter-hidden",!l),t(i).hasClass("multiselect-group")?(n=i,o=l):(l&&t(n).show().removeClass("multiselect-filter-hidden"),!l&&o&&t(i).show().removeClass("multiselect-filter-hidden"))}},this))}this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),this.options.onFiltering(e.target)},this),300,this)},this))}}},destroy:function(){this.$container.remove(),this.$select.show(),this.$select.prop("disabled",this.options.wasDisabled),this.$select.data("multiselect",null)},refresh:function(){var e=t.map(t("li input",this.$ul),t);t("option",this.$select).each(t.proxy(function(n,o){for(var i,a=t(o),r=a.val(),s=e.length;0<s--;)if(r===(i=e[s]).val()){a.is(":selected")?(i.prop("checked",!0),this.options.selectedClass&&i.closest("li").addClass(this.options.selectedClass)):(i.prop("checked",!1),this.options.selectedClass&&i.closest("li").removeClass(this.options.selectedClass)),a.is(":disabled")?i.attr("disabled","disabled").prop("disabled",!0).closest("li").addClass("disabled"):i.prop("disabled",!1).closest("li").removeClass("disabled");break}},this)),this.updateButtonText(),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},select:function(e,n){t.isArray(e)||(e=[e]);for(var o=0;o<e.length;o++){var i=e[o];if(null!==i&&void 0!==i){var a=this.getOptionByValue(i),r=this.getInputByValue(i);void 0!==a&&void 0!==r&&(this.options.multiple||this.deselectAll(!1),this.options.selectedClass&&r.closest("li").addClass(this.options.selectedClass),r.prop("checked",!0),a.prop("selected",!0),n&&this.options.onChange(a,!0))}}this.updateButtonText(),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},clearSelection:function(){this.deselectAll(!1),this.updateButtonText(),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},deselect:function(e,n){t.isArray(e)||(e=[e]);for(var o=0;o<e.length;o++){var i=e[o];if(null!==i&&void 0!==i){var a=this.getOptionByValue(i),r=this.getInputByValue(i);void 0!==a&&void 0!==r&&(this.options.selectedClass&&r.closest("li").removeClass(this.options.selectedClass),r.prop("checked",!1),a.prop("selected",!1),n&&this.options.onChange(a,!1))}}this.updateButtonText(),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},selectAll:function(e,n){var e=void 0===e||e,o=t("li:not(.divider):not(.disabled):not(.multiselect-group)",this.$ul),i=t("li:not(.divider):not(.disabled):not(.multiselect-group):not(.multiselect-filter-hidden):not(.multiselect-collapisble-hidden)",this.$ul).filter(":visible");e?(t("input:enabled",i).prop("checked",!0),i.addClass(this.options.selectedClass),t("input:enabled",i).each(t.proxy(function(e,n){var o=t(n).val(),i=this.getOptionByValue(o);t(i).prop("selected",!0)},this))):(t("input:enabled",o).prop("checked",!0),o.addClass(this.options.selectedClass),t("input:enabled",o).each(t.proxy(function(e,n){var o=t(n).val(),i=this.getOptionByValue(o);t(i).prop("selected",!0)},this))),t('li input[value="'+this.options.selectAllValue+'"]',this.$ul).prop("checked",!0),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),n&&this.options.onSelectAll()},deselectAll:function(e,n){var e=void 0===e||e,o=t("li:not(.divider):not(.disabled):not(.multiselect-group)",this.$ul),i=t("li:not(.divider):not(.disabled):not(.multiselect-group):not(.multiselect-filter-hidden):not(.multiselect-collapisble-hidden)",this.$ul).filter(":visible");e?(t('input[type="checkbox"]:enabled',i).prop("checked",!1),i.removeClass(this.options.selectedClass),t('input[type="checkbox"]:enabled',i).each(t.proxy(function(e,n){var o=t(n).val(),i=this.getOptionByValue(o);t(i).prop("selected",!1)},this))):(t('input[type="checkbox"]:enabled',o).prop("checked",!1),o.removeClass(this.options.selectedClass),t('input[type="checkbox"]:enabled',o).each(t.proxy(function(e,n){var o=t(n).val(),i=this.getOptionByValue(o);t(i).prop("selected",!1)},this))),t('li input[value="'+this.options.selectAllValue+'"]',this.$ul).prop("checked",!1),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),n&&this.options.onDeselectAll()},rebuild:function(){this.$ul.html(""),this.options.multiple="multiple"===this.$select.attr("multiple"),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(!0),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),this.options.disableIfEmpty&&t("option",this.$select).length<=0?this.disable():this.enable(),this.options.dropRight&&this.$ul.addClass("pull-right")},dataprovider:function(n){var o=0,i=this.$select.empty();t.each(n,function(n,a){var r;if(t.isArray(a.children))o++,r=t("<optgroup/>").attr({label:a.label||"Group "+o,disabled:!!a.disabled}),e(a.children,function(e){var n={value:e.value,label:e.label||e.value,title:e.title,selected:!!e.selected,disabled:!!e.disabled};for(var o in e.attributes)n["data-"+o]=e.attributes[o];r.append(t("<option/>").attr(n))});else{var s={value:a.value,label:a.label||a.value,title:a.title,class:a.class,selected:!!a.selected,disabled:!!a.disabled};for(var l in a.attributes)s["data-"+l]=a.attributes[l];(r=t("<option/>").attr(s)).text(a.label||a.value)}i.append(r)}),this.rebuild()},enable:function(){this.$select.prop("disabled",!1),this.$button.prop("disabled",!1).removeClass("disabled")},disable:function(){this.$select.prop("disabled",!0),this.$button.prop("disabled",!0).addClass("disabled")},setOptions:function(t){this.options=this.mergeOptions(t)},mergeOptions:function(e){return t.extend(!0,{},this.defaults,this.options,e)},hasSelectAll:function(){return t("li.multiselect-all",this.$ul).length>0},updateOptGroups:function(){var e=t("li.multiselect-group",this.$ul),n=this.options.selectedClass;e.each(function(){var e=!0;t(this).nextUntil("li.multiselect-group").not(".multiselect-filter-hidden").not(".disabled").each(function(){t("input",this).prop("checked")||(e=!1)}),n&&(e?t(this).addClass(n):t(this).removeClass(n)),t("input",this).prop("checked",e)})},updateSelectAll:function(e){if(this.hasSelectAll()){var n=t("li:not(.multiselect-item):not(.multiselect-filter-hidden):not(.multiselect-group):not(.disabled) input:enabled",this.$ul),o=n.length,i=n.filter(":checked").length,a=t("li.multiselect-all",this.$ul),r=a.find("input");i>0&&i===o?(r.prop("checked",!0),a.addClass(this.options.selectedClass)):(r.prop("checked",!1),a.removeClass(this.options.selectedClass))}},updateButtonText:function(){var e=this.getSelected();this.options.enableHTML?t(".multiselect .multiselect-selected-text",this.$container).html(this.options.buttonText(e,this.$select)):t(".multiselect .multiselect-selected-text",this.$container).text(this.options.buttonText(e,this.$select)),t(".multiselect",this.$container).attr("title",this.options.buttonTitle(e,this.$select))},getSelected:function(){return t("option",this.$select).filter(":selected")},getOptionByValue:function(e){for(var n=t("option",this.$select),o=e.toString(),i=0;i<n.length;i+=1){var a=n[i];if(a.value===o)return t(a)}},getInputByValue:function(e){for(var n=t("li input:not(.multiselect-search)",this.$ul),o=e.toString(),i=0;i<n.length;i+=1){var a=n[i];if(a.value===o)return t(a)}},updateOriginalOptions:function(){this.originalOptions=this.$select.clone()[0].options},asyncFunction:function(t,e,n){var o=Array.prototype.slice.call(arguments,3);return setTimeout(function(){t.apply(n||window,o)},e)},setAllSelectedText:function(t){this.options.allSelectedText=t,this.updateButtonText()}},t.fn.multiselect=function(e,o,i){return this.each(function(){var a=t(this).data("multiselect"),r="object"==typeof e&&e;a||(a=new n(this,r),t(this).data("multiselect",a)),"string"==typeof e&&(a[e](o,i),"destroy"===e&&t(this).data("multiselect",!1))})},t.fn.multiselect.Constructor=n,t(function(){t("select[data-role=multiselect]").multiselect()})}(window.jQuery),function(t){var e=new Array,n=new Array;t.fn.doAutosize=function(e){var n=t(this).data("minwidth"),o=t(this).data("maxwidth"),i="",a=t(this),r=t("#"+t(this).data("tester_id"));if(i!==(i=a.val())){var s=i.replace(/&/g,"&").replace(/\s/g," ").replace(/</g,"<").replace(/>/g,">");r.html(s);var l=r.width(),c=l+e.comfortZone>=n?l+e.comfortZone:n;(c<a.width()&&c>=n||c>n&&c<o)&&a.width(c)}},t.fn.resetAutosize=function(e){var n=t(this).data("minwidth")||e.minInputWidth||t(this).width(),o=t(this).data("maxwidth")||e.maxInputWidth||t(this).closest(".tagsinput").width()-e.inputPadding,i=t(this),a=t("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:i.css("fontSize"),fontFamily:i.css("fontFamily"),fontWeight:i.css("fontWeight"),letterSpacing:i.css("letterSpacing"),whiteSpace:"nowrap"}),r=t(this).attr("id")+"_autosize_tester";!t("#"+r).length>0&&(a.attr("id",r),a.appendTo("body")),i.data("minwidth",n),i.data("maxwidth",o),i.data("tester_id",r),i.css("width",n)},t.fn.addTag=function(o,i){return i=jQuery.extend({focus:!1,callback:!0},i),this.each(function(){var a=t(this).attr("id"),r=t(this).val().split(e[a]);if(""==r[0]&&(r=new Array),o=jQuery.trim(o),i.unique)1==(s=t(r).tagExist(o))&&t("#"+a+"_tag").addClass("not_valid");else var s=!1;if(""!=o&&1!=s&&(t("<span>").addClass("tag").append(t("<span>").text(o).append("  "),t("<a>",{href:"#",title:"Removing tag",text:"x"}).click(function(){return t("#"+a).removeTag(escape(o))})).insertBefore("#"+a+"_addTag"),r.push(o),t("#"+a+"_tag").val(""),i.focus?t("#"+a+"_tag").focus():t("#"+a+"_tag").blur(),t.fn.tagsInput.updateTagsField(this,r),i.callback&&n[a]&&n[a].onAddTag&&(c=n[a].onAddTag).call(this,o),n[a]&&n[a].onChange)){var l=r.length,c=n[a].onChange;c.call(this,t(this),r[l-1])}}),!1},t.fn.removeTag=function(o){return o=unescape(o),this.each(function(){var a=t(this).attr("id"),r=t(this).val().split(e[a]);for(t("#"+a+"_tagsinput .tag").remove(),str="",i=0;i<r.length;i++)r[i]!=o&&(str=str+e[a]+r[i]);t.fn.tagsInput.importTags(this,str),n[a]&&n[a].onRemoveTag&&n[a].onRemoveTag.call(this,o)}),!1},t.fn.tagExist=function(e){return jQuery.inArray(e,t(this))>=0},t.fn.importTags=function(e){id=t(this).attr("id"),t("#"+id+"_tagsinput .tag").remove(),t.fn.tagsInput.importTags(this,e)},t.fn.tagsInput=function(o){var i=jQuery.extend({interactive:!0,defaultText:"add a tag",minChars:0,width:"300px",height:"100px",autocomplete:{selectFirst:!1},hide:!0,delimiter:",",unique:!0,removeWithBackspace:!0,placeholderColor:"#666666",autosize:!0,comfortZone:20,inputPadding:12},o);return this.each(function(){i.hide&&t(this).hide();var o=t(this).attr("id");o&&!e[t(this).attr("id")]||(o=t(this).attr("id","tags"+(new Date).getTime()).attr("id"));var a=jQuery.extend({pid:o,real_input:"#"+o,holder:"#"+o+"_tagsinput",input_wrapper:"#"+o+"_addTag",fake_input:"#"+o+"_tag"},i);e[o]=a.delimiter,(i.onAddTag||i.onRemoveTag||i.onChange)&&(n[o]=new Array,n[o].onAddTag=i.onAddTag,n[o].onRemoveTag=i.onRemoveTag,n[o].onChange=i.onChange);var r='<div id="'+o+'_tagsinput" class="tagsinput"><div id="'+o+'_addTag">';if(i.interactive&&(r=r+'<input id="'+o+'_tag" value="" data-default="'+i.defaultText+'" />'),r+='</div><div class="tags_clear"></div></div>',t(r).insertAfter(this),t(a.holder).css("width",i.width),t(a.holder).css("height",i.height),""!=t(a.real_input).val()&&t.fn.tagsInput.importTags(t(a.real_input),t(a.real_input).val()),i.interactive){if(t(a.fake_input).val(t(a.fake_input).attr("data-default")),t(a.fake_input).css("color",i.placeholderColor),t(a.fake_input).resetAutosize(i),t(a.holder).bind("click",a,function(e){t(e.data.fake_input).focus()}),t(a.fake_input).bind("focus",a,function(e){t(e.data.fake_input).val()==t(e.data.fake_input).attr("data-default")&&t(e.data.fake_input).val(""),t(e.data.fake_input).css("color","#000000")}),void 0!=i.autocomplete_url){autocomplete_options={source:i.autocomplete_url};for(attrname in i.autocomplete)autocomplete_options[attrname]=i.autocomplete[attrname];void 0!==jQuery.Autocompleter?(t(a.fake_input).autocomplete(i.autocomplete_url,i.autocomplete),t(a.fake_input).bind("result",a,function(e,n,a){n&&t("#"+o).addTag(n[0]+"",{focus:!0,unique:i.unique})})):void 0!==jQuery.ui.autocomplete&&(t(a.fake_input).autocomplete(autocomplete_options),t(a.fake_input).bind("autocompleteselect",a,function(e,n){return t(e.data.real_input).addTag(n.item.value,{focus:!0,unique:i.unique}),!1}))}else t(a.fake_input).bind("blur",a,function(e){var n=t(this).attr("data-default");return""!=t(e.data.fake_input).val()&&t(e.data.fake_input).val()!=n?e.data.minChars<=t(e.data.fake_input).val().length&&(!e.data.maxChars||e.data.maxChars>=t(e.data.fake_input).val().length)&&t(e.data.real_input).addTag(t(e.data.fake_input).val(),{focus:!0,unique:i.unique}):(t(e.data.fake_input).val(t(e.data.fake_input).attr("data-default")),t(e.data.fake_input).css("color",i.placeholderColor)),!1});t(a.fake_input).bind("keypress",a,function(e){if(e.which==e.data.delimiter.charCodeAt(0)||13==e.which)return e.preventDefault(),e.data.minChars<=t(e.data.fake_input).val().length&&(!e.data.maxChars||e.data.maxChars>=t(e.data.fake_input).val().length)&&t(e.data.real_input).addTag(t(e.data.fake_input).val(),{focus:!0,unique:i.unique}),t(e.data.fake_input).resetAutosize(i),!1;e.data.autosize&&t(e.data.fake_input).doAutosize(i)}),a.removeWithBackspace&&t(a.fake_input).bind("keydown",function(e){if(8==e.keyCode&&""==t(this).val()){e.preventDefault();var n=t(this).closest(".tagsinput").find(".tag:last").text(),o=t(this).attr("id").replace(/_tag$/,"");n=n.replace(/[\s]+x$/,""),t("#"+o).removeTag(escape(n)),t(this).trigger("focus")}}),t(a.fake_input).blur(),a.unique&&t(a.fake_input).keydown(function(e){(8==e.keyCode||String.fromCharCode(e.which).match(/\w+|[áéíóúÁÉÍÓÚñÑ,/]+/))&&t(this).removeClass("not_valid")})}}),this},t.fn.tagsInput.updateTagsField=function(n,o){var i=t(n).attr("id");t(n).val(o.join(e[i]))},t.fn.tagsInput.importTags=function(o,a){t(o).val("");var r=t(o).attr("id"),s=a.split(e[r]);for(i=0;i<s.length;i++)t(o).addTag(s[i],{focus:!1,callback:!1});n[r]&&n[r].onChange&&n[r].onChange.call(o,o,s[i])}}(jQuery);var wysihtml5={version:"0.3.0",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"\ufeff",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46};window.rangy=function(){function t(t,e){var n=typeof t[e];return n==c||!(n!=l||!t[e])||"unknown"==n}function e(t,e){return!(typeof t[e]!=l||!t[e])}function n(t,e){return typeof t[e]!=u}function o(t){return function(e,n){for(var o=n.length;o--;)if(!t(e,n[o]))return!1;return!0}}function i(t){return t&&m(t,p)&&v(t,f)}function a(t){window.alert("Rangy not supported in your browser. Reason: "+t),b.initialized=!0,b.supported=!1}function r(){if(!b.initialized){var n,o=!1,r=!1;for(t(document,"createRange")&&(n=document.createRange(),m(n,h)&&v(n,d)&&(o=!0),n.detach()),(n=e(document,"body")?document.body:document.getElementsByTagName("body")[0])&&t(n,"createTextRange")&&(n=n.createTextRange(),i(n)&&(r=!0)),!o&&!r&&a("Neither Range nor TextRange are implemented"),b.initialized=!0,b.features={implementsDomRange:o,implementsTextRange:r},r=0,n=(o=w.concat(y)).length;r<n;++r)try{o[r](b)}catch(n){e(window,"console")&&t(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",n)}}}function s(t){this.name=t,this.supported=this.initialized=!1}var l="object",c="function",u="undefined",d="startContainer startOffset endContainer endOffset collapsed commonAncestorContainer START_TO_START START_TO_END END_TO_START END_TO_END".split(" "),h="setStart setStartBefore setStartAfter setEnd setEndBefore setEndAfter collapse selectNode selectNodeContents compareBoundaryPoints deleteContents extractContents cloneContents insertNode surroundContents cloneRange toString detach".split(" "),f="boundingHeight boundingLeft boundingTop boundingWidth htmlText text".split(" "),p="collapse compareEndPoints duplicate getBookmark moveToBookmark moveToElementText parentElement pasteHTML select setEndPoint getBoundingClientRect".split(" "),m=o(t),g=o(e),v=o(n),b={version:"1.2.2",initialized:!1,supported:!0,util:{isHostMethod:t,isHostObject:e,isHostProperty:n,areHostMethods:m,areHostObjects:g,areHostProperties:v,isTextRange:i},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};b.fail=a,b.warn=function(t){t="Rangy warning: "+t,b.config.alertOnWarn?window.alert(t):typeof window.console!=u&&typeof window.console.log!=u&&window.console.log(t)},!{}.hasOwnProperty?a("hasOwnProperty not supported"):b.util.extend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};var y=[],w=[];b.init=r,b.addInitListener=function(t){b.initialized?t(b):y.push(t)};var C=[];b.addCreateMissingNativeApiListener=function(t){C.push(t)},b.createMissingNativeApi=function(t){t=t||window,r();for(var e=0,n=C.length;e<n;++e)C[e](t)},s.prototype.fail=function(t){throw this.initialized=!0,this.supported=!1,Error("Module '"+this.name+"' failed to load: "+t)},s.prototype.warn=function(t){b.warn("Module "+this.name+": "+t)},s.prototype.createError=function(t){return Error("Error in Rangy "+this.name+" module: "+t)},b.createModule=function(t,e){var n=new s(t);b.modules[t]=n,w.push(function(t){e(t,n),n.initialized=!0,n.supported=!0})},b.requireModules=function(t){for(var e,n,o=0,i=t.length;o<i;++o){if(n=t[o],!((e=b.modules[n])&&e instanceof s))throw Error("Module '"+n+"' not found");if(!e.supported)throw Error("Module '"+n+"' not supported")}};var S=!1,g=function(){S||(S=!0,b.initialized||r())};if(typeof window==u)a("No window found");else{if(typeof document!=u)return t(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",g,!1),t(window,"addEventListener")?window.addEventListener("load",g,!1):t(window,"attachEvent")?window.attachEvent("onload",g):a("Window does not have required addEventListener or attachEvent method"),b;a("No document found")}}(),rangy.createModule("DomUtil",function(t,e){function n(t){for(var e=0;t=t.previousSibling;)e++;return e}function o(t,e){var n,o=[];for(n=t;n;n=n.parentNode)o.push(n);for(n=e;n;n=n.parentNode)if(m(o,n))return n;return null}function i(t,e,n){for(n=n?t:t.parentNode;n;){if((t=n.parentNode)===e)return n;n=t}return null}function a(t){return 3==(t=t.nodeType)||4==t||8==t}function r(t,e){var n=e.nextSibling,o=e.parentNode;return n?o.insertBefore(t,n):o.appendChild(t),t}function s(t){if(9==t.nodeType)return t;if(typeof t.ownerDocument!=h)return t.ownerDocument;if(typeof t.document!=h)return t.document;if(t.parentNode)return s(t.parentNode);throw Error("getDocument: no document found for node")}function l(t){return t?a(t)?'"'+t.data+'"':1==t.nodeType?"<"+t.nodeName+(t.id?' id="'+t.id+'"':"")+">["+t.childNodes.length+"]":t.nodeName:"[No node]"}function c(t){this._next=this.root=t}function u(t,e){this.node=t,this.offset=e}function d(t){this.code=this[t],this.codeName=t,this.message="DOMException: "+this.codeName}var h="undefined",f=t.util;f.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||e.fail("document missing a Node creation method"),f.isHostMethod(document,"getElementsByTagName")||e.fail("document missing getElementsByTagName method");var p=document.createElement("div");f.areHostMethods(p,["insertBefore","appendChild","cloneNode"])||e.fail("Incomplete Element implementation"),f.isHostProperty(p,"innerHTML")||e.fail("Element is missing innerHTML property"),p=document.createTextNode("test"),f.areHostMethods(p,["splitText","deleteData","insertData","appendData","cloneNode"])||e.fail("Incomplete Text Node implementation");var m=function(t,e){for(var n=t.length;n--;)if(t[n]===e)return!0;return!1};c.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var t,e=this._current=this._next;if(this._current){if(!(t=e.firstChild))for(t=null;e!==this.root&&!(t=e.nextSibling);)e=e.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},u.prototype={equals:function(t){return this.node===t.node&this.offset==t.offset},inspect:function(){return"[DomPosition("+l(this.node)+":"+this.offset+")]"}},d.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},d.prototype.toString=function(){return this.message},t.dom={arrayContains:m,isHtmlNamespace:function(t){var e;return typeof t.namespaceURI==h||null===(e=t.namespaceURI)||"http://www.w3.org/1999/xhtml"==e},parentElement:function(t){return t=t.parentNode,1==t.nodeType?t:null},getNodeIndex:n,getNodeLength:function(t){var e;return a(t)?t.length:(e=t.childNodes)?e.length:0},getCommonAncestor:o,isAncestorOf:function(t,e,n){for(e=n?e:e.parentNode;e;){if(e===t)return!0;e=e.parentNode}return!1},getClosestAncestorIn:i,isCharacterDataNode:a,insertAfter:r,splitDataNode:function(t,e){var n=t.cloneNode(!1);return n.deleteData(0,e),t.deleteData(e,t.length-e),r(n,t),n},getDocument:s,getWindow:function(t){if(typeof(t=s(t)).defaultView!=h)return t.defaultView;if(typeof t.parentWindow!=h)return t.parentWindow;throw Error("Cannot get a window object for node")},getIframeWindow:function(t){if(typeof t.contentWindow!=h)return t.contentWindow;if(typeof t.contentDocument!=h)return t.contentDocument.defaultView;throw Error("getIframeWindow: No Window object found for iframe element")},getIframeDocument:function(t){if(typeof t.contentDocument!=h)return t.contentDocument;if(typeof t.contentWindow!=h)return t.contentWindow.document;throw Error("getIframeWindow: No Document object found for iframe element")},getBody:function(t){return f.isHostObject(t,"body")?t.body:t.getElementsByTagName("body")[0]},getRootContainer:function(t){for(var e;e=t.parentNode;)t=e;return t},comparePoints:function(t,e,a,r){var s;if(t==a)return e===r?0:e<r?-1:1;if(s=i(a,t,!0))return e<=n(s)?-1:1;if(s=i(t,a,!0))return n(s)<r?-1:1;if(e=o(t,a),t=t===e?e:i(t,e,!0),a=a===e?e:i(a,e,!0),t===a)throw Error("comparePoints got to case 4 and childA and childB are the same!");for(e=e.firstChild;e;){if(e===t)return-1;if(e===a)return 1;e=e.nextSibling}throw Error("Should not be here!")},inspectNode:l,fragmentFromNodeChildren:function(t){for(var e,n=s(t).createDocumentFragment();e=t.firstChild;)n.appendChild(e);return n},createIterator:function(t){return new c(t)},DomPosition:u},t.DOMException=d}),rangy.createModule("DomRange",function(t){function e(t,e){return 3!=t.nodeType&&(F.isAncestorOf(t,e.startContainer,!0)||F.isAncestorOf(t,e.endContainer,!0))}function n(t){return F.getDocument(t.startContainer)}function o(t,e,n){if(e=t._listeners[e])for(var o=0,i=e.length;o<i;++o)e[o].call(t,{target:t,args:n})}function i(t){return new O(t.parentNode,F.getNodeIndex(t))}function a(t){return new O(t.parentNode,F.getNodeIndex(t)+1)}function r(t,e,n){var o=11==t.nodeType?t.firstChild:t;return F.isCharacterDataNode(e)?n==e.length?F.insertAfter(t,e):e.parentNode.insertBefore(t,0==n?e:F.splitDataNode(e,n)):n>=e.childNodes.length?e.appendChild(t):e.insertBefore(t,e.childNodes[n]),o}function s(t){for(var e,o,i=n(t.range).createDocumentFragment();o=t.next();){if(e=t.isPartiallySelectedSubtree(),o=o.cloneNode(!e),e&&(e=t.getSubtreeIterator(),o.appendChild(s(e)),e.detach(!0)),10==o.nodeType)throw new L("HIERARCHY_REQUEST_ERR");i.appendChild(o)}return i}function l(t,e,n){for(var o,i,n=n||{stop:!1};o=t.next();)if(t.isPartiallySelectedSubtree()){if(!1===e(o)){n.stop=!0;break}if(o=t.getSubtreeIterator(),l(o,e,n),o.detach(!0),n.stop)break}else for(o=F.createIterator(o);i=o.next();)if(!1===e(i))return void(n.stop=!0)}function c(t){for(var e;t.next();)t.isPartiallySelectedSubtree()?(e=t.getSubtreeIterator(),c(e),e.detach(!0)):t.remove()}function u(t){for(var e,o,i=n(t.range).createDocumentFragment();e=t.next();){if(t.isPartiallySelectedSubtree()?(e=e.cloneNode(!1),o=t.getSubtreeIterator(),e.appendChild(u(o)),o.detach(!0)):t.remove(),10==e.nodeType)throw new L("HIERARCHY_REQUEST_ERR");i.appendChild(e)}return i}function d(t,e,n){var o,i=!(!e||!e.length),a=!!n;i&&(o=RegExp("^("+e.join("|")+")$"));var r=[];return l(new f(t,!1),function(t){(!i||o.test(t.nodeType))&&(!a||n(t))&&r.push(t)}),r}function h(t){return"["+(void 0===t.getName?"Range":t.getName())+"("+F.inspectNode(t.startContainer)+":"+t.startOffset+", "+F.inspectNode(t.endContainer)+":"+t.endOffset+")]"}function f(t,e){if(this.range=t,this.clonePartiallySelectedTextNodes=e,!t.collapsed){this.sc=t.startContainer,this.so=t.startOffset,this.ec=t.endContainer,this.eo=t.endOffset;var n=t.commonAncestorContainer;this.sc===this.ec&&F.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||F.isCharacterDataNode(this.sc)?F.getClosestAncestorIn(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||F.isCharacterDataNode(this.ec)?F.getClosestAncestorIn(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function p(t){this.code=this[t],this.codeName=t,this.message="RangeException: "+this.codeName}function m(t,e,n){this.nodes=d(t,e,n),this._next=this.nodes[0],this._position=0}function g(t){return function(e,n){for(var o,i=n?e:e.parentNode;i;){if(o=i.nodeType,F.arrayContains(t,o))return i;i=i.parentNode}return null}}function v(t,e){if(z(t,e))throw new p("INVALID_NODE_TYPE_ERR")}function b(t){if(!t.startContainer)throw new L("INVALID_STATE_ERR")}function y(t,e){if(!F.arrayContains(e,t.nodeType))throw new p("INVALID_NODE_TYPE_ERR")}function w(t,e){if(0>e||e>(F.isCharacterDataNode(t)?t.length:t.childNodes.length))throw new L("INDEX_SIZE_ERR")}function C(t,e){if($(t,!0)!==$(e,!0))throw new L("WRONG_DOCUMENT_ERR")}function S(t){if(W(t,!0))throw new L("NO_MODIFICATION_ALLOWED_ERR")}function x(t,e){if(!t)throw new L(e)}function _(t){if(b(t),!((F.arrayContains(B,t.startContainer.nodeType)||$(t.startContainer,!0))&&(F.arrayContains(B,t.endContainer.nodeType)||$(t.endContainer,!0))&&t.startOffset<=(F.isCharacterDataNode(t.startContainer)?t.startContainer.length:t.startContainer.childNodes.length)&&t.endOffset<=(F.isCharacterDataNode(t.endContainer)?t.endContainer.length:t.endContainer.childNodes.length)))throw Error("Range error: Range is no longer valid after DOM mutation ("+t.inspect()+")")}function T(){}function D(t){t.START_TO_START=X,t.START_TO_END=G,t.END_TO_END=Y,t.END_TO_START=J,t.NODE_BEFORE=K,t.NODE_AFTER=Q,t.NODE_BEFORE_AND_AFTER=Z,t.NODE_INSIDE=tt}function E(t){D(t),D(t.prototype)}function N(t,e){return function(){_(this);var n=this.startContainer,o=this.startOffset,i=this.commonAncestorContainer,r=new f(this,!0);return n!==i&&(n=F.getClosestAncestorIn(n,i,!0),o=a(n),n=o.node,o=o.offset),l(r,S),r.reset(),i=t(r),r.detach(),e(this,n,o,n,o),i}}function A(n,o,r){function s(t,e){return function(n){b(this),y(n,P),y(j(n),B),n=(t?i:a)(n),(e?l:d)(this,n.node,n.offset)}}function l(t,e,n){var i=t.endContainer,a=t.endOffset;e===t.startContainer&&n===t.startOffset||(j(e)==j(i)&&1!=F.comparePoints(e,n,i,a)||(i=e,a=n),o(t,e,n,i,a))}function d(t,e,n){var i=t.startContainer,a=t.startOffset;e===t.endContainer&&n===t.endOffset||(j(e)==j(i)&&-1!=F.comparePoints(e,n,i,a)||(i=e,a=n),o(t,i,a,e,n))}n.prototype=new T,t.util.extend(n.prototype,{setStart:function(t,e){b(this),v(t,!0),w(t,e),l(this,t,e)},setEnd:function(t,e){b(this),v(t,!0),w(t,e),d(this,t,e)},setStartBefore:s(!0,!0),setStartAfter:s(!1,!0),setEndBefore:s(!0,!1),setEndAfter:s(!1,!1),collapse:function(t){_(this),t?o(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):o(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(t){b(this),v(t,!0),o(this,t,0,t,F.getNodeLength(t))},selectNode:function(t){b(this),v(t,!1),y(t,P);var e=i(t),t=a(t);o(this,e.node,e.offset,t.node,t.offset)},extractContents:N(u,o),deleteContents:N(c,o),canSurroundContents:function(){_(this),S(this.startContainer),S(this.endContainer);var t=new f(this,!0),n=t._first&&e(t._first,this)||t._last&&e(t._last,this);return t.detach(),!n},detach:function(){r(this)},splitBoundaries:function(){_(this);var t=this.startContainer,e=this.startOffset,n=this.endContainer,i=this.endOffset,a=t===n;F.isCharacterDataNode(n)&&0<i&&i<n.length&&F.splitDataNode(n,i),F.isCharacterDataNode(t)&&0<e&&e<t.length&&(t=F.splitDataNode(t,e),a?(i-=e,n=t):n==t.parentNode&&i>=F.getNodeIndex(t)&&i++,e=0),o(this,t,e,n,i)},normalizeBoundaries:function(){_(this);var t=this.startContainer,e=this.startOffset,n=this.endContainer,i=this.endOffset,a=function(t){var e=t.nextSibling;e&&e.nodeType==t.nodeType&&(n=t,i=t.length,t.appendData(e.data),e.parentNode.removeChild(e))},r=function(o){var a=o.previousSibling;if(a&&a.nodeType==o.nodeType){t=o;var r=o.length;e=a.length,o.insertData(0,a.data),a.parentNode.removeChild(a),t==n?(i+=e,n=t):n==o.parentNode&&(a=F.getNodeIndex(o),i==a?(n=o,i=r):i>a&&i--)}},s=!0;F.isCharacterDataNode(n)?n.length==i&&a(n):(0<i&&(s=n.childNodes[i-1])&&F.isCharacterDataNode(s)&&a(s),s=!this.collapsed),s?F.isCharacterDataNode(t)?0==e&&r(t):e<t.childNodes.length&&(a=t.childNodes[e])&&F.isCharacterDataNode(a)&&r(a):(t=n,e=i),o(this,t,e,n,i)},collapseToPoint:function(t,e){b(this),v(t,!0),w(t,e),(t!==this.startContainer||e!==this.startOffset||t!==this.endContainer||e!==this.endOffset)&&o(this,t,e,t,e)}}),E(n)}function R(t){t.collapsed=t.startContainer===t.endContainer&&t.startOffset===t.endOffset,t.commonAncestorContainer=t.collapsed?t.startContainer:F.getCommonAncestor(t.startContainer,t.endContainer)}function I(t,e,n,i,a){var r=t.startContainer!==e||t.startOffset!==n,s=t.endContainer!==i||t.endOffset!==a;t.startContainer=e,t.startOffset=n,t.endContainer=i,t.endOffset=a,R(t),o(t,"boundarychange",{startMoved:r,endMoved:s})}function k(t){this.startContainer=t,this.startOffset=0,this.endContainer=t,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},R(this)}t.requireModules(["DomUtil"]);var F=t.dom,O=F.DomPosition,L=t.DOMException;f.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var t=this._current=this._next;return t&&(this._next=t!==this._last?t.nextSibling:null,F.isCharacterDataNode(t)&&this.clonePartiallySelectedTextNodes&&(t===this.ec&&(t=t.cloneNode(!0)).deleteData(this.eo,t.length-this.eo),this._current===this.sc&&(t=t.cloneNode(!0)).deleteData(0,this.so))),t},remove:function(){var t,e,n=this._current;!F.isCharacterDataNode(n)||n!==this.sc&&n!==this.ec?n.parentNode&&n.parentNode.removeChild(n):(t=n===this.sc?this.so:0,e=n===this.ec?this.eo:n.length,t!=e&&n.deleteData(t,e-t))},isPartiallySelectedSubtree:function(){return e(this._current,this.range)},getSubtreeIterator:function(){var t;if(this.isSingleCharacterDataNode)(t=this.range.cloneRange()).collapse();else{t=new k(n(this.range));var e=this._current,o=e,i=0,a=e,r=F.getNodeLength(e);F.isAncestorOf(e,this.sc,!0)&&(o=this.sc,i=this.so),F.isAncestorOf(e,this.ec,!0)&&(a=this.ec,r=this.eo),I(t,o,i,a,r)}return new f(t,this.clonePartiallySelectedTextNodes)},detach:function(t){t&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},p.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},p.prototype.toString=function(){return this.message},m.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var P=[1,3,4,5,7,8,10],B=[2,9,11],M=[1,3,4,5,7,8,10,11],H=[1,3,4,5,7,8],j=F.getRootContainer,$=g([9,11]),W=g([5,6,10,12]),z=g([6,10,12]),q=document.createElement("style"),V=!1;try{q.innerHTML="<b>x</b>",V=3==q.firstChild.nodeType}catch(t){}t.features.htmlParsingConforms=V;var U="startContainer startOffset endContainer endOffset collapsed commonAncestorContainer".split(" "),X=0,G=1,Y=2,J=3,K=0,Q=1,Z=2,tt=3;T.prototype={attachListener:function(t,e){this._listeners[t].push(e)},compareBoundaryPoints:function(t,e){_(this),C(this.startContainer,e.startContainer);var n=t==J||t==X?"start":"end",o=t==G||t==X?"start":"end";return F.comparePoints(this[n+"Container"],this[n+"Offset"],e[o+"Container"],e[o+"Offset"])},insertNode:function(t){if(_(this),y(t,M),S(this.startContainer),F.isAncestorOf(t,this.startContainer,!0))throw new L("HIERARCHY_REQUEST_ERR");this.setStartBefore(r(t,this.startContainer,this.startOffset))},cloneContents:function(){_(this);var t,e;return this.collapsed?n(this).createDocumentFragment():this.startContainer===this.endContainer&&F.isCharacterDataNode(this.startContainer)?(t=this.startContainer.cloneNode(!0),t.data=t.data.slice(this.startOffset,this.endOffset),(e=n(this).createDocumentFragment()).appendChild(t),e):(e=new f(this,!0),t=s(e),e.detach(),t)},canSurroundContents:function(){_(this),S(this.startContainer),S(this.endContainer);var t=new f(this,!0),n=t._first&&e(t._first,this)||t._last&&e(t._last,this);return t.detach(),!n},surroundContents:function(t){if(y(t,H),!this.canSurroundContents())throw new p("BAD_BOUNDARYPOINTS_ERR");var e=this.extractContents();if(t.hasChildNodes())for(;t.lastChild;)t.removeChild(t.lastChild);r(t,this.startContainer,this.startOffset),t.appendChild(e),this.selectNode(t)},cloneRange:function(){_(this);for(var t,e=new k(n(this)),o=U.length;o--;)t=U[o],e[t]=this[t];return e},toString:function(){_(this);var t=this.startContainer;if(t===this.endContainer&&F.isCharacterDataNode(t))return 3==t.nodeType||4==t.nodeType?t.data.slice(this.startOffset,this.endOffset):"";var e=[];return l(t=new f(this,!0),function(t){(3==t.nodeType||4==t.nodeType)&&e.push(t.data)}),t.detach(),e.join("")},compareNode:function(t){_(this);var e=t.parentNode,n=F.getNodeIndex(t);if(!e)throw new L("NOT_FOUND_ERR");return t=this.comparePoint(e,n),e=this.comparePoint(e,n+1),0>t?0<e?Z:K:0<e?Q:tt},comparePoint:function(t,e){return _(this),x(t,"HIERARCHY_REQUEST_ERR"),C(t,this.startContainer),0>F.comparePoints(t,e,this.startContainer,this.startOffset)?-1:0<F.comparePoints(t,e,this.endContainer,this.endOffset)?1:0},createContextualFragment:V?function(t){var e=this.startContainer,n=F.getDocument(e);if(!e)throw new L("INVALID_STATE_ERR");var o=null;return 1==e.nodeType?o=e:F.isCharacterDataNode(e)&&(o=F.parentElement(e)),o=null===o||"HTML"==o.nodeName&&F.isHtmlNamespace(F.getDocument(o).documentElement)&&F.isHtmlNamespace(o)?n.createElement("body"):o.cloneNode(!1),o.innerHTML=t,F.fragmentFromNodeChildren(o)}:function(t){b(this);var e=n(this).createElement("body");return e.innerHTML=t,F.fragmentFromNodeChildren(e)},toHtml:function(){_(this);var t=n(this).createElement("div");return t.appendChild(this.cloneContents()),t.innerHTML},intersectsNode:function(t,e){if(_(this),x(t,"NOT_FOUND_ERR"),F.getDocument(t)!==n(this))return!1;var o=t.parentNode,i=F.getNodeIndex(t);x(o,"NOT_FOUND_ERR");var a=F.comparePoints(o,i,this.endContainer,this.endOffset),o=F.comparePoints(o,i+1,this.startContainer,this.startOffset);return e?0>=a&&0<=o:0>a&&0<o},isPointInRange:function(t,e){return _(this),x(t,"HIERARCHY_REQUEST_ERR"),C(t,this.startContainer),0<=F.comparePoints(t,e,this.startContainer,this.startOffset)&&0>=F.comparePoints(t,e,this.endContainer,this.endOffset)},intersectsRange:function(t,e){if(_(this),n(t)!=n(this))throw new L("WRONG_DOCUMENT_ERR");var o=F.comparePoints(this.startContainer,this.startOffset,t.endContainer,t.endOffset),i=F.comparePoints(this.endContainer,this.endOffset,t.startContainer,t.startOffset);return e?0>=o&&0<=i:0>o&&0<i},intersection:function(t){if(this.intersectsRange(t)){var e=F.comparePoints(this.startContainer,this.startOffset,t.startContainer,t.startOffset),n=F.comparePoints(this.endContainer,this.endOffset,t.endContainer,t.endOffset),o=this.cloneRange();return-1==e&&o.setStart(t.startContainer,t.startOffset),1==n&&o.setEnd(t.endContainer,t.endOffset),o}return null},union:function(t){if(this.intersectsRange(t,!0)){var e=this.cloneRange();return-1==F.comparePoints(t.startContainer,t.startOffset,this.startContainer,this.startOffset)&&e.setStart(t.startContainer,t.startOffset),1==F.comparePoints(t.endContainer,t.endOffset,this.endContainer,this.endOffset)&&e.setEnd(t.endContainer,t.endOffset),e}throw new p("Ranges do not intersect")},containsNode:function(t,e){return e?this.intersectsNode(t,!1):this.compareNode(t)==tt},containsNodeContents:function(t){return 0<=this.comparePoint(t,0)&&0>=this.comparePoint(t,F.getNodeLength(t))},containsRange:function(t){return this.intersection(t).equals(t)},containsNodeText:function(t){var e=this.cloneRange();e.selectNode(t);var n=e.getNodes([3]);return 0<n.length?(e.setStart(n[0],0),t=n.pop(),e.setEnd(t,t.length),t=this.containsRange(e),e.detach(),t):this.containsNodeContents(t)},createNodeIterator:function(t,e){return _(this),new m(this,t,e)},getNodes:function(t,e){return _(this),d(this,t,e)},getDocument:function(){return n(this)},collapseBefore:function(t){b(this),this.setEndBefore(t),this.collapse(!1)},collapseAfter:function(t){b(this),this.setStartAfter(t),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(t){return k.rangesEqual(this,t)},inspect:function(){return h(this)}},A(k,I,function(t){b(t),t.startContainer=t.startOffset=t.endContainer=t.endOffset=null,t.collapsed=t.commonAncestorContainer=null,o(t,"detach",null),t._listeners=null}),t.rangePrototype=T.prototype,k.rangeProperties=U,k.RangeIterator=f,k.copyComparisonConstants=E,k.createPrototypeRange=A,k.inspect=h,k.getRangeDocument=n,k.rangesEqual=function(t,e){return t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset},t.DomRange=k,t.RangeException=p}),rangy.createModule("WrappedRange",function(t){function e(t,e,n,o){var r=t.duplicate();r.collapse(n);var s=r.parentElement();if(i.isAncestorOf(e,s,!0)||(s=e),!s.canHaveHTML)return new a(s.parentNode,i.getNodeIndex(s));var l,e=i.getDocument(s).createElement("span"),c=n?"StartToStart":"StartToEnd";do{s.insertBefore(e,e.previousSibling),r.moveToElementText(e)}while(0<(l=r.compareEndPoints(c,t))&&e.previousSibling);if(c=e.nextSibling,-1==l&&c&&i.isCharacterDataNode(c)){if(r.setEndPoint(n?"EndToStart":"EndToEnd",t),/[\r\n]/.test(c.data))for(n=(s=r.duplicate()).text.replace(/\r\n/g,"\r").length,n=s.moveStart("character",n);-1==s.compareEndPoints("StartToEnd",s);)n++,s.moveStart("character",1);else n=r.text.length;s=new a(c,n)}else c=(o||!n)&&e.previousSibling,s=(n=(o||n)&&e.nextSibling)&&i.isCharacterDataNode(n)?new a(n,0):c&&i.isCharacterDataNode(c)?new a(c,c.length):new a(s,i.getNodeIndex(e));return e.parentNode.removeChild(e),s}function n(t,e){var n,o,a=t.offset,r=i.getDocument(t.node),s=r.body.createTextRange(),l=i.isCharacterDataNode(t.node);return l?(n=t.node,o=n.parentNode):(n=t.node.childNodes,n=a<n.length?n[a]:null,o=t.node),r=r.createElement("span"),r.innerHTML="&#feff;",n?o.insertBefore(r,n):o.appendChild(r),s.moveToElementText(r),s.collapse(!e),o.removeChild(r),l&&s[e?"moveStart":"moveEnd"]("character",a),s}t.requireModules(["DomUtil","DomRange"]);var o,i=t.dom,a=i.DomPosition,r=t.DomRange;if(!t.features.implementsDomRange||t.features.implementsTextRange&&t.config.preferTextRange){if(t.features.implementsTextRange){(o=function(t){this.textRange=t,this.refresh()}).prototype=new r(document),o.prototype.refresh=function(){var t,n,o=this.textRange;t=o.parentElement();var a=o.duplicate();a.collapse(!0),n=a.parentElement(),(a=o.duplicate()).collapse(!1),n=(n=n==(o=a.parentElement())?n:i.getCommonAncestor(n,o))==t?n:i.getCommonAncestor(t,n),0==this.textRange.compareEndPoints("StartToEnd",this.textRange)?n=t=e(this.textRange,n,!0,!0):(t=e(this.textRange,n,!0,!1),n=e(this.textRange,n,!1,!1)),this.setStart(t.node,t.offset),this.setEnd(n.node,n.offset)},r.copyComparisonConstants(o);var s=function(){return this}();void 0===s.Range&&(s.Range=o),t.createNativeRange=function(t){return(t=t||document).body.createTextRange()}}}else(function(){function e(t){for(var e,n=s.length;n--;)e=s[n],t[e]=t.nativeRange[e]}var n,a,s=r.rangeProperties;o=function(t){if(!t)throw Error("Range must be specified");this.nativeRange=t,e(this)},r.createPrototypeRange(o,function(t,e,n,o,i){var a=t.endContainer!==o||t.endOffset!=i;(t.startContainer!==e||t.startOffset!=n||a)&&(t.setEnd(o,i),t.setStart(e,n))},function(t){t.nativeRange.detach(),t.detached=!0;for(var e,n=s.length;n--;)e=s[n],t[e]=null}),(n=o.prototype).selectNode=function(t){this.nativeRange.selectNode(t),e(this)},n.deleteContents=function(){this.nativeRange.deleteContents(),e(this)},n.extractContents=function(){var t=this.nativeRange.extractContents();return e(this),t},n.cloneContents=function(){return this.nativeRange.cloneContents()},n.surroundContents=function(t){this.nativeRange.surroundContents(t),e(this)},n.collapse=function(t){this.nativeRange.collapse(t),e(this)},n.cloneRange=function(){return new o(this.nativeRange.cloneRange())},n.refresh=function(){e(this)},n.toString=function(){return this.nativeRange.toString()};var l=document.createTextNode("test");i.getBody(document).appendChild(l);var c=document.createRange();c.setStart(l,0),c.setEnd(l,0);try{c.setStart(l,1),n.setStart=function(t,n){this.nativeRange.setStart(t,n),e(this)},n.setEnd=function(t,n){this.nativeRange.setEnd(t,n),e(this)},a=function(t){return function(n){this.nativeRange[t](n),e(this)}}}catch(t){n.setStart=function(t,n){try{this.nativeRange.setStart(t,n)}catch(e){this.nativeRange.setEnd(t,n),this.nativeRange.setStart(t,n)}e(this)},n.setEnd=function(t,n){try{this.nativeRange.setEnd(t,n)}catch(e){this.nativeRange.setStart(t,n),this.nativeRange.setEnd(t,n)}e(this)},a=function(t,n){return function(o){try{this.nativeRange[t](o)}catch(e){this.nativeRange[n](o),this.nativeRange[t](o)}e(this)}}}n.setStartBefore=a("setStartBefore","setEndBefore"),n.setStartAfter=a("setStartAfter","setEndAfter"),n.setEndBefore=a("setEndBefore","setStartBefore"),n.setEndAfter=a("setEndAfter","setStartAfter"),c.selectNodeContents(l),n.selectNodeContents=c.startContainer==l&&c.endContainer==l&&0==c.startOffset&&c.endOffset==l.length?function(t){this.nativeRange.selectNodeContents(t),e(this)}:function(t){this.setStart(t,0),this.setEnd(t,r.getEndOffset(t))},c.selectNodeContents(l),c.setEnd(l,3),(a=document.createRange()).selectNodeContents(l),a.setEnd(l,4),a.setStart(l,2),n.compareBoundaryPoints=-1==c.compareBoundaryPoints(c.START_TO_END,a)&1==c.compareBoundaryPoints(c.END_TO_START,a)?function(t,e){return e=e.nativeRange||e,t==e.START_TO_END?t=e.END_TO_START:t==e.END_TO_START&&(t=e.START_TO_END),this.nativeRange.compareBoundaryPoints(t,e)}:function(t,e){return this.nativeRange.compareBoundaryPoints(t,e.nativeRange||e)},t.util.isHostMethod(c,"createContextualFragment")&&(n.createContextualFragment=function(t){return this.nativeRange.createContextualFragment(t)}),i.getBody(document).removeChild(l),c.detach(),a.detach()})(),t.createNativeRange=function(t){return(t=t||document).createRange()};t.features.implementsTextRange&&(o.rangeToTextRange=function(t){if(t.collapsed)return n(new a(t.startContainer,t.startOffset),!0);var e=n(new a(t.startContainer,t.startOffset),!0),o=n(new a(t.endContainer,t.endOffset),!1);return(t=i.getDocument(t.startContainer).body.createTextRange()).setEndPoint("StartToStart",e),t.setEndPoint("EndToEnd",o),t}),o.prototype.getName=function(){return"WrappedRange"},t.WrappedRange=o,t.createRange=function(e){return e=e||document,new o(t.createNativeRange(e))},t.createRangyRange=function(t){return t=t||document,new r(t)},t.createIframeRange=function(e){return t.createRange(i.getIframeDocument(e))},t.createIframeRangyRange=function(e){return t.createRangyRange(i.getIframeDocument(e))},t.addCreateMissingNativeApiListener(function(e){void 0===(e=e.document).createRange&&(e.createRange=function(){return t.createRange(this)}),e=e=null})}),rangy.createModule("WrappedSelection",function(t,e){function n(t){return(t||window).getSelection()}function o(t){return(t||window).document.selection}function i(t,e,n){var o=n?"end":"start",n=n?"start":"end";t.anchorNode=e[o+"Container"],t.anchorOffset=e[o+"Offset"],t.focusNode=e[n+"Container"],t.focusOffset=e[n+"Offset"]}function a(t){t.anchorNode=t.focusNode=null,t.anchorOffset=t.focusOffset=0,t.rangeCount=0,t.isCollapsed=!0,t._ranges.length=0}function r(e){var n;return e instanceof y?(n=e._selectionNativeRange)||((n=t.createNativeRange(v.getDocument(e.startContainer))).setEnd(e.endContainer,e.endOffset),n.setStart(e.startContainer,e.startOffset),e._selectionNativeRange=n,e.attachListener("detach",function(){this._selectionNativeRange=null})):e instanceof w?n=e.nativeRange:t.features.implementsDomRange&&e instanceof v.getWindow(e.startContainer).Range&&(n=e),n}function s(t){var e,n=t.getNodes();t:if(n.length&&1==n[0].nodeType){e=1;for(var o=n.length;e<o;++e)if(!v.isAncestorOf(n[0],n[e])){e=!1;break t}e=!0}else e=!1;if(!e)throw Error("getSingleElementFromRange: range "+t.inspect()+" did not consist of a single element");return n[0]}function l(t,e){var n=new w(e);t._ranges=[n],i(t,n,!1),t.rangeCount=1,t.isCollapsed=n.collapsed}function c(e){if(e._ranges.length=0,"None"==e.docSelection.type)a(e);else{var n=e.docSelection.createRange();if(n&&void 0!==n.text)l(e,n);else{e.rangeCount=n.length;for(var o,r=v.getDocument(n.item(0)),s=0;s<e.rangeCount;++s)(o=t.createRange(r)).selectNode(n.item(s)),e._ranges.push(o);e.isCollapsed=1==e.rangeCount&&e._ranges[0].collapsed,i(e,e._ranges[e.rangeCount-1],!1)}}}function u(t,e){for(var n=t.docSelection.createRange(),o=s(e),i=v.getDocument(n.item(0)),i=v.getBody(i).createControlRange(),a=0,r=n.length;a<r;++a)i.add(n.item(a));try{i.add(o)}catch(t){throw Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}i.select(),c(t)}function d(t,e,n){this.nativeSelection=t,this.docSelection=e,this._ranges=[],this.win=n,this.refresh()}function h(t,e){for(var n,o=v.getDocument(e[0].startContainer),o=v.getBody(o).createControlRange(),i=0;i<rangeCount;++i){n=s(e[i]);try{o.add(n)}catch(t){throw Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}o.select(),c(t)}function f(t,e){if(t.anchorNode&&v.getDocument(t.anchorNode)!==v.getDocument(e))throw new C("WRONG_DOCUMENT_ERR")}function p(t){var e=[],n=new S(t.anchorNode,t.anchorOffset),o=new S(t.focusNode,t.focusOffset),i="function"==typeof t.getName?t.getName():"Selection";if(void 0!==t.rangeCount)for(var a=0,r=t.rangeCount;a<r;++a)e[a]=y.inspect(t.getRangeAt(a));return"["+i+"(Ranges: "+e.join(", ")+")(anchor: "+n.inspect()+", focus: "+o.inspect()+"]"}t.requireModules(["DomUtil","DomRange","WrappedRange"]),t.config.checkSelectionRanges=!0;var m,g,v=t.dom,b=t.util,y=t.DomRange,w=t.WrappedRange,C=t.DOMException,S=v.DomPosition,x=t.util.isHostMethod(window,"getSelection"),_=t.util.isHostObject(document,"selection"),T=_&&(!x||t.config.preferTextRange);T?(m=o,t.isSelectionValid=function(t){var e=(t=(t||window).document).selection;return"None"!=e.type||v.getDocument(e.createRange().parentElement())==t}):x?(m=n,t.isSelectionValid=function(){return!0}):e.fail("Neither document.selection or window.getSelection() detected."),t.getNativeSelection=m;var x=m(),D=t.createNativeRange(document),E=v.getBody(document),N=b.areHostObjects(x,b.areHostProperties(x,["anchorOffset","focusOffset"]));t.features.selectionHasAnchorAndFocus=N;var A=b.isHostMethod(x,"extend");t.features.selectionHasExtend=A;var R="number"==typeof x.rangeCount;t.features.selectionHasRangeCount=R;var I=!1,k=!0;b.areHostMethods(x,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof x.rangeCount&&t.features.implementsDomRange&&function(){var t=document.createElement("iframe");E.appendChild(t);var e=v.getIframeDocument(t);e.open(),e.write("<html><head></head><body>12</body></html>"),e.close();var n=v.getIframeWindow(t).getSelection(),o=e.documentElement.lastChild.firstChild;(e=e.createRange()).setStart(o,1),e.collapse(!0),n.addRange(e),k=1==n.rangeCount,n.removeAllRanges();var i=e.cloneRange();e.setStart(o,0),i.setEnd(o,2),n.addRange(e),n.addRange(i),I=2==n.rangeCount,e.detach(),i.detach(),E.removeChild(t)}(),t.features.selectionSupportsMultipleRanges=I,t.features.collapsedNonEditableSelectionsSupported=k;var F,O=!1;E&&b.isHostMethod(E,"createControlRange")&&(F=E.createControlRange(),b.areHostProperties(F,["item","add"])&&(O=!0)),t.features.implementsControlRange=O,g=N?function(t){return t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset}:function(t){return!!t.rangeCount&&t.getRangeAt(t.rangeCount-1).collapsed};var L;if(b.isHostMethod(x,"getRangeAt")?L=function(t,e){try{return t.getRangeAt(e)}catch(t){return null}}:N&&(L=function(e){var n=v.getDocument(e.anchorNode);return(n=t.createRange(n)).setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset),n.collapsed!==this.isCollapsed&&(n.setStart(e.focusNode,e.focusOffset),n.setEnd(e.anchorNode,e.anchorOffset)),n}),t.getSelection=function(t){var e=(t=t||window)._rangySelection,n=m(t),i=_?o(t):null;return e?(e.nativeSelection=n,e.docSelection=i,e.refresh(t)):(e=new d(n,i,t),t._rangySelection=e),e},t.getIframeSelection=function(e){return t.getSelection(v.getIframeWindow(e))},F=d.prototype,!T&&N&&b.areHostMethods(x,["removeAllRanges","addRange"])){F.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),a(this)};var P=function(e,n){var o=y.getRangeDocument(n);(o=t.createRange(o)).collapseToPoint(n.endContainer,n.endOffset),e.nativeSelection.addRange(r(o)),e.nativeSelection.extend(n.startContainer,n.startOffset),e.refresh()};F.addRange=R?function(e,n){if(O&&_&&"Control"==this.docSelection.type)u(this,e);else if(n&&A)P(this,e);else{var o;I?o=this.rangeCount:(this.removeAllRanges(),o=0),this.nativeSelection.addRange(r(e)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==o+1?(t.config.checkSelectionRanges&&(o=L(this.nativeSelection,this.rangeCount-1))&&!y.rangesEqual(o,e)&&(e=new w(o)),this._ranges[this.rangeCount-1]=e,i(this,e,H(this.nativeSelection)),this.isCollapsed=g(this)):this.refresh()}}:function(t,e){e&&A?P(this,t):(this.nativeSelection.addRange(r(t)),this.refresh())},F.setRanges=function(t){if(O&&t.length>1)h(this,t);else{this.removeAllRanges();for(var e=0,n=t.length;e<n;++e)this.addRange(t[e])}}}else{if(!(b.isHostMethod(x,"empty")&&b.isHostMethod(D,"select")&&O&&T))return e.fail("No means of selecting a Range or TextRange was found"),!1;F.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var t;if(this.anchorNode)t=v.getDocument(this.anchorNode);else if("Control"==this.docSelection.type){var e=this.docSelection.createRange();e.length&&(t=v.getDocument(e.item(0)).body.createTextRange())}t&&(t.body.createTextRange().select(),this.docSelection.empty())}}catch(t){}a(this)},F.addRange=function(t){"Control"==this.docSelection.type?u(this,t):(w.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,i(this,t,!1))},F.setRanges=function(t){this.removeAllRanges();var e=t.length;e>1?h(this,t):e&&this.addRange(t[0])}}F.getRangeAt=function(t){if(t<0||t>=this.rangeCount)throw new C("INDEX_SIZE_ERR");return this._ranges[t]};var B;if(T)B=function(e){var n;t.isSelectionValid(e.win)?n=e.docSelection.createRange():(n=v.getBody(e.win.document).createTextRange()).collapse(!0),"Control"==e.docSelection.type?c(e):n&&void 0!==n.text?l(e,n):a(e)};else if(b.isHostMethod(x,"getRangeAt")&&"number"==typeof x.rangeCount)B=function(e){if(O&&_&&"Control"==e.docSelection.type)c(e);else if(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount,e.rangeCount){for(var n=0,o=e.rangeCount;n<o;++n)e._ranges[n]=new t.WrappedRange(e.nativeSelection.getRangeAt(n));i(e,e._ranges[e.rangeCount-1],H(e.nativeSelection)),e.isCollapsed=g(e)}else a(e)};else{if(!N||"boolean"!=typeof x.isCollapsed||"boolean"!=typeof D.collapsed||!t.features.implementsDomRange)return e.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;B=function(t){var e;(e=t.nativeSelection).anchorNode?(e=L(e,0),t._ranges=[e],t.rangeCount=1,e=t.nativeSelection,t.anchorNode=e.anchorNode,t.anchorOffset=e.anchorOffset,t.focusNode=e.focusNode,t.focusOffset=e.focusOffset,t.isCollapsed=g(t)):a(t)}}F.refresh=function(t){var e=t?this._ranges.slice(0):null;if(B(this),t){if((t=e.length)!=this._ranges.length)return!1;for(;t--;)if(!y.rangesEqual(e[t],this._ranges[t]))return!1;return!0}};var M=function(t,e){var n=t.getAllRanges(),o=!1;t.removeAllRanges();for(var i=0,r=n.length;i<r;++i)o||e!==n[i]?t.addRange(n[i]):o=!0;t.rangeCount||a(t)};F.removeRange=O?function(t){if("Control"==this.docSelection.type){for(var e=this.docSelection.createRange(),t=s(t),n=v.getDocument(e.item(0)),n=v.getBody(n).createControlRange(),o=!1,i=0,a=e.length;i<a;++i)e.item(i)!==t||o?n.add(e.item(i)):o=!0;n.select(),c(this)}else M(this,t)}:function(t){M(this,t)};var H;!T&&N&&t.features.implementsDomRange?(H=function(t){var e=!1;return t.anchorNode&&(e=1==v.comparePoints(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)),e},F.isBackwards=function(){return H(this)}):H=F.isBackwards=function(){return!1},F.toString=function(){for(var t=[],e=0,n=this.rangeCount;e<n;++e)t[e]=""+this._ranges[e];return t.join("")},F.collapse=function(e,n){f(this,e);var o=t.createRange(v.getDocument(e));o.collapseToPoint(e,n),this.removeAllRanges(),this.addRange(o),this.isCollapsed=!0},F.collapseToStart=function(){if(!this.rangeCount)throw new C("INVALID_STATE_ERR");var t=this._ranges[0];this.collapse(t.startContainer,t.startOffset)},F.collapseToEnd=function(){if(!this.rangeCount)throw new C("INVALID_STATE_ERR");var t=this._ranges[this.rangeCount-1];this.collapse(t.endContainer,t.endOffset)},F.selectAllChildren=function(e){f(this,e);var n=t.createRange(v.getDocument(e));n.selectNodeContents(e),this.removeAllRanges(),this.addRange(n)},F.deleteFromDocument=function(){if(O&&_&&"Control"==this.docSelection.type){for(var t,e=this.docSelection.createRange();e.length;)t=e.item(0),e.remove(t),t.parentNode.removeChild(t);this.refresh()}else if(this.rangeCount){e=this.getAllRanges(),this.removeAllRanges(),t=0;for(var n=e.length;t<n;++t)e[t].deleteContents();this.addRange(e[n-1])}},F.getAllRanges=function(){return this._ranges.slice(0)},F.setSingleRange=function(t){this.setRanges([t])},F.containsNode=function(t,e){for(var n=0,o=this._ranges.length;n<o;++n)if(this._ranges[n].containsNode(t,e))return!0;return!1},F.toHtml=function(){t="";if(this.rangeCount){for(var t=y.getRangeDocument(this._ranges[0]).createElement("div"),e=0,n=this._ranges.length;e<n;++e)t.appendChild(this._ranges[e].cloneContents());t=t.innerHTML}return t},F.getName=function(){return"WrappedSelection"},F.inspect=function(){return p(this)},F.detach=function(){this.win=this.anchorNode=this.focusNode=this.win._rangySelection=null},d.inspect=p,t.Selection=d,t.selectionPrototype=F,t.addCreateMissingNativeApiListener(function(e){void 0===e.getSelection&&(e.getSelection=function(){return t.getSelection(this)}),e=null})});var Base=function(){};Base.extend=function(t,e){var n=Base.prototype.extend;Base._prototyping=!0;var o=new this;n.call(o,t),o.base=function(){},delete Base._prototyping;var i=o.constructor,a=o.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==a)this._constructing=!0,i.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||n).call(arguments[0],o)};return a.ancestor=this,a.extend=this.extend,a.forEach=this.forEach,a.implement=this.implement,a.prototype=o,a.toString=this.toString,a.valueOf=function(t){return"object"==t?a:i.valueOf()},n.call(a,e),"function"==typeof a.init&&a.init(),a},Base.prototype={extend:function(t,e){if(1<arguments.length){var n=this[t];if(n&&"function"==typeof e&&(!n.valueOf||n.valueOf()!=e.valueOf())&&/\bbase\b/.test(e)){var o=e.valueOf();(e=function(){var t=this.base||Base.prototype.base;this.base=n;var e=o.apply(this,arguments);return this.base=t,e}).valueOf=function(t){return"object"==t?e:o},e.toString=Base.toString}this[t]=e}else if(t){var i=Base.prototype.extend;!Base._prototyping&&"function"!=typeof this&&(i=this.extend||i);for(var a={toSource:null},r=["constructor","toString","valueOf"],s=Base._prototyping?0:1;l=r[s++];)t[l]!=a[l]&&i.call(this,l,t[l]);for(var l in t)a[l]||i.call(this,l,t[l])}return this}},Base=Base.extend({constructor:function(t){this.extend(t)}},{ancestor:Object,version:"1.1",forEach:function(t,e,n){for(var o in t)void 0===this.prototype[o]&&e.call(n,t[o],o,t)},implement:function(){for(var t=0;t<arguments.length;t++)"function"==typeof arguments[t]?arguments[t](this.prototype):this.prototype.extend(arguments[t]);return this},toString:function(){return""+this.valueOf()}}),wysihtml5.browser=function(){var t=navigator.userAgent,e=document.createElement("div"),n=-1!==t.indexOf("MSIE")&&-1===t.indexOf("Opera"),o=-1!==t.indexOf("Gecko")&&-1===t.indexOf("KHTML"),i=-1!==t.indexOf("AppleWebKit/"),a=-1!==t.indexOf("Chrome/"),r=-1!==t.indexOf("Opera/");return{USER_AGENT:t,supported:function(){var t=this.USER_AGENT.toLowerCase(),n="contentEditable"in e,o=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,i=document.querySelector&&document.querySelectorAll,t=this.isIos()&&5>(/ipad|iphone|ipod/.test(t)&&t.match(/ os (\d+).+? like mac os x/)||[,0])[1]||-1!==t.indexOf("opera mobi")||-1!==t.indexOf("hpwos/");return n&&o&&i&&!t},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){var t=this.USER_AGENT.toLowerCase();return-1!==t.indexOf("webkit")&&-1!==t.indexOf("mobile")},supportsSandboxedIframes:function(){return n},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return!o},hasCurrentStyleProperty:function(){return"currentStyle"in e},insertsLineBreaksOnReturn:function(){return o},supportsPlaceholderAttributeOn:function(t){return"placeholder"in t},supportsEvent:function(t){var n;return(n="on"+t in e)||(e.setAttribute("on"+t,"return;"),n="function"==typeof e["on"+t]),n},supportsEventsInIframeCorrectly:function(){return!r},firesOnDropOnlyWhenOnDragOverIsCancelled:function(){return i||o},supportsDataTransfer:function(){try{return i&&(window.Clipboard||window.DataTransfer).prototype.getData}catch(t){return!1}},supportsHTML5Tags:function(t){return t=t.createElement("div"),t.innerHTML="<article>foo</article>","<article>foo</article>"===t.innerHTML.toLowerCase()},supportsCommand:function(){var t={formatBlock:n,insertUnorderedList:n||r||i,insertOrderedList:n||r||i},e={insertHTML:o};return function(n,o){if(!t[o]){try{return n.queryCommandSupported(o)}catch(t){}try{return n.queryCommandEnabled(o)}catch(t){return!!e[o]}}return!1}}(),doesAutoLinkingInContentEditable:function(){return n},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return o||r||i},supportsGetAttributeCorrectly:function(){return"1"!=document.createElement("td").getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return o||n||r},clearsListsInContentEditableCorrectly:function(){return o||n||i},autoScrollsToCaret:function(){return!i},autoClosesUnclosedTags:function(){var t,n=e.cloneNode(!1);return n.innerHTML="<p><div></div>",n=n.innerHTML.toLowerCase(),t="<p></p><div></div>"===n||"<p><div></div></p>"===n,this.autoClosesUnclosedTags=function(){return t},t},supportsNativeGetElementsByClassName:function(){return-1!==(""+document.getElementsByClassName).indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},supportsClassList:function(){return"classList"in e},needsSpaceAfterLineBreak:function(){return r},supportsSpeechApiOn:function(e){return 11<=(t.match(/Chrome\/(\d+)/)||[,0])[1]&&("onwebkitspeechchange"in e||"speech"in e)},crashesWhenDefineProperty:function(t){return n&&("XMLHttpRequest"===t||"XDomainRequest"===t)},doesAsyncFocus:function(){return n},hasProblemsSettingCaretAfterImg:function(){return n},hasUndoInContextMenu:function(){return o||a||r}}}(),wysihtml5.lang.array=function(t){return{contains:function(e){if(t.indexOf)return-1!==t.indexOf(e);for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return!0;return!1},without:function(e){for(var e=wysihtml5.lang.array(e),n=[],o=0,i=t.length;o<i;o++)e.contains(t[o])||n.push(t[o]);return n},get:function(){for(var e=0,n=t.length,o=[];e<n;e++)o.push(t[e]);return o}}},wysihtml5.lang.Dispatcher=Base.extend({observe:function(t,e){return this.events=this.events||{},this.events[t]=this.events[t]||[],this.events[t].push(e),this},on:function(){return this.observe.apply(this,wysihtml5.lang.array(arguments).get())},fire:function(t,e){this.events=this.events||{};for(var n=this.events[t]||[],o=0;o<n.length;o++)n[o].call(this,e);return this},stopObserving:function(t,e){this.events=this.events||{};var n,o,i=0;if(t){for(n=this.events[t]||[],o=[];i<n.length;i++)n[i]!==e&&e&&o.push(n[i]);this.events[t]=o}else this.events={};return this}}),wysihtml5.lang.object=function(t){return{merge:function(e){for(var n in e)t[n]=e[n];return this},get:function(){return t},clone:function(){var e,n={};for(e in t)n[e]=t[e];return n},isArray:function(){return"[object Array]"===Object.prototype.toString.call(t)}}},function(){var t=/^\s+/,e=/\s+$/;wysihtml5.lang.string=function(n){return n=""+n,{trim:function(){return n.replace(t,"").replace(e,"")},interpolate:function(t){for(var e in t)n=this.replace("#{"+e+"}").by(t[e]);return n},replace:function(t){return{by:function(e){return n.split(t).join(e)}}}}}}(),function(t){function e(t){return t.replace(i,function(t,e){var n=(e.match(a)||[])[1]||"",o=s[n];(e=e.replace(a,"")).split(o).length>e.split(n).length&&(e+=n,n="");var i=o=e;return e.length>r&&(i=i.substr(0,r)+"..."),"www."===o.substr(0,4)&&(o="http://"+o),'<a href="'+o+'">'+i+"</a>"+n})}function n(a){if(!o.contains(a.nodeName)){if(a.nodeType!==t.TEXT_NODE||!a.data.match(i)){for(r=(s=t.lang.array(a.childNodes).get()).length,l=0;l<r;l++)n(s[l]);return a}var r,s=a.parentNode,l=(r=s.ownerDocument)._wysihtml5_tempElement;for(l||(l=r._wysihtml5_tempElement=r.createElement("div")),(r=l).innerHTML="<span></span>"+e(a.data),r.removeChild(r.firstChild);r.firstChild;)s.insertBefore(r.firstChild,a);s.removeChild(a)}}var o=t.lang.array("CODE PRE A SCRIPT HEAD TITLE STYLE".split(" ")),i=/((https?:\/\/|www\.)[^\s<]{3,})/gi,a=/([^\w\/\-](,?))$/i,r=100,s={")":"(","]":"[","}":"{"};t.dom.autoLink=function(t){var e;t:{e=t;for(var i;e.parentNode;){if(e=e.parentNode,i=e.nodeName,o.contains(i)){e=!0;break t}if("body"===i)break}e=!1}return e?t:(t===t.ownerDocument.documentElement&&(t=t.ownerDocument.body),n(t))},t.dom.autoLink.URL_REG_EXP=i}(wysihtml5),function(t){var e=t.browser.supportsClassList(),n=t.dom;n.addClass=function(t,o){if(e)return t.classList.add(o);n.hasClass(t,o)||(t.className+=" "+o)},n.removeClass=function(t,n){if(e)return t.classList.remove(n);t.className=t.className.replace(RegExp("(^|\\s+)"+n+"(\\s+|$)")," ")},n.hasClass=function(t,n){if(e)return t.classList.contains(n);var o=t.className;return 0<o.length&&(o==n||RegExp("(^|\\s)"+n+"(\\s|$)").test(o))}}(wysihtml5),wysihtml5.dom.contains=function(){var t=document.documentElement;return t.contains?function(t,e){return e.nodeType!==wysihtml5.ELEMENT_NODE&&(e=e.parentNode),t!==e&&t.contains(e)}:t.compareDocumentPosition?function(t,e){return!!(16&t.compareDocumentPosition(e))}:void 0}(),wysihtml5.dom.convertToList=function(){function t(t,e){var n=t.createElement("li");return e.appendChild(n),n}return function(e,n){if("UL"===e.nodeName||"OL"===e.nodeName||"MENU"===e.nodeName)return e;var o,i,a,r,s,l=e.ownerDocument,c=l.createElement(n),u=e.querySelectorAll("br"),d=u.length;for(s=0;s<d;s++)for(o=u[s];(i=o.parentNode)&&i!==e&&i.lastChild===o;){if("block"===wysihtml5.dom.getStyle("display").from(i)){i.removeChild(o);break}wysihtml5.dom.insert(o).after(o.parentNode)}for(d=(u=wysihtml5.lang.array(e.childNodes).get()).length,s=0;s<d;s++)r=r||t(l,c),o=u[s],i="block"===wysihtml5.dom.getStyle("display").from(o),a="BR"===o.nodeName,i?((r=r.firstChild?t(l,c):r).appendChild(o),r=null):a?r=r.firstChild?null:r:r.appendChild(o);return e.parentNode.replaceChild(c,e),c}}(),wysihtml5.dom.copyAttributes=function(t){return{from:function(e){return{to:function(n){for(var o,i=0,a=t.length;i<a;i++)o=t[i],void 0!==e[o]&&""!==e[o]&&(n[o]=e[o]);return{andTo:arguments.callee}}}}}},function(t){var e=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],n=function(n){var o;t:for(var i=0,a=e.length;i<a;i++)if("border-box"===t.getStyle(e[i]).from(n)){o=e[i];break t}return!!o&&parseInt(t.getStyle("width").from(n),10)<n.offsetWidth};t.copyStyles=function(o){return{from:function(i){n(i)&&(o=wysihtml5.lang.array(o).without(e));for(var a,r="",s=o.length,l=0;l<s;l++)a=o[l],r+=a+":"+t.getStyle(a).from(i)+";";return{to:function(e){return t.setStyles(r).on(e),{andTo:arguments.callee}}}}}}}(wysihtml5.dom),function(t){t.dom.delegate=function(e,n,o,i){return t.dom.observe(e,o,function(o){for(var a=o.target,r=t.lang.array(e.querySelectorAll(n));a&&a!==e;){if(r.contains(a)){i.call(a,o);break}a=a.parentNode}})}}(wysihtml5),wysihtml5.dom.getAsDom=function(){var t="abbr article aside audio bdi canvas command datalist details figcaption figure footer header hgroup keygen mark meter nav output progress rp rt ruby svg section source summary time track video wbr".split(" ");return function(e,n){var o,n=n||document;if("object"==typeof e&&e.nodeType)(o=n.createElement("div")).appendChild(e);else if(wysihtml5.browser.supportsHTML5Tags(n))o=n.createElement("div"),o.innerHTML=e;else{if(!(o=n)._wysihtml5_supportsHTML5Tags){for(var i=0,a=t.length;i<a;i++)o.createElement(t[i]);o._wysihtml5_supportsHTML5Tags=!0}(i=(o=n).createElement("div")).style.display="none",o.body.appendChild(i);try{i.innerHTML=e}catch(t){}o.body.removeChild(i),o=i}return o}}(),wysihtml5.dom.getParentElement=function(){function t(t,e){return!e||!e.length||("string"==typeof e?t===e:wysihtml5.lang.array(e).contains(t))}return function(e,n,o){if(o=o||50,n.className||n.classRegExp){t:{for(var i=n.nodeName,a=n.className,n=n.classRegExp;o--&&e&&"BODY"!==e.nodeName;){var r;if((r=e.nodeType===wysihtml5.ELEMENT_NODE)&&(r=t(e.nodeName,i))){r=a;var s=(e.className||"").match(n)||[];r=r?s[s.length-1]===r:!!s.length}if(r)break t;e=e.parentNode}e=null}return e}t:{for(i=n.nodeName,a=o;a--&&e&&"BODY"!==e.nodeName;){if(t(e.nodeName,i))break t;e=e.parentNode}e=null}return e}}(),wysihtml5.dom.getStyle=function(){function t(t){return t.replace(n,function(t){return t.charAt(1).toUpperCase()})}var e={float:"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},n=/\-[a-z]/g;return function(n){return{from:function(o){if(o.nodeType===wysihtml5.ELEMENT_NODE){var i=o.ownerDocument,a=e[n]||t(n),r=o.style,s=o.currentStyle,l=r[a];if(l)return l;if(s)try{return s[a]}catch(t){}var c,a=i.defaultView||i.parentWindow,i=("height"===n||"width"===n)&&"TEXTAREA"===o.nodeName;if(a.getComputedStyle)return i&&(c=r.overflow,r.overflow="hidden"),o=a.getComputedStyle(o,null).getPropertyValue(n),i&&(r.overflow=c||""),o}}}}}(),wysihtml5.dom.hasElementWithTagName=function(){var t={},e=1;return function(n,o){var i=(n._wysihtml5_identifier||(n._wysihtml5_identifier=e++))+":"+o,a=t[i];return a||(a=t[i]=n.getElementsByTagName(o)),0<a.length}}(),function(t){var e={},n=1;t.dom.hasElementWithClassName=function(o,i){if(!t.browser.supportsNativeGetElementsByClassName())return!!o.querySelector("."+i);var a=(o._wysihtml5_identifier||(o._wysihtml5_identifier=n++))+":"+i,r=e[a];return r||(r=e[a]=o.getElementsByClassName(i)),0<r.length}}(wysihtml5),wysihtml5.dom.insert=function(t){return{after:function(e){e.parentNode.insertBefore(t,e.nextSibling)},before:function(e){e.parentNode.insertBefore(t,e)},into:function(e){e.appendChild(t)}}},wysihtml5.dom.insertCSS=function(t){return t=t.join("\n"),{into:function(e){var n=e.head||e.getElementsByTagName("head")[0],o=e.createElement("style");o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(e.createTextNode(t)),n&&n.appendChild(o)}}},wysihtml5.dom.observe=function(t,e,n){for(var o,i,a=0,r=(e="string"==typeof e?[e]:e).length;a<r;a++)i=e[a],t.addEventListener?t.addEventListener(i,n,!1):(o=function(e){"target"in e||(e.target=e.srcElement),e.preventDefault=e.preventDefault||function(){this.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){this.cancelBubble=!0},n.call(t,e)},t.attachEvent("on"+i,o));return{stop:function(){for(var i,a=0,r=e.length;a<r;a++)i=e[a],t.removeEventListener?t.removeEventListener(i,n,!1):t.detachEvent("on"+i,o)}}},wysihtml5.dom.parse=function(){function t(e,i){var a,r=e.childNodes,s=r.length,l=0;if(!(a=(a=n[e.nodeType])&&a(e)))return null;for(l=0;l<s;l++)(newChild=t(r[l],i))&&a.appendChild(newChild);return i&&1>=a.childNodes.length&&a.nodeName.toLowerCase()===o&&!a.attributes.length?a.firstChild:a}function e(t,e){var n,e=e.toLowerCase();if((n="IMG"==t.nodeName)&&(n="src"==e)){var o;try{o=t.complete&&!t.mozMatchesSelector(":-moz-broken")}catch(e){t.complete&&"complete"===t.readyState&&(o=!0)}n=!0===o}return n?t.src:s&&"outerHTML"in t?-1!=t.outerHTML.toLowerCase().indexOf(" "+e+"=")?t.getAttribute(e):null:t.getAttribute(e)}var n={1:function(t){var n,a,s=r.tags;if(a=t.nodeName.toLowerCase(),n=t.scopeName,t._wysihtml5)return null;if(t._wysihtml5=1,"wysihtml5-temp"===t.className)return null;if(n&&"HTML"!=n&&(a=n+":"+a),"outerHTML"in t&&!wysihtml5.browser.autoClosesUnclosedTags()&&"P"===t.nodeName&&"</p>"!==t.outerHTML.slice(-4).toLowerCase()&&(a="div"),a in s){if(!(n=s[a])||n.remove)return null;n="string"==typeof n?{rename_tag:n}:n}else{if(!t.firstChild)return null;n={rename_tag:o}}a=t.ownerDocument.createElement(n.rename_tag||a);var s={},u=n.set_class,d=n.add_class,h=n.set_attributes,f=n.check_attributes,p=r.classes,m=0,g=[];n=[];var v,b=[],y=[];if(h&&(s=wysihtml5.lang.object(h).clone()),f)for(v in f)(h=l[f[v]])&&"string"==typeof(h=h(e(t,v)))&&(s[v]=h);if(u&&g.push(u),d)for(v in d)(h=c[d[v]])&&"string"==typeof(u=h(e(t,v)))&&g.push(u);for(p["_wysihtml5-temp-placeholder"]=1,(y=t.getAttribute("class"))&&(g=g.concat(y.split(i))),d=g.length;m<d;m++)t=g[m],p[t]&&n.push(t);for(p=n.length;p--;)t=n[p],wysihtml5.lang.array(b).contains(t)||b.unshift(t);b.length&&(s.class=b.join(" "));for(v in s)try{a.setAttribute(v,s[v])}catch(t){}return s.src&&(void 0!==s.width&&a.setAttribute("width",s.width),void 0!==s.height&&a.setAttribute("height",s.height)),a},3:function(t){return t.ownerDocument.createTextNode(t.data)}},o="span",i=/\s+/,a={tags:{},classes:{}},r={},s=!wysihtml5.browser.supportsGetAttributeCorrectly(),l={url:function(){var t=/^https?:\/\//i;return function(e){return e&&e.match(t)?e.replace(t,function(t){return t.toLowerCase()}):null}}(),alt:function(){var t=/[^ a-z0-9_\-]/gi;return function(e){return e?e.replace(t,""):""}}(),numbers:function(){var t=/\D/g;return function(e){return(e=(e||"").replace(t,""))||null}}()},c={align_img:function(){var t={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(e){return t[(""+e).toLowerCase()]}}(),align_text:function(){var t={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(e){return t[(""+e).toLowerCase()]}}(),clear_br:function(){var t={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(e){return t[(""+e).toLowerCase()]}}(),size_font:function(){var t={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(e){return t[(""+e).charAt(0)]}}()};return function(e,n,o,i){wysihtml5.lang.object(r).merge(a).merge(n).get();for(var n=(o=o||e.ownerDocument||document).createDocumentFragment(),s="string"==typeof e,e=s?wysihtml5.dom.getAsDom(e,o):e;e.firstChild;)o=e.firstChild,e.removeChild(o),(o=t(o,i))&&n.appendChild(o);return e.innerHTML="",e.appendChild(n),s?wysihtml5.quirks.getCorrectInnerHTML(e):e}}(),wysihtml5.dom.removeEmptyTextNodes=function(t){for(var e=wysihtml5.lang.array(t.childNodes).get(),n=e.length,o=0;o<n;o++)(t=e[o]).nodeType===wysihtml5.TEXT_NODE&&""===t.data&&t.parentNode.removeChild(t)},wysihtml5.dom.renameElement=function(t,e){for(var n,o=t.ownerDocument.createElement(e);n=t.firstChild;)o.appendChild(n);return wysihtml5.dom.copyAttributes(["align","className"]).from(t).to(o),t.parentNode.replaceChild(o,t),o},wysihtml5.dom.replaceWithChildNodes=function(t){if(t.parentNode)if(t.firstChild){for(var e=t.ownerDocument.createDocumentFragment();t.firstChild;)e.appendChild(t.firstChild);t.parentNode.replaceChild(e,t)}else t.parentNode.removeChild(t)},function(t){function e(t){var e=t.ownerDocument.createElement("br");t.appendChild(e)}t.resolveList=function(n){if("MENU"===n.nodeName||"UL"===n.nodeName||"OL"===n.nodeName){var o,i,a,r=n.ownerDocument.createDocumentFragment(),s=n.previousElementSibling||n.previousSibling;for(s&&"block"!==t.getStyle("display").from(s)&&e(r);a=n.firstChild;){for(o=a.lastChild;s=a.firstChild;)i=(i=s===o)&&"block"!==t.getStyle("display").from(s)&&"BR"!==s.nodeName,r.appendChild(s),i&&e(r);a.parentNode.removeChild(a)}n.parentNode.replaceChild(r,n)}}}(wysihtml5.dom),function(t){var e=document,n="parent top opener frameElement frames localStorage globalStorage sessionStorage indexedDB".split(" "),o="open close openDialog showModalDialog alert confirm prompt openDatabase postMessage XMLHttpRequest XDomainRequest".split(" "),i=["referrer","write","open","close"];t.dom.Sandbox=Base.extend({constructor:function(e,n){this.callback=e||t.EMPTY_FUNCTION,this.config=t.lang.object({}).merge(n).get(),this.iframe=this._createIframe()},insertInto:function(t){"string"==typeof t&&(t=e.getElementById(t)),t.appendChild(this.iframe)},getIframe:function(){return this.iframe},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var t=this.getIframe();t.parentNode.removeChild(t)},_readyError:function(){throw Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var n=this,o=e.createElement("iframe");return o.className="wysihtml5-sandbox",t.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(o),t.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(o.src="javascript:'<html></html>'"),o.onload=function(){o.onreadystatechange=o.onload=null,n._onLoadIframe(o)},o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&(o.onreadystatechange=o.onload=null,n._onLoadIframe(o))},o},_onLoadIframe:function(a){if(t.dom.contains(e.documentElement,a)){var r=this,s=a.contentWindow,l=a.contentWindow.document,c=this._getHtml({charset:e.characterSet||e.charset||"utf-8",stylesheets:this.config.stylesheets});if(l.open("text/html","replace"),l.write(c),l.close(),this.getWindow=function(){return a.contentWindow},this.getDocument=function(){return a.contentWindow.document},s.onerror=function(t,e,n){throw Error("wysihtml5.Sandbox: "+t,e,n)},!t.browser.supportsSandboxedIframes()){var u,c=0;for(u=n.length;c<u;c++)this._unset(s,n[c]);for(c=0,u=o.length;c<u;c++)this._unset(s,o[c],t.EMPTY_FUNCTION);for(c=0,u=i.length;c<u;c++)this._unset(l,i[c]);this._unset(l,"cookie","",!0)}this.loaded=!0,setTimeout(function(){r.callback(r)},0)}},_getHtml:function(e){var n,o=e.stylesheets,i="",a=0;if(o="string"==typeof o?[o]:o)for(n=o.length;a<n;a++)i+='<link rel="stylesheet" href="'+o[a]+'">';return e.stylesheets=i,t.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(e)},_unset:function(e,n,o,i){try{e[n]=o}catch(t){}try{e.__defineGetter__(n,function(){return o})}catch(t){}if(i)try{e.__defineSetter__(n,function(){})}catch(t){}if(!t.browser.crashesWhenDefineProperty(n))try{var a={get:function(){return o}};i&&(a.set=function(){}),Object.defineProperty(e,n,a)}catch(t){}}})}(wysihtml5),function(){var t={className:"class"};wysihtml5.dom.setAttributes=function(e){return{on:function(n){for(var o in e)n.setAttribute(t[o]||o,e[o])}}}}(),wysihtml5.dom.setStyles=function(t){return{on:function(e){if(e=e.style,"string"==typeof t)e.cssText+=";"+t;else for(var n in t)"float"===n?(e.cssFloat=t[n],e.styleFloat=t[n]):e[n]=t[n]}}},function(t){t.simulatePlaceholder=function(e,n,o){var i=function(){n.hasPlaceholderSet()&&n.clear(),t.removeClass(n.element,"placeholder")},a=function(){n.isEmpty()&&(n.setValue(o),t.addClass(n.element,"placeholder"))};e.observe("set_placeholder",a).observe("unset_placeholder",i).observe("focus:composer",i).observe("paste:composer",i).observe("blur:composer",a),a()}}(wysihtml5.dom),function(t){var e=document.documentElement;"textContent"in e?(t.setTextContent=function(t,e){t.textContent=e},t.getTextContent=function(t){return t.textContent}):"innerText"in e?(t.setTextContent=function(t,e){t.innerText=e},t.getTextContent=function(t){return t.innerText}):(t.setTextContent=function(t,e){t.nodeValue=e},t.getTextContent=function(t){return t.nodeValue})}(wysihtml5.dom),wysihtml5.quirks.cleanPastedHTML=function(){var t={"a u":wysihtml5.dom.replaceWithChildNodes};return function(e,n,o){var i,a,r,n=n||t,o=o||e.ownerDocument||document,s="string"==typeof e,l=0,e=s?wysihtml5.dom.getAsDom(e,o):e;for(r in n)for(i=e.querySelectorAll(r),o=n[r],a=i.length;l<a;l++)o(i[l]);return s?e.innerHTML:e}}(),function(t){var e=t.dom;t.quirks.ensureProperClearing=function(){var t=function(){var t=this;setTimeout(function(){var e=t.innerHTML.toLowerCase();"<p>&nbsp;</p>"!=e&&"<p>&nbsp;</p><p>&nbsp;</p>"!=e||(t.innerHTML="")},0)};return function(n){e.observe(n.element,["cut","keydown"],t)}}(),t.quirks.ensureProperClearingOfLists=function(){var n=["OL","UL","MENU"];return function(o){e.observe(o.element,"keydown",function(i){if(i.keyCode===t.BACKSPACE_KEY){var a=o.selection.getSelectedNode();(i=o.element).firstChild&&t.lang.array(n).contains(i.firstChild.nodeName)&&(a=e.getParentElement(a,{nodeName:n}))&&a==i.firstChild&&1>=a.childNodes.length&&(a.firstChild?""===a.firstChild.innerHTML:1)&&a.parentNode.removeChild(a)}})}}()}(wysihtml5),function(t){t.quirks.getCorrectInnerHTML=function(e){var n=e.innerHTML;if(-1===n.indexOf("%7E"))return n;var o,i,a,r;for(r=0,a=(e=e.querySelectorAll("[href*='~'], [src*='~']")).length;r<a;r++)o=e[r].href||e[r].src,i=t.lang.string(o).replace("~").by("%7E"),n=t.lang.string(n).replace(i).by(o);return n}}(wysihtml5),function(t){var e=t.dom,n="LI P H1 H2 H3 H4 H5 H6".split(" "),o=["UL","OL","MENU"];t.quirks.insertLineBreakOnReturn=function(i){function a(n){if(n=e.getParentElement(n,{nodeName:["P","DIV"]},2)){var o=document.createTextNode(t.INVISIBLE_SPACE);e.insert(o).before(n),e.replaceWithChildNodes(n),i.selection.selectNode(o)}}e.observe(i.element.ownerDocument,"keydown",function(r){var s=r.keyCode;if(!(r.shiftKey||s!==t.ENTER_KEY&&s!==t.BACKSPACE_KEY)){var l=i.selection.getSelectedNode();(l=e.getParentElement(l,{nodeName:n},4))?"LI"!==l.nodeName||s!==t.ENTER_KEY&&s!==t.BACKSPACE_KEY?l.nodeName.match(/H[1-6]/)&&s===t.ENTER_KEY&&setTimeout(function(){a(i.selection.getSelectedNode())},0):setTimeout(function(){var t=i.selection.getSelectedNode();t&&(e.getParentElement(t,{nodeName:o},2)||a(t))},0):s===t.ENTER_KEY&&!t.browser.insertsLineBreaksOnReturn()&&(i.commands.exec("insertLineBreak"),r.preventDefault())}})}}(wysihtml5),function(t){t.quirks.redraw=function(e){t.dom.addClass(e,"wysihtml5-quirks-redraw"),t.dom.removeClass(e,"wysihtml5-quirks-redraw");try{var n=e.ownerDocument;n.execCommand("italic",!1,null),n.execCommand("italic",!1,null)}catch(t){}}}(wysihtml5),function(t){var e=t.dom;t.Selection=Base.extend({constructor:function(t){window.rangy.init(),this.editor=t,this.composer=t.composer,this.doc=this.composer.doc},getBookmark:function(){var t=this.getRange();return t&&t.cloneRange()},setBookmark:function(t){t&&this.setSelection(t)},setBefore:function(t){var e=rangy.createRange(this.doc);return e.setStartBefore(t),e.setEndBefore(t),this.setSelection(e)},setAfter:function(t){var e=rangy.createRange(this.doc);return e.setStartAfter(t),e.setEndAfter(t),this.setSelection(e)},selectNode:function(n){var o=rangy.createRange(this.doc),i=n.nodeType===t.ELEMENT_NODE,a="canHaveHTML"in n?n.canHaveHTML:"IMG"!==n.nodeName,r=""===(r=i?n.innerHTML:n.data)||r===t.INVISIBLE_SPACE,s="block"===(s=e.getStyle("display").from(n))||"list-item"===s;if(r&&i&&a)try{n.innerHTML=t.INVISIBLE_SPACE}catch(t){}a?o.selectNodeContents(n):o.selectNode(n),a&&r&&i?o.collapse(s):a&&r&&(o.setStartAfter(n),o.setEndAfter(n)),this.setSelection(o)},getSelectedNode:function(t){return t&&this.doc.selection&&"Control"===this.doc.selection.type&&(t=this.doc.selection.createRange())&&t.length?t.item(0):(t=this.getSelection(this.doc),t.focusNode===t.anchorNode?t.focusNode:(t=this.getRange(this.doc))?t.commonAncestorContainer:this.doc.body)},executeAndRestore:function(e,n){var o=this.doc.body,i=n&&o.scrollTop,a=n&&o.scrollLeft,r='<span class="_wysihtml5-temp-placeholder">'+t.INVISIBLE_SPACE+"</span>",s=this.getRange(this.doc);if(s){r=s.createContextualFragment(r),s.insertNode(r);try{e(s.startContainer,s.endContainer)}catch(t){setTimeout(function(){throw t},0)}(caretPlaceholder=this.doc.querySelector("._wysihtml5-temp-placeholder"))?((s=rangy.createRange(this.doc)).selectNode(caretPlaceholder),s.deleteContents(),this.setSelection(s)):o.focus(),n&&(o.scrollTop=i,o.scrollLeft=a);try{caretPlaceholder.parentNode.removeChild(caretPlaceholder)}catch(t){}}else e(o,o)},executeAndRestoreSimple:function(t){var e,n,o,i=this.getRange(),a=this.doc.body;if(i){a=(e=i.getNodes([3]))[0]||i.startContainer,o=e[e.length-1]||i.endContainer,e=a===i.startContainer?i.startOffset:0,n=o===i.endContainer?i.endOffset:o.length;try{t(i.startContainer,i.endContainer)}catch(t){setTimeout(function(){throw t},0)}t=rangy.createRange(this.doc);try{t.setStart(a,e)}catch(t){}try{t.setEnd(o,n)}catch(t){}try{this.setSelection(t)}catch(t){}}else t(a,a)},insertHTML:function(t){var e=(t=rangy.createRange(this.doc).createContextualFragment(t)).lastChild;this.insertNode(t),e&&this.setAfter(e)},insertNode:function(t){var e=this.getRange();e&&e.insertNode(t)},surround:function(t){var e=this.getRange();if(e)try{e.surroundContents(t),this.selectNode(t)}catch(n){t.appendChild(e.extractContents()),e.insertNode(t)}},scrollIntoView:function(){var e,n=this.doc,o=n.documentElement.scrollHeight>n.documentElement.offsetHeight;if((e=n._wysihtml5ScrollIntoViewElement)||(e=n.createElement("span"),e.innerHTML=t.INVISIBLE_SPACE),e=n._wysihtml5ScrollIntoViewElement=e,o){this.insertNode(e);var i=0;if((o=e).parentNode)do{i+=o.offsetTop||0,o=o.offsetParent}while(o);o=i,e.parentNode.removeChild(e),o>n.body.scrollTop&&(n.body.scrollTop=o)}},selectLine:function(){t.browser.supportsSelectionModify()?this._selectLine_W3C():this.doc.selection&&this._selectLine_MSIE()},_selectLine_W3C:function(){var t=this.doc.defaultView.getSelection();t.modify("extend","left","lineboundary"),t.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var t,e=this.doc.selection.createRange(),n=e.boundingTop,o=this.doc.body.scrollWidth;if(e.moveToPoint){for(0===n&&(t=this.doc.createElement("span"),this.insertNode(t),n=t.offsetTop,t.parentNode.removeChild(t)),n+=1,t=-10;t<o;t+=2)try{e.moveToPoint(t,n);break}catch(t){}for(t=this.doc.selection.createRange();0<=o;o--)try{t.moveToPoint(o,n);break}catch(t){}e.setEndPoint("EndToEnd",t),e.select()}},getText:function(){var t=this.getSelection();return t?t.toString():""},getNodes:function(t,e){var n=this.getRange();return n?n.getNodes([t],e):[]},getRange:function(){var t=this.getSelection();return t&&t.rangeCount&&t.getRangeAt(0)},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(t){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow).setSingleRange(t)}})}(wysihtml5),function(t,e){function n(t,n){return e.dom.isCharacterDataNode(t)?0==n?!!t.previousSibling:n!=t.length||!!t.nextSibling:0<n&&n<t.childNodes.length}function o(t,n,i){var a;if(e.dom.isCharacterDataNode(n)&&(0==i?(i=e.dom.getNodeIndex(n),n=n.parentNode):i==n.length?(i=e.dom.getNodeIndex(n)+1,n=n.parentNode):a=e.dom.splitDataNode(n,i)),!a){(a=n.cloneNode(!1)).id&&a.removeAttribute("id");for(var r;r=n.childNodes[i];)a.appendChild(r);e.dom.insertAfter(a,n)}return n==t?a:o(t,a.parentNode,e.dom.getNodeIndex(a))}function i(e){this.firstTextNode=(this.isElementMerge=e.nodeType==t.ELEMENT_NODE)?e.lastChild:e,this.textNodes=[this.firstTextNode]}function a(t,e,n,o){this.tagNames=t||[r],this.cssClass=e||"",this.similarClassRegExp=n,this.normalize=o,this.applyToAnyTagName=!1}var r="span",s=/\s+/g;i.prototype={doMerge:function(){for(var t,e,n=[],o=0,i=this.textNodes.length;o<i;++o)t=this.textNodes[o],e=t.parentNode,n[o]=t.data,o&&(e.removeChild(t),e.hasChildNodes()||e.parentNode.removeChild(e));return this.firstTextNode.data=n=n.join("")},getLength:function(){for(var t=this.textNodes.length,e=0;t--;)e+=this.textNodes[t].length;return e},toString:function(){for(var t=[],e=0,n=this.textNodes.length;e<n;++e)t[e]="'"+this.textNodes[e].data+"'";return"[Merge("+t.join(",")+")]"}},a.prototype={getAncestorWithClass:function(n){for(var o;n;){if(this.cssClass)if(o=this.cssClass,n.className){var i=n.className.match(this.similarClassRegExp)||[];o=i[i.length-1]===o}else o=!1;else o=!0;if(n.nodeType==t.ELEMENT_NODE&&e.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&o)return n;n=n.parentNode}return!1},postApply:function(t,e){for(var n,o,a,r=t[0],s=t[t.length-1],l=[],c=r,u=s,d=0,h=s.length,f=0,p=t.length;f<p;++f)o=t[f],(a=this.getAdjacentMergeableTextNode(o.parentNode,!1))?(n||(n=new i(a),l.push(n)),n.textNodes.push(o),o===r&&(c=n.firstTextNode,d=c.length),o===s&&(u=n.firstTextNode,h=n.getLength())):n=null;if((r=this.getAdjacentMergeableTextNode(s.parentNode,!0))&&(n||(n=new i(s),l.push(n)),n.textNodes.push(r)),l.length){for(f=0,p=l.length;f<p;++f)l[f].doMerge();e.setStart(c,d),e.setEnd(u,h)}},getAdjacentMergeableTextNode:function(e,n){var o=e.nodeType==t.TEXT_NODE,i=o?e.parentNode:e,a=n?"nextSibling":"previousSibling";if(o){if((o=e[a])&&o.nodeType==t.TEXT_NODE)return o}else if((o=i[a])&&this.areElementsMergeable(e,o))return o[n?"firstChild":"lastChild"];return null},areElementsMergeable:function(t,n){var o;if((o=e.dom.arrayContains(this.tagNames,(t.tagName||"").toLowerCase()))&&(o=e.dom.arrayContains(this.tagNames,(n.tagName||"").toLowerCase()))&&(o=t.className.replace(s," ")==n.className.replace(s," ")))t:if(t.attributes.length!=n.attributes.length)o=!1;else{o=0;for(var i,a,r=t.attributes.length;o<r;++o)if(i=t.attributes[o],"class"!=(a=i.name)&&(a=n.attributes.getNamedItem(a),i.specified!=a.specified||i.specified&&i.nodeValue!==a.nodeValue)){o=!1;break t}o=!0}return o},createContainer:function(t){return t=t.createElement(this.tagNames[0]),this.cssClass&&(t.className=this.cssClass),t},applyToTextNode:function(t){var n=t.parentNode;1==n.childNodes.length&&e.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())?this.cssClass&&(t=this.cssClass,n.className?(n.className&&(n.className=n.className.replace(this.similarClassRegExp,"")),n.className+=" "+t):n.className=t):(n=this.createContainer(e.dom.getDocument(t)),t.parentNode.insertBefore(n,t),n.appendChild(t))},isRemovable:function(n){return e.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&t.lang.string(n.className).trim()==this.cssClass},undoToTextNode:function(t,e,i){if(e.containsNode(i)||((t=e.cloneRange()).selectNode(i),t.isPointInRange(e.endContainer,e.endOffset)&&n(e.endContainer,e.endOffset)&&(o(i,e.endContainer,e.endOffset),e.setEndAfter(i)),t.isPointInRange(e.startContainer,e.startOffset)&&n(e.startContainer,e.startOffset)&&(i=o(i,e.startContainer,e.startOffset))),this.similarClassRegExp&&i.className&&(i.className=i.className.replace(this.similarClassRegExp,"")),this.isRemovable(i)){for(i=(e=i).parentNode;e.firstChild;)i.insertBefore(e.firstChild,e);i.removeChild(e)}},applyToRange:function(e){var n=e.getNodes([t.TEXT_NODE]);if(!n.length)try{var o=this.createContainer(e.endContainer.ownerDocument);return e.surroundContents(o),void this.selectNode(e,o)}catch(t){}if(e.splitBoundaries(),(n=e.getNodes([t.TEXT_NODE])).length){for(var i=0,a=n.length;i<a;++i)o=n[i],this.getAncestorWithClass(o)||this.applyToTextNode(o);e.setStart(n[0],0),o=n[n.length-1],e.setEnd(o,o.length),this.normalize&&this.postApply(n,e)}},undoToRange:function(e){var n,o,i=e.getNodes([t.TEXT_NODE]);i.length?(e.splitBoundaries(),i=e.getNodes([t.TEXT_NODE])):(i=e.endContainer.ownerDocument.createTextNode(t.INVISIBLE_SPACE),e.insertNode(i),e.selectNode(i),i=[i]);for(var a=0,r=i.length;a<r;++a)n=i[a],(o=this.getAncestorWithClass(n))&&this.undoToTextNode(n,e,o);1==r?this.selectNode(e,i[0]):(e.setStart(i[0],0),n=i[i.length-1],e.setEnd(n,n.length),this.normalize&&this.postApply(i,e))},selectNode:function(e,n){var o=n.nodeType===t.ELEMENT_NODE,i=!("canHaveHTML"in n)||n.canHaveHTML,a=o?n.innerHTML:n.data;if((a=""===a||a===t.INVISIBLE_SPACE)&&o&&i)try{n.innerHTML=t.INVISIBLE_SPACE}catch(t){}e.selectNodeContents(n),a&&o?e.collapse(!1):a&&(e.setStartAfter(n),e.setEndAfter(n))},getTextSelectedByRange:function(t,e){var n=e.cloneRange();n.selectNodeContents(t);var o=(o=n.intersection(e))?o.toString():"";return n.detach(),o},isAppliedToRange:function(e){var n,o=[],i=e.getNodes([t.TEXT_NODE]);if(!i.length)return!!(n=this.getAncestorWithClass(e.startContainer))&&[n];for(var a,r=0,s=i.length;r<s;++r){if(a=this.getTextSelectedByRange(i[r],e),n=this.getAncestorWithClass(i[r]),""!=a&&!n)return!1;o.push(n)}return o},toggleRange:function(t){this.isAppliedToRange(t)?this.undoToRange(t):this.applyToRange(t)}},t.selection.HTMLApplier=a}(wysihtml5,rangy),wysihtml5.Commands=Base.extend({constructor:function(t){this.editor=t,this.composer=t.composer,this.doc=this.composer.doc},support:function(t){return wysihtml5.browser.supportsCommand(this.doc,t)},exec:function(t,e){var n=wysihtml5.commands[t],o=wysihtml5.lang.array(arguments).get(),i=n&&n.exec,a=null;if(this.editor.fire("beforecommand:composer"),i)o.unshift(this.composer),a=i.apply(n,o);else try{a=this.doc.execCommand(t,!1,e)}catch(t){}return this.editor.fire("aftercommand:composer"),a},state:function(t,e){var n=wysihtml5.commands[t],o=wysihtml5.lang.array(arguments).get(),i=n&&n.state;if(i)return o.unshift(this.composer),i.apply(n,o);try{return this.doc.queryCommandState(t)}catch(t){return!1}},value:function(t){var e=wysihtml5.commands[t],n=e&&e.value;if(n)return n.call(e,this.composer,t);try{return this.doc.queryCommandValue(t)}catch(t){return null}}}),function(t){t.commands.bold={exec:function(e,n){return t.commands.formatInline.exec(e,n,"b")},state:function(e,n){return t.commands.formatInline.state(e,n,"b")},value:function(){}}}(wysihtml5),function(t){function e(e,a){var r,s,l,c=e.doc,u="_wysihtml5-temp-"+ +new Date,d=0;for(t.commands.formatInline.exec(e,n,o,u,/non-matching-class/g),u=(r=c.querySelectorAll(o+"."+u)).length;d<u;d++)for(l in(s=r[d]).removeAttribute("class"),a)s.setAttribute(l,a[l]);d=s,1===u&&(l=i.getTextContent(s),u=!!s.querySelector("*"),l=""===l||l===t.INVISIBLE_SPACE,!u&&l&&(i.setTextContent(s,a.text||s.href),c=c.createTextNode(" "),e.selection.setAfter(s),e.selection.insertNode(c),d=c)),e.selection.setAfter(d)}var n,o="A",i=t.dom;t.commands.createLink={exec:function(t,n,o){var a=this.state(t,n);a?t.selection.executeAndRestore(function(){for(var t,e,n,o=a.length,r=0;r<o;r++)t=a[r],e=i.getParentElement(t,{nodeName:"code"}),n=i.getTextContent(t),n.match(i.autoLink.URL_REG_EXP)&&!e?i.renameElement(t,"code"):i.replaceWithChildNodes(t)}):(o="object"==typeof o?o:{href:o},e(t,o))},state:function(e,n){return t.commands.formatInline.state(e,n,"A")},value:function(){return n}}}(wysihtml5),function(t){var e=/wysiwyg-font-size-[a-z\-]+/g;t.commands.fontSize={exec:function(n,o,i){return t.commands.formatInline.exec(n,o,"span","wysiwyg-font-size-"+i,e)},state:function(n,o,i){return t.commands.formatInline.state(n,o,"span","wysiwyg-font-size-"+i,e)},value:function(){}}}(wysihtml5),function(t){var e=/wysiwyg-color-[a-z]+/g;t.commands.foreColor={exec:function(n,o,i){return t.commands.formatInline.exec(n,o,"span","wysiwyg-color-"+i,e)},state:function(n,o,i){return t.commands.formatInline.state(n,o,"span","wysiwyg-color-"+i,e)},value:function(){}}}(wysihtml5),function(t){function e(e){for(e=e.previousSibling;e&&e.nodeType===t.TEXT_NODE&&!t.lang.string(e.data).trim();)e=e.previousSibling;return e}function n(e){for(e=e.nextSibling;e&&e.nodeType===t.TEXT_NODE&&!t.lang.string(e.data).trim();)e=e.nextSibling;return e}function o(t){return"BR"===t.nodeName||"block"===r.getStyle("display").from(t)}function i(e,n,o,i){if(i)var a=r.observe(e,"DOMNodeInserted",function(e){(e=e.target).nodeType===t.ELEMENT_NODE&&"inline"!==r.getStyle("display").from(e).substr(0,6)&&(e.className+=" "+i)});e.execCommand(n,!1,o),a&&a.stop()}function a(t,o){t.selection.selectLine(),t.selection.surround(o);var i=n(o),a=e(o);i&&"BR"===i.nodeName&&i.parentNode.removeChild(i),a&&"BR"===a.nodeName&&a.parentNode.removeChild(a),(i=o.lastChild)&&"BR"===i.nodeName&&i.parentNode.removeChild(i),t.selection.selectNode(o)}var r=t.dom,s="H1 H2 H3 H4 H5 H6 P BLOCKQUOTE DIV".split(" ");t.commands.formatBlock={exec:function(l,c,u,d,h){var f,p=l.doc,m=this.state(l,c,u,d,h),u="string"==typeof u?u.toUpperCase():u;if(m)l.selection.executeAndRestoreSimple(function(){h&&(m.className=m.className.replace(h,""));var i=!!t.lang.string(m.className).trim();if(i||m.nodeName!==(u||"DIV"))i&&r.renameElement(m,"DIV");else{var a=(i=m).ownerDocument,s=n(i),l=e(i);s&&!o(s)&&i.parentNode.insertBefore(a.createElement("br"),s),l&&!o(l)&&i.parentNode.insertBefore(a.createElement("br"),i),r.replaceWithChildNodes(m)}});else{if((null===u||t.lang.array(s).contains(u))&&(f=l.selection.getSelectedNode(),m=r.getParentElement(f,{nodeName:s})))return void l.selection.executeAndRestoreSimple(function(){if(u&&(m=r.renameElement(m,u)),d){var t=m;t.className?(t.className=t.className.replace(h,""),t.className+=" "+d):t.className=d}});l.commands.support(c)?i(p,c,u||"DIV",d):(m=p.createElement(u||"DIV"),d&&(m.className=d),a(l,m))}},state:function(t,e,n,o,i){return n="string"==typeof n?n.toUpperCase():n,t=t.selection.getSelectedNode(),r.getParentElement(t,{nodeName:n,className:o,classRegExp:i})},value:function(){}}}(wysihtml5),function(t){function e(e,i,a){var r=e+":"+i;if(!o[r]){var s=o,l=t.selection.HTMLApplier,c=n[e],e=c?[e.toLowerCase(),c.toLowerCase()]:[e.toLowerCase()];s[r]=new l(e,i,a,!0)}return o[r]}var n={strong:"b",em:"i",b:"strong",i:"em"},o={};t.commands.formatInline={exec:function(t,n,o,i,a){if(!(n=t.selection.getRange()))return!1;e(o,i,a).toggleRange(n),t.selection.setSelection(n)},state:function(o,i,a,r,s){var i=o.doc,l=n[a]||a;return!(!t.dom.hasElementWithTagName(i,a)&&!t.dom.hasElementWithTagName(i,l)||r&&!t.dom.hasElementWithClassName(i,r))&&(!!(o=o.selection.getRange())&&e(a,r,s).isAppliedToRange(o))},value:function(){}}}(wysihtml5),function(t){t.commands.insertHTML={exec:function(t,e,n){t.commands.support(e)?t.doc.execCommand(e,!1,n):t.selection.insertHTML(n)},state:function(){return!1},value:function(){}}}(wysihtml5),function(t){t.commands.insertImage={exec:function(e,n,o){var i,o="object"==typeof o?o:{src:o},a=e.doc;if(n=this.state(e))e.selection.setBefore(n),(o=n.parentNode).removeChild(n),t.dom.removeEmptyTextNodes(o),"A"===o.nodeName&&!o.firstChild&&(e.selection.setAfter(o),o.parentNode.removeChild(o)),t.quirks.redraw(e.element);else{n=a.createElement("IMG");for(i in o)n[i]=o[i];e.selection.insertNode(n),t.browser.hasProblemsSettingCaretAfterImg()?(o=a.createTextNode(t.INVISIBLE_SPACE),e.selection.insertNode(o),e.selection.setAfter(o)):e.selection.setAfter(n)}},state:function(e){var n;return!!t.dom.hasElementWithTagName(e.doc,"IMG")&&(!!(n=e.selection.getSelectedNode())&&("IMG"===n.nodeName?n:n.nodeType===t.ELEMENT_NODE&&(n=e.selection.getText(),!(n=t.lang.string(n).trim())&&(1===(e=e.selection.getNodes(t.ELEMENT_NODE,function(t){return"IMG"===t.nodeName})).length&&e[0]))))},value:function(t){return(t=this.state(t))&&t.src}}}(wysihtml5),function(t){var e="<br>"+(t.browser.needsSpaceAfterLineBreak()?" ":"");t.commands.insertLineBreak={exec:function(n,o){n.commands.support(o)?(n.doc.execCommand(o,!1,null),t.browser.autoScrollsToCaret()||n.selection.scrollIntoView()):n.commands.exec("insertHTML",e)},state:function(){return!1},value:function(){}}}(wysihtml5),function(t){t.commands.insertOrderedList={exec:function(e,n){var o,i=e.doc,a=e.selection.getSelectedNode(),r=t.dom.getParentElement(a,{nodeName:"OL"}),s=t.dom.getParentElement(a,{nodeName:"UL"}),a="_wysihtml5-temp-"+(new Date).getTime();e.commands.support(n)?i.execCommand(n,!1,null):r?e.selection.executeAndRestoreSimple(function(){t.dom.resolveList(r)}):s?e.selection.executeAndRestoreSimple(function(){t.dom.renameElement(s,"ol")}):(e.commands.exec("formatBlock","div",a),o=i.querySelector("."+a),i=""===o.innerHTML||o.innerHTML===t.INVISIBLE_SPACE,e.selection.executeAndRestoreSimple(function(){r=t.dom.convertToList(o,"ol")}),i&&e.selection.selectNode(r.querySelector("li")))},state:function(e){return e=e.selection.getSelectedNode(),t.dom.getParentElement(e,{nodeName:"OL"})},value:function(){}}}(wysihtml5),function(t){t.commands.insertUnorderedList={exec:function(e,n){var o,i=e.doc,a=e.selection.getSelectedNode(),r=t.dom.getParentElement(a,{nodeName:"UL"}),s=t.dom.getParentElement(a,{nodeName:"OL"}),a="_wysihtml5-temp-"+(new Date).getTime();e.commands.support(n)?i.execCommand(n,!1,null):r?e.selection.executeAndRestoreSimple(function(){t.dom.resolveList(r)}):s?e.selection.executeAndRestoreSimple(function(){t.dom.renameElement(s,"ul")}):(e.commands.exec("formatBlock","div",a),o=i.querySelector("."+a),i=""===o.innerHTML||o.innerHTML===t.INVISIBLE_SPACE,e.selection.executeAndRestoreSimple(function(){r=t.dom.convertToList(o,"ul")}),i&&e.selection.selectNode(r.querySelector("li")))},state:function(e){return e=e.selection.getSelectedNode(),t.dom.getParentElement(e,{nodeName:"UL"})},value:function(){}}}(wysihtml5),function(t){t.commands.italic={exec:function(e,n){return t.commands.formatInline.exec(e,n,"i")},state:function(e,n){return t.commands.formatInline.state(e,n,"i")},value:function(){}}}(wysihtml5),function(t){var e=/wysiwyg-text-align-[a-z]+/g;t.commands.justifyCenter={exec:function(n){return t.commands.formatBlock.exec(n,"formatBlock",null,"wysiwyg-text-align-center",e)},state:function(n){return t.commands.formatBlock.state(n,"formatBlock",null,"wysiwyg-text-align-center",e)},value:function(){}}}(wysihtml5),function(t){var e=/wysiwyg-text-align-[a-z]+/g;t.commands.justifyLeft={exec:function(n){return t.commands.formatBlock.exec(n,"formatBlock",null,"wysiwyg-text-align-left",e)},state:function(n){return t.commands.formatBlock.state(n,"formatBlock",null,"wysiwyg-text-align-left",e)},value:function(){}}}(wysihtml5),function(t){var e=/wysiwyg-text-align-[a-z]+/g;t.commands.justifyRight={exec:function(n){return t.commands.formatBlock.exec(n,"formatBlock",null,"wysiwyg-text-align-right",e)},state:function(n){return t.commands.formatBlock.state(n,"formatBlock",null,"wysiwyg-text-align-right",e)},value:function(){}}}(wysihtml5),function(t){t.commands.underline={exec:function(e,n){return t.commands.formatInline.exec(e,n,"u")},state:function(e,n){return t.commands.formatInline.state(e,n,"u")},value:function(){}}}(wysihtml5),function(t){var e='<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+t.INVISIBLE_SPACE+"</span>",n='<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+t.INVISIBLE_SPACE+"</span>",o=t.dom;t.UndoManager=t.lang.Dispatcher.extend({constructor:function(t){this.editor=t,this.composer=t.composer,this.element=this.composer.element,this.history=[this.composer.getValue()],this.position=1,this.composer.commands.support("insertHTML")&&this._observe()},_observe:function(){var i,a=this,r=this.composer.sandbox.getDocument();if(o.observe(this.element,"keydown",function(t){if(!t.altKey&&(t.ctrlKey||t.metaKey)){var e=t.keyCode,n=90===e&&t.shiftKey||89===e;90!==e||t.shiftKey?n&&(a.redo(),t.preventDefault()):(a.undo(),t.preventDefault())}}),o.observe(this.element,"keydown",function(t){(t=t.keyCode)!==i&&(i=t,(8===t||46===t)&&a.transact())}),t.browser.hasUndoInContextMenu()){var s,l,c=function(){for(var t;t=r.querySelector("._wysihtml5-temp");)t.parentNode.removeChild(t);clearInterval(s)};o.observe(this.element,"contextmenu",function(){c(),a.composer.selection.executeAndRestoreSimple(function(){a.element.lastChild&&a.composer.selection.setAfter(a.element.lastChild),r.execCommand("insertHTML",!1,e),r.execCommand("insertHTML",!1,n),r.execCommand("undo",!1,null)}),s=setInterval(function(){r.getElementById("_wysihtml5-redo")?(c(),a.redo()):r.getElementById("_wysihtml5-undo")||(c(),a.undo())},400),l||(l=!0,o.observe(document,"mousedown",c),o.observe(r,["mousedown","paste","cut","copy"],c))})}this.editor.observe("newword:composer",function(){a.transact()}).observe("beforecommand:composer",function(){a.transact()})},transact:function(){var t=this.history[this.position-1],e=this.composer.getValue();e!=t&&(40<(this.history.length=this.position)&&(this.history.shift(),this.position--),this.position++,this.history.push(e))},undo:function(){this.transact(),1>=this.position||(this.set(this.history[--this.position-1]),this.editor.fire("undo:composer"))},redo:function(){this.position>=this.history.length||(this.set(this.history[++this.position-1]),this.editor.fire("redo:composer"))},set:function(t){this.composer.setValue(t),this.editor.focus(!0)}})}(wysihtml5),wysihtml5.views.View=Base.extend({constructor:function(t,e,n){this.parent=t,this.element=e,this.config=n,this._observeViewChange()},_observeViewChange:function(){var t=this;this.parent.observe("beforeload",function(){t.parent.observe("change_view",function(e){e===t.name?(t.parent.currentView=t,t.show(),setTimeout(function(){t.focus()},0)):t.hide()})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")!==this.element)try{this.element.focus()}catch(t){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}}),function(t){var e=t.dom,n=t.browser;t.views.Composer=t.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(t,e,n){this.base(t,e,n),this.textarea=this.parent.textarea,this._initSandbox()},clear:function(){this.element.innerHTML=n.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(e){var n=this.isEmpty()?"":t.quirks.getCorrectInnerHTML(this.element);return e&&(n=this.parent.parse(n)),n=t.lang.string(n).replace(t.INVISIBLE_SPACE).by("")},setValue:function(t,e){e&&(t=this.parent.parse(t)),this.element.innerHTML=t},show:function(){this.iframe.style.display=this._displayStyle||"",this.disable(),this.enable()},hide:function(){this._displayStyle=e.getStyle("display").from(this.iframe),"none"===this._displayStyle&&(this._displayStyle=null),this.iframe.style.display="none"},disable:function(){this.element.removeAttribute("contentEditable"),this.base()},enable:function(){this.element.setAttribute("contentEditable","true"),this.base()},focus:function(e){t.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear(),this.base();var n=this.element.lastChild;e&&n&&("BR"===n.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getTextContent:function(){return e.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==this.textarea.element.getAttribute("placeholder")},isEmpty:function(){var t=this.element.innerHTML;return""===t||t===this.CARET_HACK||this.hasPlaceholderSet()||""===this.getTextContent()&&!this.element.querySelector("blockquote, ul, ol, img, embed, object, table, iframe, svg, video, audio, button, input, select, textarea")},_initSandbox:function(){var t=this;this.sandbox=new e.Sandbox(function(){t._create()},{stylesheets:this.config.stylesheets}),this.iframe=this.sandbox.getIframe();var n=document.createElement("input");n.type="hidden",n.name="_wysihtml5_mode",n.value=1;var o=this.textarea.element;e.insert(this.iframe).after(o),e.insert(n).after(o)},_create:function(){var o=this;this.doc=this.sandbox.getDocument(),this.element=this.doc.body,this.textarea=this.parent.textarea,this.element.innerHTML=this.textarea.getValue(!0),this.enable(),this.selection=new t.Selection(this.parent),this.commands=new t.Commands(this.parent),e.copyAttributes("className spellcheck title lang dir accessKey".split(" ")).from(this.textarea.element).to(this.element),e.addClass(this.element,this.config.composerClassName),this.config.style&&this.style(),this.observe();var i=this.config.name;i&&(e.addClass(this.element,i),e.addClass(this.iframe,i)),(i="string"==typeof this.config.placeholder?this.config.placeholder:this.textarea.element.getAttribute("placeholder"))&&e.simulatePlaceholder(this.parent,this,i),this.commands.exec("styleWithCSS",!1),this._initAutoLinking(),this._initObjectResizing(),this._initUndoManager(),(this.textarea.element.hasAttribute("autofocus")||document.querySelector(":focus")==this.textarea.element)&&setTimeout(function(){o.focus()},100),t.quirks.insertLineBreakOnReturn(this),n.clearsContentEditableCorrectly()||t.quirks.ensureProperClearing(this),n.clearsListsInContentEditableCorrectly()||t.quirks.ensureProperClearingOfLists(this),this.initSync&&this.config.sync&&this.initSync(),this.textarea.hide(),this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var o=this,i=n.canDisableAutoLinking(),a=n.doesAutoLinkingInContentEditable();if(i&&this.commands.exec("autoUrlDetect",!1),this.config.autoLink){(!a||a&&i)&&this.parent.observe("newword:composer",function(){o.selection.executeAndRestore(function(t,n){e.autoLink(n.parentNode)})});var r=this.sandbox.getDocument().getElementsByTagName("a"),s=e.autoLink.URL_REG_EXP,l=function(n){return"www."===(n=t.lang.string(e.getTextContent(n)).trim()).substr(0,4)&&(n="http://"+n),n};e.observe(this.element,"keydown",function(t){if(r.length){var n,t=o.selection.getSelectedNode(t.target.ownerDocument),i=e.getParentElement(t,{nodeName:"A"},4);i&&(n=l(i),setTimeout(function(){var t=l(i);t!==n&&t.match(s)&&i.setAttribute("href",t)},0))}})}},_initObjectResizing:function(){var o=["width","height"],i=o.length,a=this.element;this.commands.exec("enableObjectResizing",this.config.allowObjectResizing),this.config.allowObjectResizing?n.supportsEvent("resizeend")&&e.observe(a,"resizeend",function(e){for(var n,r=(e=e.target||e.srcElement).style,s=0;s<i;s++)n=o[s],r[n]&&(e.setAttribute(n,parseInt(r[n],10)),r[n]="");t.quirks.redraw(a)}):n.supportsEvent("resizestart")&&e.observe(a,"resizestart",function(t){t.preventDefault()})},_initUndoManager:function(){new t.UndoManager(this.parent)}})}(wysihtml5),function(t){var e=t.dom,n=document,o=window,i=n.createElement("div"),a="background-color color cursor font-family font-size font-style font-variant font-weight line-height letter-spacing text-align text-decoration text-indent text-rendering word-break word-wrap word-spacing".split(" "),r="background-color border-collapse border-bottom-color border-bottom-style border-bottom-width border-left-color border-left-style border-left-width border-right-color border-right-style border-right-width border-top-color border-top-style border-top-width clear display float margin-bottom margin-left margin-right margin-top outline-color outline-offset outline-width outline-style padding-left padding-right padding-top padding-bottom position top left right bottom z-index vertical-align text-align -webkit-box-sizing -moz-box-sizing -ms-box-sizing box-sizing -webkit-box-shadow -moz-box-shadow -ms-box-shadow box-shadow -webkit-border-top-right-radius -moz-border-radius-topright border-top-right-radius -webkit-border-bottom-right-radius -moz-border-radius-bottomright border-bottom-right-radius -webkit-border-bottom-left-radius -moz-border-radius-bottomleft border-bottom-left-radius -webkit-border-top-left-radius -moz-border-radius-topleft border-top-left-radius width height".split(" "),s="width height top left right bottom".split(" "),l=["html             { height: 100%; }","body             { min-height: 100%; padding: 0; margin: 0; margin-top: -1px; padding-top: 1px; }","._wysihtml5-temp { display: none; }",t.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","body[disabled]   { background-color: #eee !important; color: #999 !important; cursor: default !important; }","img:-moz-broken  { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],c=function(t){if(t.setActive)try{t.setActive()}catch(t){}else{var i=t.style,a=n.documentElement.scrollTop||n.body.scrollTop,r=n.documentElement.scrollLeft||n.body.scrollLeft,i={position:i.position,top:i.top,left:i.left,WebkitUserSelect:i.WebkitUserSelect};e.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(t),t.focus(),e.setStyles(i).on(t),o.scrollTo&&o.scrollTo(r,a)}};t.views.Composer.prototype.style=function(){var u=this,d=n.querySelector(":focus"),h=this.textarea.element,f=h.hasAttribute("placeholder"),p=f&&h.getAttribute("placeholder");this.focusStylesHost=this.focusStylesHost||i.cloneNode(!1),this.blurStylesHost=this.blurStylesHost||i.cloneNode(!1),f&&h.removeAttribute("placeholder"),h===d&&h.blur(),e.copyStyles(r).from(h).to(this.iframe).andTo(this.blurStylesHost),e.copyStyles(a).from(h).to(this.element).andTo(this.blurStylesHost),e.insertCSS(l).into(this.element.ownerDocument),c(h),e.copyStyles(r).from(h).to(this.focusStylesHost),e.copyStyles(a).from(h).to(this.focusStylesHost);var m=t.lang.array(r).without(["display"]);if(d?d.focus():h.blur(),f&&h.setAttribute("placeholder",p),!t.browser.hasCurrentStyleProperty())var g=e.observe(o,"resize",function(){if(e.contains(document.documentElement,u.iframe)){var t=e.getStyle("display").from(h),n=e.getStyle("display").from(u.iframe);h.style.display="",u.iframe.style.display="none",e.copyStyles(s).from(h).to(u.iframe).andTo(u.focusStylesHost).andTo(u.blurStylesHost),u.iframe.style.display=n,h.style.display=t}else g.stop()});return this.parent.observe("focus:composer",function(){e.copyStyles(m).from(u.focusStylesHost).to(u.iframe),e.copyStyles(a).from(u.focusStylesHost).to(u.element)}),this.parent.observe("blur:composer",function(){e.copyStyles(m).from(u.blurStylesHost).to(u.iframe),e.copyStyles(a).from(u.blurStylesHost).to(u.element)}),this}}(wysihtml5),function(t){var e=t.dom,n=t.browser,o={66:"bold",73:"italic",85:"underline"};t.views.Composer.prototype.observe=function(){var i=this,a=this.getValue(),r=this.sandbox.getIframe(),s=this.element,l=n.supportsEventsInIframeCorrectly()?s:this.sandbox.getWindow(),c=n.supportsEvent("drop")?["drop","paste"]:["dragdrop","paste"];e.observe(r,"DOMNodeRemoved",function(){clearInterval(u),i.parent.fire("destroy:composer")});var u=setInterval(function(){e.contains(document.documentElement,r)||(clearInterval(u),i.parent.fire("destroy:composer"))},250);e.observe(l,"focus",function(){i.parent.fire("focus").fire("focus:composer"),setTimeout(function(){a=i.getValue()},0)}),e.observe(l,"blur",function(){a!==i.getValue()&&i.parent.fire("change").fire("change:composer"),i.parent.fire("blur").fire("blur:composer")}),t.browser.isIos()&&e.observe(s,"blur",function(){var t=s.ownerDocument.createElement("input"),e=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollLeft||document.body.scrollLeft;try{i.selection.insertNode(t)}catch(e){s.appendChild(t)}t.focus(),t.parentNode.removeChild(t),window.scrollTo(n,e)}),e.observe(s,"dragenter",function(){i.parent.fire("unset_placeholder")}),n.firesOnDropOnlyWhenOnDragOverIsCancelled()&&e.observe(s,["dragover","dragenter"],function(t){t.preventDefault()}),e.observe(s,c,function(t){var e,o=t.dataTransfer;o&&n.supportsDataTransfer()&&(e=o.getData("text/html")||o.getData("text/plain")),e?(s.focus(),i.commands.exec("insertHTML",e),i.parent.fire("paste").fire("paste:composer"),t.stopPropagation(),t.preventDefault()):setTimeout(function(){i.parent.fire("paste").fire("paste:composer")},0)}),e.observe(s,"keyup",function(e){((e=e.keyCode)===t.SPACE_KEY||e===t.ENTER_KEY)&&i.parent.fire("newword:composer")}),this.parent.observe("paste:composer",function(){setTimeout(function(){i.parent.fire("newword:composer")},0)}),n.canSelectImagesInContentEditable()||e.observe(s,"mousedown",function(t){var e=t.target;"IMG"===e.nodeName&&(i.selection.selectNode(e),t.preventDefault())}),e.observe(s,"keydown",function(t){var e=o[t.keyCode];(t.ctrlKey||t.metaKey)&&!t.altKey&&e&&(i.commands.exec(e),t.preventDefault())}),e.observe(s,"keydown",function(e){var n=i.selection.getSelectedNode(!0),o=e.keyCode;!n||"IMG"!==n.nodeName||o!==t.BACKSPACE_KEY&&o!==t.DELETE_KEY||((o=n.parentNode).removeChild(n),"A"===o.nodeName&&!o.firstChild&&o.parentNode.removeChild(o),setTimeout(function(){t.quirks.redraw(s)},0),e.preventDefault())});var d={IMG:"Image: ",A:"Link: "};e.observe(s,"mouseover",function(t){var e=(t=t.target).nodeName;!("A"!==e&&"IMG"!==e)&&!t.hasAttribute("title")&&(e=d[e]+(t.getAttribute("href")||t.getAttribute("src")),t.setAttribute("title",e))})}}(wysihtml5),function(t){t.views.Synchronizer=Base.extend({constructor:function(t,e,n){this.editor=t,this.textarea=e,this.composer=n,this._observe()},fromComposerToTextarea:function(e){this.textarea.setValue(t.lang.string(this.composer.getValue()).trim(),e)},fromTextareaToComposer:function(t){var e=this.textarea.getValue();e?this.composer.setValue(e,t):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(t){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(t):this.fromComposerToTextarea(t)},_observe:function(){var e,n=this,o=this.textarea.element.form,i=function(){e=setInterval(function(){n.fromComposerToTextarea()},400)},a=function(){clearInterval(e),e=null};i(),o&&(t.dom.observe(o,"submit",function(){n.sync(!0)}),t.dom.observe(o,"reset",function(){setTimeout(function(){n.fromTextareaToComposer()},0)})),this.editor.observe("change_view",function(t){"composer"!==t||e?"textarea"===t&&(n.fromComposerToTextarea(!0),a()):(n.fromTextareaToComposer(!0),i())}),this.editor.observe("destroy:composer",a)}})}(wysihtml5),wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(t,e,n){this.base(t,e,n),this._observe()},clear:function(){this.element.value=""},getValue:function(t){var e=this.isEmpty()?"":this.element.value;return t&&(e=this.parent.parse(e)),e},setValue:function(t,e){e&&(t=this.parent.parse(t)),this.element.value=t},hasPlaceholderSet:function(){var t=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),e=this.element.getAttribute("placeholder")||null,n=this.element.value;return t&&!n||n===e},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var t=this.element,e=this.parent,n={focusin:"focus",focusout:"blur"},o=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];e.observe("beforeload",function(){wysihtml5.dom.observe(t,o,function(t){t=n[t.type]||t.type,e.fire(t).fire(t+":textarea")}),wysihtml5.dom.observe(t,["paste","drop"],function(){setTimeout(function(){e.fire("paste").fire("paste:textarea")},0)})})}}),function(t){var e=t.dom;t.toolbar.Dialog=t.lang.Dispatcher.extend({constructor:function(t,e){this.link=t,this.container=e},_observe:function(){if(!this._observed){var n=this,o=function(t){var e=n._serialize();e==n.elementToChange?n.fire("edit",e):n.fire("save",e),n.hide(),t.preventDefault(),t.stopPropagation()};e.observe(n.link,"click",function(){e.hasClass(n.link,"wysihtml5-command-dialog-opened")&&setTimeout(function(){n.hide()},0)}),e.observe(this.container,"keydown",function(e){var i=e.keyCode;i===t.ENTER_KEY&&o(e),i===t.ESCAPE_KEY&&n.hide()}),e.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",o),e.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(t){n.fire("cancel"),n.hide(),t.preventDefault(),t.stopPropagation()});for(var i=this.container.querySelectorAll("input, select, textarea"),a=0,r=i.length,s=function(){clearInterval(n.interval)};a<r;a++)e.observe(i[a],"change",s);this._observed=!0}},_serialize:function(){for(var t=this.elementToChange||{},e=this.container.querySelectorAll("[data-wysihtml5-dialog-field]"),n=e.length,o=0;o<n;o++)t[e[o].getAttribute("data-wysihtml5-dialog-field")]=e[o].value;return t},_interpolate:function(t){for(var e,n,o=document.querySelector(":focus"),i=this.container.querySelectorAll("[data-wysihtml5-dialog-field]"),a=i.length,r=0;r<a;r++)(e=i[r])!==o&&!(t&&"hidden"===e.type)&&(n=e.getAttribute("data-wysihtml5-dialog-field"),n=this.elementToChange?this.elementToChange[n]||"":e.defaultValue,e.value=n)},show:function(t){var n=this,o=this.container.querySelector("input, select, textarea");if(this.elementToChange=t,this._observe(),this._interpolate(),t&&(this.interval=setInterval(function(){n._interpolate(!0)},500)),e.addClass(this.link,"wysihtml5-command-dialog-opened"),this.container.style.display="",this.fire("show"),o&&!t)try{o.focus()}catch(t){}},hide:function(){clearInterval(this.interval),this.elementToChange=null,e.removeClass(this.link,"wysihtml5-command-dialog-opened"),this.container.style.display="none",this.fire("hide")}})}(wysihtml5),function(t){var e=t.dom,n={position:"relative"},o={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1},i={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"},a={"x-webkit-speech":"",speech:""};t.toolbar.Speech=function(r,s){var l=document.createElement("input");if(t.browser.supportsSpeechApiOn(l)){var c=document.createElement("div");t.lang.object(o).merge({width:s.offsetWidth+"px",height:s.offsetHeight+"px"}),e.insert(l).into(c),e.insert(c).into(s),e.setStyles(i).on(l),e.setAttributes(a).on(l),e.setStyles(o).on(c),e.setStyles(n).on(s),e.observe(l,"onwebkitspeechchange"in l?"webkitspeechchange":"speechchange",function(){r.execCommand("insertText",l.value),l.value=""}),e.observe(l,"click",function(t){e.hasClass(s,"wysihtml5-command-disabled")&&t.preventDefault(),t.stopPropagation()})}else s.style.display="none"}}(wysihtml5),function(t){var e=t.dom;t.toolbar.Toolbar=Base.extend({constructor:function(e,n){this.editor=e,this.container="string"==typeof n?document.getElementById(n):n,this.composer=e.composer,this._getLinks("command"),this._getLinks("action"),this._observe(),this.show();for(var o=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),i=o.length,a=0;a<i;a++)new t.toolbar.Speech(this,o[a])},_getLinks:function(e){for(var n,o,i,a,r,s=this[e+"Links"]=t.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+e+"]")).get(),l=s.length,c=0,u=this[e+"Mapping"]={};c<l;c++)n=s[c],i=n.getAttribute("data-wysihtml5-"+e),a=n.getAttribute("data-wysihtml5-"+e+"-value"),o=this.container.querySelector("[data-wysihtml5-"+e+"-group='"+i+"']"),r=this._getDialog(n,i),u[i+":"+a]={link:n,group:o,name:i,value:a,dialog:r,state:!1}},_getDialog:function(e,n){var o,i,a=this,r=this.container.querySelector("[data-wysihtml5-dialog='"+n+"']");return r&&((o=new t.toolbar.Dialog(e,r)).observe("show",function(){i=a.composer.selection.getBookmark(),a.editor.fire("show:dialog",{command:n,dialogContainer:r,commandLink:e})}),o.observe("save",function(t){i&&a.composer.selection.setBookmark(i),a._execCommand(n,t),a.editor.fire("save:dialog",{command:n,dialogContainer:r,commandLink:e})}),o.observe("cancel",function(){a.editor.focus(!1),a.editor.fire("cancel:dialog",{command:n,dialogContainer:r,commandLink:e})})),o},execCommand:function(t,e){if(!this.commandsDisabled){var n=this.commandMapping[t+":"+e];n&&n.dialog&&!n.state?n.dialog.show():this._execCommand(t,e)}},_execCommand:function(t,e){this.editor.focus(!1),this.composer.commands.exec(t,e),this._updateLinkStates()},execAction:function(t){var e=this.editor;switch(t){case"change_view":e.currentView===e.textarea?e.fire("change_view","composer"):e.fire("change_view","textarea")}},_observe:function(){for(var t=this,n=this.editor,o=this.container,i=this.commandLinks.concat(this.actionLinks),a=i.length,r=0;r<a;r++)e.setAttributes({href:"javascript:;",unselectable:"on"}).on(i[r]);e.delegate(o,"[data-wysihtml5-command]","mousedown",function(t){t.preventDefault()}),e.delegate(o,"[data-wysihtml5-command]","click",function(e){var n=this.getAttribute("data-wysihtml5-command"),o=this.getAttribute("data-wysihtml5-command-value");t.execCommand(n,o),e.preventDefault()}),e.delegate(o,"[data-wysihtml5-action]","click",function(e){var n=this.getAttribute("data-wysihtml5-action");t.execAction(n),e.preventDefault()}),n.observe("focus:composer",function(){t.bookmark=null,clearInterval(t.interval),t.interval=setInterval(function(){t._updateLinkStates()},500)}),n.observe("blur:composer",function(){clearInterval(t.interval)}),n.observe("destroy:composer",function(){clearInterval(t.interval)}),n.observe("change_view",function(n){setTimeout(function(){t.commandsDisabled="composer"!==n,t._updateLinkStates(),t.commandsDisabled?e.addClass(o,"wysihtml5-commands-disabled"):e.removeClass(o,"wysihtml5-commands-disabled")},0)})},_updateLinkStates:function(){var n,o,i,a=this.commandMapping,r=this.actionMapping;for(n in a)i=a[n],this.commandsDisabled?(o=!1,e.removeClass(i.link,"wysihtml5-command-active"),i.group&&e.removeClass(i.group,"wysihtml5-command-active"),i.dialog&&i.dialog.hide()):(o=this.composer.commands.state(i.name,i.value),t.lang.object(o).isArray()&&(o=1!==o.length||o[0]),e.removeClass(i.link,"wysihtml5-command-disabled"),i.group&&e.removeClass(i.group,"wysihtml5-command-disabled")),i.state!==o&&((i.state=o)?(e.addClass(i.link,"wysihtml5-command-active"),i.group&&e.addClass(i.group,"wysihtml5-command-active"),i.dialog&&("object"==typeof o?i.dialog.show(o):i.dialog.hide())):(e.removeClass(i.link,"wysihtml5-command-active"),i.group&&e.removeClass(i.group,"wysihtml5-command-active"),i.dialog&&i.dialog.hide()));for(n in r)"change_view"===(a=r[n]).name&&(a.state=this.editor.currentView===this.editor.textarea,a.state?e.addClass(a.link,"wysihtml5-action-active"):e.removeClass(a.link,"wysihtml5-action-active"))},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})}(wysihtml5),function(t){var e={name:void 0,style:!0,toolbar:void 0,autoLink:!0,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},parser:t.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",stylesheets:[],placeholderText:void 0,allowObjectResizing:!0,supportTouchDevices:!0};t.Editor=t.lang.Dispatcher.extend({constructor:function(n,o){if(this.textareaElement="string"==typeof n?document.getElementById(n):n,this.config=t.lang.object({}).merge(e).merge(o).get(),this.currentView=this.textarea=new t.views.Textarea(this,this.textareaElement,this.config),this._isCompatible=t.browser.supported(),!this._isCompatible||!this.config.supportTouchDevices&&t.browser.isTouchDevice()){var i=this;setTimeout(function(){i.fire("beforeload").fire("load")},0)}else{t.dom.addClass(document.body,this.config.bodyClassName),this.currentView=this.composer=new t.views.Composer(this,this.textareaElement,this.config),"function"==typeof this.config.parser&&this._initParser(),this.observe("beforeload",function(){this.synchronizer=new t.views.Synchronizer(this,this.textarea,this.composer),this.config.toolbar&&(this.toolbar=new t.toolbar.Toolbar(this,this.config.toolbar))});try{console.log("Heya! This page is using wysihtml5 for rich text editing. Check out https://github.com/xing/wysihtml5")}catch(t){}}},isCompatible:function(){return this._isCompatible},clear:function(){return this.currentView.clear(),this},getValue:function(t){return this.currentView.getValue(t)},setValue:function(t,e){return t?(this.currentView.setValue(t,e),this):this.clear()},focus:function(t){return this.currentView.focus(t),this},disable:function(){return this.currentView.disable(),this},enable:function(){return this.currentView.enable(),this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(e){var n=this.config.parser(e,this.config.parserRules,this.composer.sandbox.getDocument(),!0);return"object"==typeof e&&t.quirks.redraw(e),n},_initParser:function(){this.observe("paste:composer",function(){var e=this;e.composer.selection.executeAndRestore(function(){t.quirks.cleanPastedHTML(e.composer.element),e.parse(e.composer.element)},!0)}),this.observe("paste:textarea",function(){this.textarea.setValue(this.parse(this.textarea.getValue()))})}})}(wysihtml5);